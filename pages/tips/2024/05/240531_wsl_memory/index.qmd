---
title: 【WSL】割り当てるメモリを増やす方法
description: |
  WSL はデフォルトで PC の半分のメモリが割り当てられています。
date: 2024-05-31
date-modified: last-modified
categories:
- WSL
- Windows
- 備忘録
canonical-url: https://yo5uke.com/pages/tips/2024/05/240531_wsl_memory/
aliases:
- /pages/tips/240531_wsl_memory/index.html
---
## はじめに

WSL & Docker を使用していて、使えるメモリを増やしたい、そんな時にどうすればよいのか解説します。

上にも書いてあるように、デフォルトでは PC の半分のメモリが WSL には割り当てられています。

すなわちメモリが 8GB の PC であれば 4GB が、16GB の PC であれば 8GB が割り当てられています。

プロジェクトによってはより多くのメモリを使いたいこともあると思うので、以下の方法を実行してみて下さい。

ちなみに Mac では Docker Desktop の設定から Resources で変更できます。

## 手順

1. エクスプローラーを開く

2. `c:` → `ユーザー` → 自分のユーザー と進む

    - 僕の場合だったら `C:\Users\yo5uk`
    
3. 左上の「新規作成」から「テキストドキュメント」を選び、ファイル名を `.wslconfig` とする

    - 拡張子も全て消して名前を付けてください。`.wslconfig.txt` ではだめです。
    
    - もし拡張子がデフォルトで表示されない設定の場合は、表示されるよう設定を変更してから行って下さい。
    
    - エクスプローラー右上の「表示」→「表示」→「ファイル名拡張子」をオンにします。

4. メモ帳など任意のテキストエディタで開く

5. 中身を以下のように記述

    - GB の部分は好きに置き換えてください。
    
    - 8GB のPC を使っている場合には、もちろん 12GB は割り当てられません。

```{.txt}
[wsl2]
memory=12GB
swap=8GB
```

6. 保存して閉じる

以上です。これで WSL に割り当てられるメモリが増えました。

ちなみに `memory` は読んで字のごとくメモリを表しますが、ここでの `swap` は、WSL2 が使用するスワップファイルのサイズを設定することを意味します。スワップファイルを適切に設定することで、物理メモリが不足した場合でもシステムの安定性を維持することができます。

## おわりに

WSL に割り当てるメモリを増やす方法をご紹介しました。

プロジェクトによっては必要になることもあると思うので、ご参考まで。


