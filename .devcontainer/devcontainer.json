{
  "name": "yo5uke.github.io",
  "build": { "dockerfile": "Dockerfile" },
  "remoteUser": "rstudio",

  "containerEnv": {
    "TZ": "Asia/Tokyo",
    "RENV_CONFIG_REPOS_OVERRIDE": "https://packagemanager.posit.co/cran/__linux__/jammy/latest"
  },

  "forwardPorts": [8787],

  "postCreateCommand": "cd ${containerWorkspaceFolder} && python3 -m venv .venv && ${containerWorkspaceFolder}/.venv/bin/python -m pip install -U pip && R -q -e \"install.packages(c('renv','pak'))\" && fc-cache -fv || true",

  "postStartCommand": "if [ ! -d ${containerWorkspaceFolder}/.venv ]; then cd ${containerWorkspaceFolder} && python3 -m venv .venv && ${containerWorkspaceFolder}/.venv/bin/python -m pip install -U pip; fi; grep -q \"source ${containerWorkspaceFolder}/.venv/bin/activate\" /home/rstudio/.bashrc || echo 'source ${containerWorkspaceFolder}/.venv/bin/activate' >> /home/rstudio/.bashrc",

  "customizations": {
    "vscode": { "extensions": [
      "James-Yu.latex-workshop"
    ] }
  }
}
