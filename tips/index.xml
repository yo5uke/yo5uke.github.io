<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Yosuke Abe</title>
<link>https://yo5uke.github.io/tips/</link>
<atom:link href="https://yo5uke.github.io/tips/index.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.5.55</generator>
<lastBuildDate>Sun, 21 Jul 2024 15:00:00 GMT</lastBuildDate>
<item>
  <title>【Quarto】論文の体裁を整える</title>
  <link>https://yo5uke.github.io/tips/240722_quarto_latex_setting/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>以下の記事で、Quarto × <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> で論文を書く方法についてまとめました。</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="../240629_write_thesis/index.html">【PDF】Quarto で論文を書く</a></p>
</div>
</div>
</div>
<p>今回はもう少し踏み込んで、論文の体裁を整える設定について考えます<sup>1</sup>。</p>
</section>
<section id="yaml-ヘッダーをいじる" class="level1">
<h1>YAML ヘッダーをいじる</h1>
<p>Quarto や R Markdown でお馴染みの YAML ヘッダーですが、以前の記事での設定は以下の通りでした。</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"【PDF】Quarto で論文を書く"</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">author</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"阿部洋輔"</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">date</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> 2024-07-08</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  # todayで今日の日付にできます</span></span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">date-format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"YYYY年M月D日"</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pdf</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">documentclass</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> article</span></span>
<span id="cb1-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">number-sections</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb1-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">include-in-header</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-11"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">      - </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">text</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb1-12">          \usepackage{zxjatype}</span>
<span id="cb1-13">          \usepackage[ipaex]{zxjafont} </span>
<span id="cb1-14">          # これらは日本語フォントの設定のために記述しています</span>
<span id="cb1-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">execute</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">echo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  # コードを表示しない</span></span>
<span id="cb1-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">warning</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> # 警告とメッセージを表示しない</span></span>
<span id="cb1-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">language</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">crossref-fig-title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"図"</span></span>
<span id="cb1-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">crossref-tbl-title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"表"</span></span>
<span id="cb1-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">crossref-eq-prefix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"式"</span></span>
<span id="cb1-22"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
<p>今回は簡単化のため英語で設定していきますが、さっそく今回の結論は次の通りです。</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb2-2"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">title:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> "Title"</span></span>
<span id="cb2-3"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">author:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  - "Yosuke Abe\\thanks{Osaka School of International Public Policy}"</span></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  - "Author 2\\thanks{Osaka School of International Public Policy}"</span></span>
<span id="cb2-6"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">date:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> 2024-07-22</span></span>
<span id="cb2-7"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">date-format:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> long</span></span>
<span id="cb2-8"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">lang:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> en</span></span>
<span id="cb2-9"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">abstract:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> &gt;</span></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  Here is the abstract.</span></span>
<span id="cb2-11"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">format:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb2-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  pdf: </span></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    documentclass: article</span></span>
<span id="cb2-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    papersize: a4paper</span></span>
<span id="cb2-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    geometry: </span></span>
<span id="cb2-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">      - top=2.5cm</span></span>
<span id="cb2-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">      - bottom=2.5cm</span></span>
<span id="cb2-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">      - left=2.5cm</span></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">      - right=2.5cm</span></span>
<span id="cb2-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    keep-tex: true</span></span>
<span id="cb2-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># bibliography: bibliography.bib</span></span>
<span id="cb2-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 必要に応じて入れる</span></span>
<span id="cb2-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb2-24"></span>
<span id="cb2-25">**JEL classification:** C12, D24, E31</span>
<span id="cb2-26"></span>
<span id="cb2-27">**keywords:** Keyword 1, Keyword 2...</span>
<span id="cb2-28"></span>
<span id="cb2-29">\newpage</span>
<span id="cb2-30"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"># Section 1</span></span>
<span id="cb2-31"></span>
<span id="cb2-32">Write the text here.</span>
<span id="cb2-33"></span>
<span id="cb2-34"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"># Section 2</span></span>
<span id="cb2-35"></span>
<span id="cb2-36">@fig-cars is a plot of CARS data.</span></code></pre></div>
<p>今回発見したのは、<code>abstract</code> が書けるところです。これは助かります。</p>
<p>keyword と JEL classification の部分はもう少し工夫が必要そうです。</p>
<p>出力すると<a href="../../tips/240722_quarto_latex_setting/demo/demo.pdf">このような感じ</a>になります。</p>
<p>とりあえず、ポイントとしては</p>
<ol type="1">
<li><code>author</code> に <code>\\thanks{}</code> を使って所属を書くことができる</li>
<li><code>abstract</code> が書ける
<ul>
<li><code>&gt;</code> で改行を入れ、2スペース分インデントして書き始めるとよい。</li>
</ul></li>
<li><code>format</code> で <code>pdf</code> の設定を変更できる
<ul>
<li><code>documentclass</code> で文書クラスを指定できる。<code>article</code> で十分だと思う。</li>
<li><code>papersize</code> で用紙サイズを指定できる。</li>
<li><code>geometry</code> で余白を設定できる。</li>
<li><code>keep-tex: true</code> で <code>.tex</code> ファイルを残すことができる。</li>
</ul></li>
<li><code>bibliography</code> で参考文献を指定できる
<ul>
<li>Zotero など使用して文献管理をしましょう。</li>
</ul></li>
</ol>
<p>といったところでしょうか。</p>
</section>
<section id="おわりに" class="level1">
<h1>おわりに</h1>
<p>Quarto で論文を書く際の体裁について考えてみました。</p>
<p>自分でも論文を書いていくうちに、また新しい発見があれば追記していきたいと思います。</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>僕自身も試行錯誤中です。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Quarto</category>
  <category>LaTeX</category>
  <guid>https://yo5uke.github.io/tips/240722_quarto_latex_setting/</guid>
  <pubDate>Sun, 21 Jul 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240722_quarto_latex_setting/image/LaTeX_logo.png" medium="image" type="image/png" height="63" width="144"/>
</item>
<item>
  <title>【PDF】Quarto で論文を書く</title>
  <link>https://yo5uke.github.io/tips/240629_write_thesis/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>これまでの記事で R Markdown や Quarto を使って <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> 経由で PDF 出力する方法や、それらで使えるチャンクオプションについてご紹介してきました。</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="../240329_rmarkdown_pdf/index.html">R MarkdownでPDF出力【LaTeX】</a></p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="../240509_chunk_option/index.html">【Quarto】チャンクオプションまとめてみた【R Markdown】</a></p>
</div>
</div>
</div>
<p>今回は、Quarto を使って論文を書く方法について包括的にまとめてみました。</p>
<p>ぜひ参考にしてみてください。</p>
<p>また、環境として RStudio を使用していると仮定します。</p>
</section>
<section id="準備" class="level1">
<h1>準備</h1>
<p>Quarto は R Markdown の亜種、と考えてもらえればと思います。マークダウン形式で記述することができ、<img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> 記法を必ずしも用いる必要がないのが特徴です<sup>1</sup>。<img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> を深く学ばなくてもスタイリッシュな論文が書けるのではないでしょうか。</p>
<p>ここからは、書くのに最低限必要な使い方を紹介します。</p>
<section id="プロジェクトの作成" class="level2">
<h2 class="anchored" data-anchor-id="プロジェクトの作成">プロジェクトの作成</h2>
<p>必須ではありませんが推奨します。プロジェクトを作成することで、ファイルの管理がしやすくなります。</p>
<p>プロジェクトの作成については以下の記事で紹介しています。<img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> との差別化点として、分析結果をそのまま埋め込めることがあげられ、プロジェクトを作成することで、その恩恵を最大限受けられると考えています。</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="../240515_rproj/index.html">【R】プロジェクトを使う</a></p>
</div>
</div>
</div>
</section>
<section id="ファイルの作成" class="level2">
<h2 class="anchored" data-anchor-id="ファイルの作成">ファイルの作成</h2>
<p>Quarto で論文を書くには、拡張子が <code>.qmd</code> のファイルを作成します。これは Quarto Markdown の略です。</p>
<p>RStudio 画面左上の <img src="https://yo5uke.github.io/tips/240629_write_thesis/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAkCAYAAADl9UilAAACvElEQVR4Xu2XTWgTQRSA0/wo4k9VghH14MWzB+9S0YMHbxJBsZDdTdJS3aTBghQPKRRUrF6EWIpNtjSKGo0XTS96CA00CUVpmqot2tLGHvTSNDYFE0jGfUkj4bn52e0EL/vBO+3MvI+Zt29nNRoVlf/BQ36nTrB0tvmYYJvALGsEJg+h9TEp/SgT3DvMsedu2tvNZrMOT20dXvaiKLEqBqkXouQPo4e1dfb17Xa73Vq8DD0CZp1WsNzDAo3i/LM7a6Fw9FM4lpidnE4mlEQknryFdf4i7sAQTgqBwc8h7O8fk0zmFykUCnh4U4Ac9ilTPr5/EjYrBuGJT5CNjSwpFot4SkOkxQLmHZo6NYXBzytx6AlPFldWyO9cDk9piKSYzsdcxUmUiEHcDr8ka+m07COVFBNbwmucQKnYmVeDJPV9leRk7pq0mMCkakk0S2W+yc+TL/MLJJvdxEPqIimmKTdPKmL6MY7MJJJkPZPBQ+pSS2yTptiHjzOlOpODpJjYVJdoiZn81+mJ6b3sm8rCUoHBz6vj9IsBeke5Z4TrwgmUivWHBHrF3+Hu3Q8fZJxErphx/BoJT0XptQu4usAtASeSKzYQGieJ2Tl6DRaAq8u+YW4MJ2tW7FLwPonFp0u7Re2TBMB96rLTaWp/xD3FSRsFSEWiMfJtcYnyR3wLUU5vtTpNxx/Y+g2jbM2aq8QRv4O4xeODnQKp1lx7tgA5u/2G8YrDcerEkO3uAQ83ZfCyP8WXI2fwccWjfic5Gxgk7gk/mRR3KZGcKx0f7JRSKaChGADHCjVn5fljbBd/0trd22Hrdl4YEZ4vQ/OEAp9f+FoSgkKHmlJyfNU0JVYB3laXy7WL41wHLT09h9++i3xOp9dLzRP6VD6f39YuVSNLDAOT8YK0UMXkoorJZVti8FMKC7Qi6v7wqqi0iD86M3fnY/LjkAAAAABJRU5ErkJggg==" class="img-fluid"> をクリックし、「Quarto Document…」を選択します。</p>
<p>以下のようにタイトルと著者名、PDF を選択し、Create をクリックします。“Use visual markdown editor” はオフにしてください<sup>2</sup>。</p>
<p><img src="https://yo5uke.github.io/tips/240629_write_thesis/image/create_document.png" class="img-fluid"></p>
<p>作成出来たら、<img src="https://yo5uke.github.io/tips/240629_write_thesis/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAkCAYAAAD7PHgWAAABBklEQVR4Xu2XMQrCQBBFBQvR6wgJHsEDpHVjBDvvoBhbI3bWCkZbFUyhFrYiEat0WgmC6AVkdQqbIVmWZAOi82C64b+/bDWZDEEQP4phTLMaa9d003bTGMgu1psF7JVGNzuWPdzs18GDz443rgrIcndXbvW8g1axGfZKo7P2eBXc+WB74a3FGXtiA1kwzfnpqTF7hL3SwDfAaz+BqvjkwYADe6WhglQwJlQwKVQwKakVTGOoYNL5z4JxwBlUMEwqAu9SwTCpCLxLBcOkIvCusoKT9/WFQ6OkIvCukoJwt5rO0sehUVIReBem6ng+OLBXmnKjn4PbGM5PeKnqgXIlo5vHXoL4Nl4ZYqbbEGA7+wAAAABJRU5ErkJggg==" class="img-fluid"> でファイルを任意の場所に保存します<sup>3</sup>。</p>
<p>もし Quarto や R Markdown を使うのが初めての場合、上部に “Package rmarkdown required but not installed. Install Don’t show again” というメッセージが表示されるかもしれません。その場合、“Install” をクリックしてインストールしてください。</p>
</section>
<section id="global-options-の設定" class="level2">
<h2 class="anchored" data-anchor-id="global-options-の設定">Global Options の設定</h2>
<p>RStudio 上部のメニューから “Tools” &gt; “Global Options…” を選択します。</p>
<p>その中の “Sweave” を選択し、“Typeset LaTeX into PDF using:” で “XeLaTeX” を選択します。また、その下にある “Use tinytex when compiling .tex files” にチェックを入れます。</p>
<p>最後に OK を押して閉じてください。</p>
</section>
<section id="ヘッダーの記述" class="level2">
<h2 class="anchored" data-anchor-id="ヘッダーの記述">ヘッダーの記述</h2>
<p>ファイルを作成すると、ドキュメントの上部に<code>---</code>で囲まれた部分があります。これを YAML ヘッダーと呼び、ここで文書の設定を行います。</p>
<p>以下は、基本的なYAMLヘッダーの設定です。</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"【PDF】Quarto で論文を書く"</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">author</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"阿部洋輔"</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">date</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> 2024-07-08</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  # todayで今日の日付にできます</span></span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">date-format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"YYYY年M月D日"</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pdf</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">documentclass</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> article</span></span>
<span id="cb1-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">number-sections</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb1-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">include-in-header</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-11"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">      - </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">text</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb1-12">          \usepackage{zxjatype}</span>
<span id="cb1-13">          \usepackage[ipaex]{zxjafont} </span>
<span id="cb1-14">          # これらは日本語フォントの設定のために記述しています</span>
<span id="cb1-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">execute</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">echo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  # コードを表示しない</span></span>
<span id="cb1-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">warning</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> # 警告とメッセージを表示しない</span></span>
<span id="cb1-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">language</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">crossref-fig-title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"図"</span></span>
<span id="cb1-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">crossref-tbl-title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"表"</span></span>
<span id="cb1-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">crossref-eq-prefix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"式"</span></span>
<span id="cb1-22"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
<p>分析コードや実行の際に表示されるメッセージ・警告は出力しなくてよいので <code>false</code> にしてあります。</p>
<p>また、デフォルトだと英語設定でキャプションが Table 1 や Figure 1 と表示されてしまうので、それを日本語に直すために <code>language</code> を追加しています。他にも自動で英語出力されてしまって困る際は<a href="https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/language/_language-ja.yml">こちら</a>から該当するものを探し、下に追加していってください<sup>4</sup>。</p>
<p>もちろん英語論文を執筆する際に日本語設定は不要です。</p>
<p><code>date-format</code> については<a href="https://quarto.org/docs/reference/dates.html">こちら</a>を参考にしてください。</p>
</section>
</section>
<section id="本文の書き方マークダウン編" class="level1">
<h1>本文の書き方（マークダウン編）</h1>
<p>本文は Markdown で記述します。<img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> 記法を使うこともできますが、必ずしも使う必要はありません。もちろん、数式などは <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> 記法を使うことができます。</p>
<p>以下のコードは、基本的な書き方の例です。</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"># 見出し1</span></span>
<span id="cb2-2"></span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">## 見出し2</span></span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">### 見出し3</span></span>
<span id="cb2-6"></span>
<span id="cb2-7">本文です。セクションに応じて見出しをつけることができます。基本的には3段階までの見出しを使います。</span>
<span id="cb2-8"></span>
<span id="cb2-9"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>箇条書き1</span>
<span id="cb2-10"></span>
<span id="cb2-11"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - </span>箇条書き2</span>
<span id="cb2-12"></span>
<span id="cb2-13"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        - </span>箇条書き3</span>
<span id="cb2-14"></span>
<span id="cb2-15">箇条書きを使うときは、ハイフンとスペースを入れてください。2段階目、3段階目を使用するときは、半角スペース4つを入れてください。</span>
<span id="cb2-16"></span>
<span id="cb2-17"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">1. </span>番号付きリスト1</span>
<span id="cb2-18"></span>
<span id="cb2-19"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - </span>箇条書き</span>
<span id="cb2-20"></span>
<span id="cb2-21"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">2. </span>番号付きリスト2</span>
<span id="cb2-22"></span>
<span id="cb2-23">番号付きリストを使うときは、数字とピリオドとスペースを入れてください。</span>
<span id="cb2-24"></span>
<span id="cb2-25">また、改行するときは空行を入れなければなりません。</span>
<span id="cb2-26"></span>
<span id="cb2-27">文中で数式を使いたいときは、<span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`$`</span> で囲んでください。例えば、$y = ax + b$ のように記述します。</span>
<span id="cb2-28"></span>
<span id="cb2-29">数式を別行で書きたいときは、<span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`$$`</span> で囲んでください。例えば、</span>
<span id="cb2-30"></span>
<span id="cb2-31">$$</span>
<span id="cb2-32">y = ax + b</span>
<span id="cb2-33">$$ {#eq-equation-name}</span>
<span id="cb2-34"></span>
<span id="cb2-35">のように記述します。数式にラベルをつけることもできます。<span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`#eq-`</span> の後にラベル名を記述します。</span>
<span id="cb2-36"></span>
<span id="cb2-37">数式を引用するときは、<span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`@eq-equation-name`</span> のように記述します。</span></code></pre></div>
<p>以上が基本的な書き方です。</p>
<p>コードチャンクを使うときは、上記のように記述します。コードは YAML ヘッダーで <code>echo: false</code> としているので、出力されません。結果は出力されます<sup>5</sup>。</p>
<p>出力された PDF は<a href="demo/demo1.pdf">こちら</a>から確認してください。</p>
</section>
<section id="本文の書き方テーブル編" class="level1">
<h1>本文の書き方（テーブル編）</h1>
<p>Quarto で論文を書くことの醍醐味ともいえる、コードとその出力について説明します。</p>
<p>ここではデフォルトで使用できる <code>iris</code> というデータセットを利用して分析、表の出力をしてみたいと思います。</p>
<p>例えば以下のコードを実行すると 表&nbsp;1 のように出力されます。</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| label: tbl-regression</span></span>
<span id="cb3-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| tbl-cap: "iris を使用した回帰分析"</span></span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(fixest)</span>
<span id="cb3-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(modelsummary)</span>
<span id="cb3-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tinytable)</span>
<span id="cb3-8"></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># リスト形式で保存すると複数の分析結果を1つの表に表示可能</span></span>
<span id="cb3-10">regression <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb3-11">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(1)"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> iris <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">feols</span>(Sepal.Length <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> Sepal.Width, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hetero"</span>), </span>
<span id="cb3-13">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(2)"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> iris <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">feols</span>(Sepal.Length <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> Sepal.Width <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> Petal.Length, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hetero"</span>), </span>
<span id="cb3-15">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(3)"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> iris <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">feols</span>(Sepal.Length <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> Sepal.Width <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> Petal.Length <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> Petal.Width, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hetero"</span>)</span>
<span id="cb3-17">)</span>
<span id="cb3-18"></span>
<span id="cb3-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ここで変数名の表記を変更</span></span>
<span id="cb3-20">cm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb3-21">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sepal.Width"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"がく片の幅（cm）"</span>, </span>
<span id="cb3-22">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Petal.Length"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"花弁の長さ（cm）"</span>, </span>
<span id="cb3-23">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Petal.Width"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"花弁の幅（cm）"</span>, </span>
<span id="cb3-24">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Species"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"アイリスの種類"</span></span>
<span id="cb3-25">)</span>
<span id="cb3-26"></span>
<span id="cb3-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 表に加える統計量を整理</span></span>
<span id="cb3-28">gm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb3-29">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"raw"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nobs"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"r.squared"</span>), </span>
<span id="cb3-30">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"clean"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Observations"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R\u00B2"</span>), </span>
<span id="cb3-31">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fmt"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb3-32">)</span>
<span id="cb3-33"></span>
<span id="cb3-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># フットノートを書く</span></span>
<span id="cb3-35">fn <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"注：標準誤差は括弧内に記載。+p &lt; 10%, *p &lt; 5%, **p &lt; 1%"</span></span>
<span id="cb3-36"></span>
<span id="cb3-37"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">msummary</span>(regression, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">estimate =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{estimate}{stars}"</span>, </span>
<span id="cb3-38">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">notes =</span> fn, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">coef_map =</span> cm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gof_map =</span> gm, </span>
<span id="cb3-39">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">stars =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"+"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">05</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"**"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">01</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb3-40">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_tt</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">j =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"がく片の長さ（cm）"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span></code></pre></div>
<div class="cell">
<div id="tbl-regression" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-regression-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表&nbsp;1: iris を使用した回帰分析
</figcaption>
<div aria-describedby="tbl-regression-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
 

  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tinytable_n7rgk1st5g9t2itiksmv</title>
    <style>
.table td.tinytable_css_1p045p394yaqfxkfcyv5, .table th.tinytable_css_1p045p394yaqfxkfcyv5 {    border-bottom: solid 0.1em #d3d8dc; }
.table td.tinytable_css_emvnomu83ev5mzyvsr5h, .table th.tinytable_css_emvnomu83ev5mzyvsr5h {    text-align: center; }
.table td.tinytable_css_ixswfz8r2wgzbvovei7m, .table th.tinytable_css_ixswfz8r2wgzbvovei7m {    border-bottom: solid 0.05em #d3d8dc; }
.table td.tinytable_css_3xdvb419f28lrfz5u8cc, .table th.tinytable_css_3xdvb419f28lrfz5u8cc {    text-align: left; }
.table td.tinytable_css_dcguoxe4ely8iqxzr1m2, .table th.tinytable_css_dcguoxe4ely8iqxzr1m2 {    text-align: center; }
.table td.tinytable_css_fkhkb4axjjxgg1z9811d, .table th.tinytable_css_fkhkb4axjjxgg1z9811d {    text-align: center; }
.table td.tinytable_css_w99rzkpwqgykoeg2lgx8, .table th.tinytable_css_w99rzkpwqgykoeg2lgx8 {    text-align: center; }
.table td.tinytable_css_a2171xft6cvhoj62jecp, .table th.tinytable_css_a2171xft6cvhoj62jecp {    border-bottom: solid 0.05em black; }
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
  

  
    <div class="container">
      <table class="table table-borderless" id="tinytable_n7rgk1st5g9t2itiksmv" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
<tr>
<th scope="col" align="center" colspan="1"> </th>
<th scope="col" align="center" colspan="3">がく片の長さ（cm）</th>
</tr>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
                <th scope="col">(2)</th>
                <th scope="col">(3)</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan="4">注：標準誤差は括弧内に記載。+p &lt; 10%, *p &lt; 5%, **p &lt; 1%</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>がく片の幅（cm）</td>
                  <td>-0.223 </td>
                  <td>0.596**</td>
                  <td>0.651** </td>
                </tr>
                <tr>
                  <td>                </td>
                  <td>(0.141)</td>
                  <td>(0.065)</td>
                  <td>(0.060) </td>
                </tr>
                <tr>
                  <td>花弁の長さ（cm）</td>
                  <td>       </td>
                  <td>0.472**</td>
                  <td>0.709** </td>
                </tr>
                <tr>
                  <td>                </td>
                  <td>       </td>
                  <td>(0.017)</td>
                  <td>(0.062) </td>
                </tr>
                <tr>
                  <td>花弁の幅（cm）  </td>
                  <td>       </td>
                  <td>       </td>
                  <td>-0.556**</td>
                </tr>
                <tr>
                  <td>                </td>
                  <td>       </td>
                  <td>       </td>
                  <td>(0.144) </td>
                </tr>
                <tr>
                  <td>観測数          </td>
                  <td>150    </td>
                  <td>150    </td>
                  <td>150     </td>
                </tr>
                <tr>
                  <td>R²              </td>
                  <td>0.01   </td>
                  <td>0.84   </td>
                  <td>0.86    </td>
                </tr>
        </tbody>
      </table>
    </div>

    <script>
      function styleCell_tinytable_dazx3j7v30znmq2h2yzc(i, j, css_id) {
        var table = document.getElementById("tinytable_n7rgk1st5g9t2itiksmv");
        table.rows[i].cells[j].classList.add(css_id);
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_n7rgk1st5g9t2itiksmv');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_tinytable_dazx3j7v30znmq2h2yzc(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_n7rgk1st5g9t2itiksmv");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }

window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(1, 0, 'tinytable_css_1p045p394yaqfxkfcyv5') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(1, 1, 'tinytable_css_1p045p394yaqfxkfcyv5') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(1, 2, 'tinytable_css_1p045p394yaqfxkfcyv5') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(1, 3, 'tinytable_css_1p045p394yaqfxkfcyv5') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(0, 0, 'tinytable_css_emvnomu83ev5mzyvsr5h') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(0, 1, 'tinytable_css_emvnomu83ev5mzyvsr5h') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(0, 2, 'tinytable_css_emvnomu83ev5mzyvsr5h') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(0, 3, 'tinytable_css_emvnomu83ev5mzyvsr5h') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(0, 1, 'tinytable_css_ixswfz8r2wgzbvovei7m') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(0, 0, 'tinytable_css_3xdvb419f28lrfz5u8cc') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(1, 0, 'tinytable_css_3xdvb419f28lrfz5u8cc') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(2, 0, 'tinytable_css_3xdvb419f28lrfz5u8cc') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(3, 0, 'tinytable_css_3xdvb419f28lrfz5u8cc') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(4, 0, 'tinytable_css_3xdvb419f28lrfz5u8cc') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(5, 0, 'tinytable_css_3xdvb419f28lrfz5u8cc') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(6, 0, 'tinytable_css_3xdvb419f28lrfz5u8cc') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(7, 0, 'tinytable_css_3xdvb419f28lrfz5u8cc') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(8, 0, 'tinytable_css_3xdvb419f28lrfz5u8cc') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(9, 0, 'tinytable_css_3xdvb419f28lrfz5u8cc') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(0, 1, 'tinytable_css_dcguoxe4ely8iqxzr1m2') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(1, 1, 'tinytable_css_dcguoxe4ely8iqxzr1m2') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(2, 1, 'tinytable_css_dcguoxe4ely8iqxzr1m2') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(3, 1, 'tinytable_css_dcguoxe4ely8iqxzr1m2') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(4, 1, 'tinytable_css_dcguoxe4ely8iqxzr1m2') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(5, 1, 'tinytable_css_dcguoxe4ely8iqxzr1m2') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(6, 1, 'tinytable_css_dcguoxe4ely8iqxzr1m2') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(7, 1, 'tinytable_css_dcguoxe4ely8iqxzr1m2') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(8, 1, 'tinytable_css_dcguoxe4ely8iqxzr1m2') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(9, 1, 'tinytable_css_dcguoxe4ely8iqxzr1m2') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(0, 2, 'tinytable_css_fkhkb4axjjxgg1z9811d') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(1, 2, 'tinytable_css_fkhkb4axjjxgg1z9811d') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(2, 2, 'tinytable_css_fkhkb4axjjxgg1z9811d') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(3, 2, 'tinytable_css_fkhkb4axjjxgg1z9811d') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(4, 2, 'tinytable_css_fkhkb4axjjxgg1z9811d') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(5, 2, 'tinytable_css_fkhkb4axjjxgg1z9811d') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(6, 2, 'tinytable_css_fkhkb4axjjxgg1z9811d') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(7, 2, 'tinytable_css_fkhkb4axjjxgg1z9811d') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(8, 2, 'tinytable_css_fkhkb4axjjxgg1z9811d') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(9, 2, 'tinytable_css_fkhkb4axjjxgg1z9811d') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(0, 3, 'tinytable_css_w99rzkpwqgykoeg2lgx8') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(1, 3, 'tinytable_css_w99rzkpwqgykoeg2lgx8') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(2, 3, 'tinytable_css_w99rzkpwqgykoeg2lgx8') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(3, 3, 'tinytable_css_w99rzkpwqgykoeg2lgx8') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(4, 3, 'tinytable_css_w99rzkpwqgykoeg2lgx8') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(5, 3, 'tinytable_css_w99rzkpwqgykoeg2lgx8') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(6, 3, 'tinytable_css_w99rzkpwqgykoeg2lgx8') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(7, 3, 'tinytable_css_w99rzkpwqgykoeg2lgx8') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(8, 3, 'tinytable_css_w99rzkpwqgykoeg2lgx8') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(9, 3, 'tinytable_css_w99rzkpwqgykoeg2lgx8') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(7, 0, 'tinytable_css_a2171xft6cvhoj62jecp') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(7, 1, 'tinytable_css_a2171xft6cvhoj62jecp') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(7, 2, 'tinytable_css_a2171xft6cvhoj62jecp') })
window.addEventListener('load', function () { styleCell_tinytable_dazx3j7v30znmq2h2yzc(7, 3, 'tinytable_css_a2171xft6cvhoj62jecp') })
    </script>

  


</div>
</div>
</figure>
</div>
</div>
<p>出力された PDF は<a href="demo/demo2.pdf">こちら</a>から確認してください。</p>
<p>また、このサイトのフォント的に <code>&lt;-</code> や <code>|&gt;</code> と表示されていますが、それぞれ <code>&lt;</code> と <code>-</code>、<code>|</code> と <code>&gt;</code> になります。ご了承ください。</p>
<p>ここからは、表作成におけるポイントを説明します。</p>
<p><strong>テーブルにおけるポイント</strong></p>
<ol type="1">
<li><p>チャンクオプション</p>
<ul>
<li><p><code>#|</code> で始まっている部分です。</p></li>
<li><p><code>label</code> は <code>tbl-</code> で始めることでテーブルにおけるラベルを付けられます。論文内で参照するときに必要です。<code>@tbl-regression</code> という書き方で論文内で参照できます。</p></li>
<li><p><code>tbl-cap</code> で表のキャプションを付けられます。</p></li>
</ul></li>
<li><p>ライブラリ</p>
<ul>
<li><p><code>tidyverse</code>：データハンドリングのために使用します。</p></li>
<li><p><code>fixest</code>：分析のために使用します。いろいろな分析用パッケージがありますが、とりあえずこれを使えば事足りることが多いと思います。あと速い。</p></li>
<li><p><code>modelsummary</code>：分析結果を表示するために使用します。様々な分析用パッケージに対応しています。</p></li>
<li><p><code>tinytable</code>：modelsummary で作成した表をより細かく設定するために使います。</p></li>
</ul></li>
<li><p>分析モデルを格納</p>
<ul>
<li>リスト形式で保存します。こうすることによって複数の分析結果を <code>modelsummary</code> で1つの表に起こせます。</li>
</ul></li>
<li><p><code>coef_map</code> と <code>gof_map</code> 用の <code>cm</code> &amp; <code>gm</code></p>
<ul>
<li><p><code>cm</code><sup>6</sup> は、分析で使用した変数名を書き換えて表に出すためのものです。<code>"Sepal.Width" = "がく片の幅（cm）"</code> は、 “Sepal.Width” という変数名を “がく片の幅（cm）” と表示することを意味します。</p></li>
<li><p><code>gm</code> は少し複雑です。コンソールで <code>gof_map</code> と打ってみると、raw, clean, fmt, omit の4列が出てきます。raw が表示する統計量、clean がそれらを表示するテキスト、fmt は小数点以下の桁数で、これらを <code>gm</code> で編集するということです<sup>7</sup>。</p></li>
<li><p>“R\u00B2” はユニコード文字で、2乗を <img src="https://latex.codecogs.com/png.latex?%5CTeX"> 上で表すために使用しています。</p></li>
<li><p><code>fn</code> はフットノートを書くためのものです。ここでは標準誤差の説明をしています。</p></li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240629_write_thesis/image/gof_map.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption><code>gof_map</code> を実行するとこのように出てきます。</figcaption>
</figure>
</div>
<ol start="5" type="1">
<li><p><code>msummary</code></p>
<ul>
<li><p>分析結果を表示するための関数です。<code>msummary</code> は <code>modelsummary</code> の関数です<sup>8</sup>。ここでは、<code>regression</code> に格納した分析結果を表示しています。</p></li>
<li><p><code>estimate</code> で “{estimate}{stars}” と指定しています。これは推定値とその有意性を表示するためのものです。入れたパターンと入れないパターンで試してもらいたいのですが、有意性について別に脚注が入ってしまい、上で書いた脚注と合わせて2行になってしまうので、わざわざこの設定をしています。下の表を確認してください。</p></li>
<li><p><code>notes</code> , <code>coef_map</code> , <code>gof_map</code> は上で設定したものを反映させています。</p></li>
<li><p><code>stars</code> は有意性の表示を設定しています。ここでは、+p &lt; 10%, *p &lt; 5%, **p &lt; 1% としています。</p></li>
<li><p><code>group_tt</code> は表のグルーピングを行うためのものです。ここでは、被説明変数が全て “がく片の長さ（cm）” なので、それをグルーピングしています。1列目は変数名にあたるので、2:4 としています。</p></li>
<li><p><code>group_tt</code> の引数 <code>j</code> は列のグルーピングで、<code>i</code> 引数は行のグルーピングに対応しています。</p></li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240629_write_thesis/image/table_without_estimate_option.png" class="img-fluid figure-img"></p>
<figcaption><code>estimate</code> を指定しないとこのように脚注が2行になります。</figcaption>
</figure>
</div>
<p>以上がテーブル作成のポイントです。</p>
</section>
<section id="本文の書き方フィギュア編" class="level1">
<h1>本文の書き方（フィギュア編）</h1>
<p>次に、フィギュアの出力について説明します。</p>
<p>ここでも <code>iris</code> データセットを使用してプロットしてみます。</p>
<p>次のコードを実行すると、図&nbsp;1 のような図が作成されます。</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb4-2"></span>
<span id="cb4-3">p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> iris <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> Sepal.Length, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> Petal.Length)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb4-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"がく片の長さ（cm）"</span>, </span>
<span id="cb4-7">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"花弁の長さ（cm）"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb4-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span>
<span id="cb4-9"></span>
<span id="cb4-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsave</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"iris_plot.pdf"</span>, p, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">device =</span> cairo_pdf)</span></code></pre></div>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><span class="al" style="color: #AD0000;
background-color: null;
font-style: inherit;">![iris を使用したプロット](iris_plot.pdf)</span>{#fig-iris}</span></code></pre></div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-iris" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-iris-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="https://yo5uke.github.io/tips/240629_write_thesis/index_files/figure-html/fig-iris-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-iris-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
図&nbsp;1: iris を使用したプロット
</figcaption>
</figure>
</div>
</div>
</div>
<p>出力された PDF は<a href="demo/demo3.pdf">こちら</a>から確認してください。</p>
<p>ここでもポイントを説明します。</p>
<p><strong>フィギュアにおけるポイント</strong></p>
<ol type="1">
<li><p>パイプを使用してプロット</p>
<ul>
<li>データセットをパイプ（<code>|&gt;</code>）で <code>ggplot</code> に渡しています。これによって、変数が予測変換で出てくるので、作業がしやすくなります<sup>9</sup>。</li>
</ul></li>
<li><p><code>ggplot</code></p>
<ul>
<li><p><code>ggplot</code> 内の <code>aes</code> で x 軸と y 軸を指定しています。</p></li>
<li><p><code>ggplot</code> は <code>+</code> で繋げていくことでプロットを作成していきます。</p></li>
<li><p>今回は散布図を作成したいので、<code>geom_point()</code> を繋げています。他にも折れ線の場合は <code>geom_line()</code> などを使います。</p></li>
</ul></li>
<li><p><code>labs</code></p>
<ul>
<li><code>labs</code> で x 軸と y 軸のラベルを設定しています。</li>
</ul></li>
<li><p><code>theme_minimal</code></p>
<ul>
<li><code>theme_minimal</code> は背景が白で、軸の線が薄いテーマです。他にも <code>theme_bw</code>, <code>theme_classic</code> などがあります。</li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
テーマについて
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><code>theme_minimal</code> でテーマを大方設定できますが、それに加えて細かい設定をしたいこともあると思います。その場合は、 <code>+</code> で <code>theme</code> を繋げていくことで設定できます。ここでは <code>theme</code> の詳細については説明しませんが、繋げる際は、<code>theme_minimal() + theme()</code> という順番で繋げていくことをおすすめします。</p>
<p>順番は逆でも構いませんが、<code>theme()</code> で設定したものが <code>theme_minimal()</code> で上書きされることがあるので、想定していたものと違う結果になることがあります。</p>
</div>
</div>
</div>
<ol start="5" type="1">
<li><p><code>ggsave</code></p>
<ul>
<li><p><code>ggsave</code> でプロットを保存しています。ここでは <code>iris_plot.pdf</code> という名前で保存しています。“iris_plot.pdf” の部分は任意の名前で構いません。また、パスを指定して保存することももちろんできます。<code>here</code> を使っている場合は、<code>here("output/iris_plot.pdf")</code> などとして保存することができます<sup>10</sup>。</p></li>
<li><p><code>device</code> を <code>cairo_pdf</code> にしています。<code>.png</code> など他の形式でも出力できますが、環境によっては文字化けなどに大変苦しめられるので<sup>11</sup>、<code>cairo_pdf</code> がおすすめです。僕の環境では一番安定しました。</p></li>
<li><p>ちなみに、画像の解像度が上がるので、とりあえず一度保存するのがいいと思います。</p></li>
</ul></li>
<li><p>マークダウン表記で図を出力</p>
<ul>
<li><code>![iris を使用したプロット](iris_plot.pdf){#fig-iris}</code> で図を出力しています。<code>iris_plot.pdf</code> の部分は保存したファイル名になります。<code>{#fig-iris}</code> はラベルを付けるためのものです。論文内で参照するときに必要です。<code>@fig-iris</code> という書き方で論文内で参照できます。</li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
パスの指定
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>例えば画像を <code>output</code> というフォルダに保存しており、書いているコードは <code>code</code> フォルダにあるとします。すなわち以下のような形です。</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1">main_directory/</span>
<span id="cb6-2">├── output/</span>
<span id="cb6-3">│   └── iris_plot.pdf</span>
<span id="cb6-4">└── code/</span>
<span id="cb6-5">    └── code.qmd</span></code></pre></div>
<p>この場合、<code>![iris を使用したプロット](iris_plot.pdf){#fig-iris}</code> としても図が表示されません。その場合は、コードファイルからの相対パスを使用しなければなりません。すなわち <code>![iris を使用したプロット](../output/iris_plot.pdf){#fig-iris}</code> としてください。<code>../</code> は一つ上の階層を示しています。</p>
</div>
</div>
</div>
<p>もちろん、既に所有している画像もマークダウン記法で出力することができます。その場合は、<code>![画像の説明](画像のパス){#fig-label}</code> のように記述します。キャプションは抜かせるので、<code>![](画像のパス){#fig-label}</code> としても構いません。</p>
<p>以上がフィギュア作成のポイントです。</p>
</section>
<section id="まとめ" class="level1">
<h1>まとめ</h1>
<p>Quarto を使って論文を書く方法について説明しました。</p>
<p>長くなってしまいましたが、現在 M2 の私自身も Quarto を使用して修士論文を書こうと思っているので、その際に必要な情報をまとめてみました。</p>
<p>ぜひ参考にしてみてください。</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>直接 LaTeX コードを埋め込むこともできます。↩︎</p></li>
<li id="fn2"><p>僕は使い方が分かりません。↩︎</p></li>
<li id="fn3"><p>僕は基本的に <code>code</code> フォルダを作ってそこに保存しています。↩︎</p></li>
<li id="fn4"><p>本当は <code>lang: ja</code> を設定するだけで万事解決のはずなのですが、パッケージのインストールでトラブるので、このような場当たり的な対処になっています。↩︎</p></li>
<li id="fn5"><p>結果も隠したいときは、代わりに <code>include: false</code> を指定します。チャンクオプションについては<a href="../240509_chunk_option/index.html">こちら</a>↩︎</p></li>
<li id="fn6"><p><code>gm</code> もそうですが、名前は何でもよいです。↩︎</p></li>
<li id="fn7"><p>“nobs”, “r.squared” の2つの項目を表示し、その表記を “観測数”, “<img src="https://latex.codecogs.com/png.latex?R%5E2">” とし、小数点以下は観測数がなし、<img src="https://latex.codecogs.com/png.latex?R%5E2"> は第2位までにしています。↩︎</p></li>
<li id="fn8"><p><code>msummary</code> でも <code>modelsummary</code> でも使用できます。↩︎</p></li>
<li id="fn9"><p><code>ggplot(iris, aes(~))</code> の形でも図は作れますが、変数名は予測変換で出てきません。↩︎</p></li>
<li id="fn10"><p><code>here</code> については<a href="../240515_rproj/index.html">こちら</a>↩︎</p></li>
<li id="fn11"><p>僕の場合は Linux で苦労しました。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Quarto</category>
  <category>R</category>
  <category>LaTeX</category>
  <guid>https://yo5uke.github.io/tips/240629_write_thesis/</guid>
  <pubDate>Fri, 28 Jun 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240629_write_thesis/image/create_document.png" medium="image" type="image/png" height="76" width="144"/>
</item>
<item>
  <title>国勢調査データのクレンジング</title>
  <link>https://yo5uke.github.io/tips/240622_census_cleansing/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>国勢調査のデータを使う際、そのままでは R 等で使えない場合が多いので、分析用にデータをクレンジングするコードをご紹介します。</p>
<p>応用が利くと思うので、ぜひ。</p>
</section>
<section id="使用するデータ" class="level1">
<h1>使用するデータ</h1>
<ul>
<li><p>2020年国勢調査</p>
<ul>
<li><p>4次メッシュ（500m四方メッシュ）データ</p></li>
<li><p>人口及び世帯（JGD2011）</p></li>
<li><p>データ：<a href="https://drive.google.com/drive/folders/1uAzsuXBnzCNeYrOTvnNDbdyduJkC4laW?usp=drive_link">Google ドライブ</a></p></li>
<li><p>出典：<a href="https://www.e-stat.go.jp/gis/statmap-search?page=1&amp;type=1&amp;toukeiCode=00200521&amp;toukeiYear=2020&amp;aggregateUnit=H&amp;serveyId=H002005112020&amp;statsId=T001141&amp;datum=2011">e-Stat</a></p></li>
</ul></li>
</ul>
</section>
<section id="データの読み込み" class="level1">
<h1>データの読み込み</h1>
<p>データを読み込みます。ダウンロードした時点では大量のテキストファイルがある状態なので、それを一括で読み込んで処理していきます。</p>
<section id="パッケージ" class="level2">
<h2 class="anchored" data-anchor-id="パッケージ">パッケージ</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># データハンドリングのため</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(here)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 相対パスを使うため</span></span></code></pre></div>
</div>
</section>
<section id="読み込み" class="level2">
<h2 class="anchored" data-anchor-id="読み込み">読み込み</h2>
<p><strong>前提</strong>：</p>
<ul>
<li><p>ワーキングディレクトリを指定してあること<sup>1</sup>。</p></li>
<li><p>ワーキングディレクトリ内の <code>data/census_2020</code> にテキストファイルが入っていること。</p></li>
</ul>
<section id="確認" class="level3">
<h3 class="anchored" data-anchor-id="確認">確認</h3>
<p>まずはじめに、ファイルの中身がどのようになっているのか、一つのファイルを読み込んで確かめてみます。</p>
<p>ちなみにファイルは Shift_JIS なので、ロケールも設定します。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/census_2020/tblT001141H3622.txt"</span>), </span>
<span id="cb2-2">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">locale =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">locale</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">encoding =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Shift_JIS"</span>))</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(test)</span></code></pre></div>
</div>
<div class="cell">
<div id="tbl-file-check" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-file-check-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表&nbsp;1: 生データ
</figcaption>
<div aria-describedby="tbl-file-check-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="qyqkchqgpp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qyqkchqgpp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qyqkchqgpp thead, #qyqkchqgpp tbody, #qyqkchqgpp tfoot, #qyqkchqgpp tr, #qyqkchqgpp td, #qyqkchqgpp th {
  border-style: none;
}

#qyqkchqgpp p {
  margin: 0;
  padding: 0;
}

#qyqkchqgpp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qyqkchqgpp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qyqkchqgpp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qyqkchqgpp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qyqkchqgpp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qyqkchqgpp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qyqkchqgpp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qyqkchqgpp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qyqkchqgpp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qyqkchqgpp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qyqkchqgpp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qyqkchqgpp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qyqkchqgpp .gt_spanner_row {
  border-bottom-style: hidden;
}

#qyqkchqgpp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qyqkchqgpp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qyqkchqgpp .gt_from_md > :first-child {
  margin-top: 0;
}

#qyqkchqgpp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qyqkchqgpp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qyqkchqgpp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qyqkchqgpp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qyqkchqgpp .gt_row_group_first td {
  border-top-width: 2px;
}

#qyqkchqgpp .gt_row_group_first th {
  border-top-width: 2px;
}

#qyqkchqgpp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qyqkchqgpp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qyqkchqgpp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qyqkchqgpp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qyqkchqgpp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qyqkchqgpp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qyqkchqgpp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qyqkchqgpp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qyqkchqgpp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qyqkchqgpp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qyqkchqgpp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qyqkchqgpp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qyqkchqgpp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qyqkchqgpp .gt_left {
  text-align: left;
}

#qyqkchqgpp .gt_center {
  text-align: center;
}

#qyqkchqgpp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qyqkchqgpp .gt_font_normal {
  font-weight: normal;
}

#qyqkchqgpp .gt_font_bold {
  font-weight: bold;
}

#qyqkchqgpp .gt_font_italic {
  font-style: italic;
}

#qyqkchqgpp .gt_super {
  font-size: 65%;
}

#qyqkchqgpp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qyqkchqgpp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qyqkchqgpp .gt_indent_1 {
  text-indent: 5px;
}

#qyqkchqgpp .gt_indent_2 {
  text-indent: 10px;
}

#qyqkchqgpp .gt_indent_3 {
  text-indent: 15px;
}

#qyqkchqgpp .gt_indent_4 {
  text-indent: 20px;
}

#qyqkchqgpp .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="KEY_CODE" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">KEY_CODE</th>
<th id="HTKSYORI" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">HTKSYORI</th>
<th id="HTKSAKI" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">HTKSAKI</th>
<th id="GASSAN" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">GASSAN</th>
<th id="T001141001" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141001</th>
<th id="T001141002" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141002</th>
<th id="T001141003" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141003</th>
<th id="T001141004" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141004</th>
<th id="T001141005" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141005</th>
<th id="T001141006" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141006</th>
<th id="T001141007" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141007</th>
<th id="T001141008" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141008</th>
<th id="T001141009" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141009</th>
<th id="T001141010" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141010</th>
<th id="T001141011" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141011</th>
<th id="T001141012" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141012</th>
<th id="T001141013" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141013</th>
<th id="T001141014" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141014</th>
<th id="T001141015" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141015</th>
<th id="T001141016" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141016</th>
<th id="T001141017" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141017</th>
<th id="T001141018" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141018</th>
<th id="T001141019" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141019</th>
<th id="T001141020" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141020</th>
<th id="T001141021" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141021</th>
<th id="T001141022" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141022</th>
<th id="T001141023" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141023</th>
<th id="T001141024" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141024</th>
<th id="T001141025" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141025</th>
<th id="T001141026" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141026</th>
<th id="T001141027" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141027</th>
<th id="T001141028" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141028</th>
<th id="T001141029" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141029</th>
<th id="T001141030" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141030</th>
<th id="T001141031" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141031</th>
<th id="T001141032" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141032</th>
<th id="T001141033" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141033</th>
<th id="T001141034" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141034</th>
<th id="T001141035" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141035</th>
<th id="T001141036" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141036</th>
<th id="T001141037" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141037</th>
<th id="T001141038" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141038</th>
<th id="T001141039" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141039</th>
<th id="T001141040" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141040</th>
<th id="T001141041" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141041</th>
<th id="T001141042" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141042</th>
<th id="T001141043" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141043</th>
<th id="T001141044" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141044</th>
<th id="T001141045" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141045</th>
<th id="T001141046" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141046</th>
<th id="T001141047" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141047</th>
<th id="T001141048" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141048</th>
<th id="T001141049" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141049</th>
<th id="T001141050" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">T001141050</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="KEY_CODE">NA</td>
<td class="gt_row gt_right" headers="HTKSYORI">NA</td>
<td class="gt_row gt_right" headers="HTKSAKI">NA</td>
<td class="gt_row gt_right" headers="GASSAN">NA</td>
<td class="gt_row gt_left" headers="T001141001">　人口（総数）</td>
<td class="gt_row gt_left" headers="T001141002">　人口（総数）　男</td>
<td class="gt_row gt_left" headers="T001141003">　人口（総数）　女</td>
<td class="gt_row gt_left" headers="T001141004">　０〜１４歳人口　総数</td>
<td class="gt_row gt_left" headers="T001141005">　０〜１４歳人口　男</td>
<td class="gt_row gt_left" headers="T001141006">　０〜１４歳人口　女</td>
<td class="gt_row gt_left" headers="T001141007">　１５歳以上人口　総数</td>
<td class="gt_row gt_left" headers="T001141008">　１５歳以上人口　男</td>
<td class="gt_row gt_left" headers="T001141009">　１５歳以上人口　女</td>
<td class="gt_row gt_left" headers="T001141010">　１５〜６４歳人口　総数</td>
<td class="gt_row gt_left" headers="T001141011">　１５〜６４歳人口　男</td>
<td class="gt_row gt_left" headers="T001141012">　１５〜６４歳人口　女</td>
<td class="gt_row gt_left" headers="T001141013">　１８歳以上人口　総数</td>
<td class="gt_row gt_left" headers="T001141014">　１８歳以上人口　男</td>
<td class="gt_row gt_left" headers="T001141015">　１８歳以上人口　女</td>
<td class="gt_row gt_left" headers="T001141016">　２０歳以上人口　総数</td>
<td class="gt_row gt_left" headers="T001141017">　２０歳以上人口　男</td>
<td class="gt_row gt_left" headers="T001141018">　２０歳以上人口　女</td>
<td class="gt_row gt_left" headers="T001141019">　６５歳以上人口　総数</td>
<td class="gt_row gt_left" headers="T001141020">　６５歳以上人口　男</td>
<td class="gt_row gt_left" headers="T001141021">　６５歳以上人口　女</td>
<td class="gt_row gt_left" headers="T001141022">　７５歳以上人口　総数</td>
<td class="gt_row gt_left" headers="T001141023">　７５歳以上人口　男</td>
<td class="gt_row gt_left" headers="T001141024">　７５歳以上人口　女</td>
<td class="gt_row gt_left" headers="T001141025">　８５歳以上人口　総数</td>
<td class="gt_row gt_left" headers="T001141026">　８５歳以上人口　男</td>
<td class="gt_row gt_left" headers="T001141027">　８５歳以上人口　女</td>
<td class="gt_row gt_left" headers="T001141028">　９５歳以上人口　総数</td>
<td class="gt_row gt_left" headers="T001141029">　９５歳以上人口　男</td>
<td class="gt_row gt_left" headers="T001141030">　９５歳以上人口　女</td>
<td class="gt_row gt_left" headers="T001141031">　外国人人口　総数</td>
<td class="gt_row gt_left" headers="T001141032">　外国人人口　男</td>
<td class="gt_row gt_left" headers="T001141033">　外国人人口　女</td>
<td class="gt_row gt_left" headers="T001141034">　世帯総数</td>
<td class="gt_row gt_left" headers="T001141035">　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141036">　１人世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141037">　２人世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141038">　３人世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141039">　４人世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141040">　５人世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141041">　６人世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141042">　７人以上世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141043">　親族のみの世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141044">　核家族世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141045">　核家族以外の世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141046">　６歳未満世帯員のいる世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141047">　６５歳以上世帯員のいる世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141048">　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141049">　高齢単身世帯数　一般世帯数</td>
<td class="gt_row gt_left" headers="T001141050">　高齢夫婦世帯数　一般世帯数</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="KEY_CODE">362257353</td>
<td class="gt_row gt_right" headers="HTKSYORI">0</td>
<td class="gt_row gt_right" headers="HTKSAKI">NA</td>
<td class="gt_row gt_right" headers="GASSAN">NA</td>
<td class="gt_row gt_left" headers="T001141001">29</td>
<td class="gt_row gt_left" headers="T001141002">15</td>
<td class="gt_row gt_left" headers="T001141003">14</td>
<td class="gt_row gt_left" headers="T001141004">5</td>
<td class="gt_row gt_left" headers="T001141005">2</td>
<td class="gt_row gt_left" headers="T001141006">3</td>
<td class="gt_row gt_left" headers="T001141007">24</td>
<td class="gt_row gt_left" headers="T001141008">13</td>
<td class="gt_row gt_left" headers="T001141009">11</td>
<td class="gt_row gt_left" headers="T001141010">19</td>
<td class="gt_row gt_left" headers="T001141011">11</td>
<td class="gt_row gt_left" headers="T001141012">8</td>
<td class="gt_row gt_left" headers="T001141013">23</td>
<td class="gt_row gt_left" headers="T001141014">12</td>
<td class="gt_row gt_left" headers="T001141015">11</td>
<td class="gt_row gt_left" headers="T001141016">23</td>
<td class="gt_row gt_left" headers="T001141017">12</td>
<td class="gt_row gt_left" headers="T001141018">11</td>
<td class="gt_row gt_left" headers="T001141019">5</td>
<td class="gt_row gt_left" headers="T001141020">2</td>
<td class="gt_row gt_left" headers="T001141021">3</td>
<td class="gt_row gt_left" headers="T001141022">1</td>
<td class="gt_row gt_left" headers="T001141023">1</td>
<td class="gt_row gt_left" headers="T001141024">0</td>
<td class="gt_row gt_left" headers="T001141025">0</td>
<td class="gt_row gt_left" headers="T001141026">0</td>
<td class="gt_row gt_left" headers="T001141027">0</td>
<td class="gt_row gt_left" headers="T001141028">0</td>
<td class="gt_row gt_left" headers="T001141029">0</td>
<td class="gt_row gt_left" headers="T001141030">0</td>
<td class="gt_row gt_left" headers="T001141031">0</td>
<td class="gt_row gt_left" headers="T001141032">0</td>
<td class="gt_row gt_left" headers="T001141033">0</td>
<td class="gt_row gt_left" headers="T001141034">16</td>
<td class="gt_row gt_left" headers="T001141035">16</td>
<td class="gt_row gt_left" headers="T001141036">10</td>
<td class="gt_row gt_left" headers="T001141037">1</td>
<td class="gt_row gt_left" headers="T001141038">4</td>
<td class="gt_row gt_left" headers="T001141039">0</td>
<td class="gt_row gt_left" headers="T001141040">1</td>
<td class="gt_row gt_left" headers="T001141041">0</td>
<td class="gt_row gt_left" headers="T001141042">0</td>
<td class="gt_row gt_left" headers="T001141043">6</td>
<td class="gt_row gt_left" headers="T001141044">4</td>
<td class="gt_row gt_left" headers="T001141045">2</td>
<td class="gt_row gt_left" headers="T001141046">1</td>
<td class="gt_row gt_left" headers="T001141047">4</td>
<td class="gt_row gt_left" headers="T001141048">1</td>
<td class="gt_row gt_left" headers="T001141049">1</td>
<td class="gt_row gt_left" headers="T001141050">0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="KEY_CODE">362257354</td>
<td class="gt_row gt_right" headers="HTKSYORI">0</td>
<td class="gt_row gt_right" headers="HTKSAKI">NA</td>
<td class="gt_row gt_right" headers="GASSAN">NA</td>
<td class="gt_row gt_left" headers="T001141001">96</td>
<td class="gt_row gt_left" headers="T001141002">91</td>
<td class="gt_row gt_left" headers="T001141003">5</td>
<td class="gt_row gt_left" headers="T001141004">0</td>
<td class="gt_row gt_left" headers="T001141005">0</td>
<td class="gt_row gt_left" headers="T001141006">0</td>
<td class="gt_row gt_left" headers="T001141007">96</td>
<td class="gt_row gt_left" headers="T001141008">91</td>
<td class="gt_row gt_left" headers="T001141009">5</td>
<td class="gt_row gt_left" headers="T001141010">96</td>
<td class="gt_row gt_left" headers="T001141011">91</td>
<td class="gt_row gt_left" headers="T001141012">5</td>
<td class="gt_row gt_left" headers="T001141013">96</td>
<td class="gt_row gt_left" headers="T001141014">91</td>
<td class="gt_row gt_left" headers="T001141015">5</td>
<td class="gt_row gt_left" headers="T001141016">96</td>
<td class="gt_row gt_left" headers="T001141017">91</td>
<td class="gt_row gt_left" headers="T001141018">5</td>
<td class="gt_row gt_left" headers="T001141019">0</td>
<td class="gt_row gt_left" headers="T001141020">0</td>
<td class="gt_row gt_left" headers="T001141021">0</td>
<td class="gt_row gt_left" headers="T001141022">0</td>
<td class="gt_row gt_left" headers="T001141023">0</td>
<td class="gt_row gt_left" headers="T001141024">0</td>
<td class="gt_row gt_left" headers="T001141025">0</td>
<td class="gt_row gt_left" headers="T001141026">0</td>
<td class="gt_row gt_left" headers="T001141027">0</td>
<td class="gt_row gt_left" headers="T001141028">0</td>
<td class="gt_row gt_left" headers="T001141029">0</td>
<td class="gt_row gt_left" headers="T001141030">0</td>
<td class="gt_row gt_left" headers="T001141031">0</td>
<td class="gt_row gt_left" headers="T001141032">0</td>
<td class="gt_row gt_left" headers="T001141033">0</td>
<td class="gt_row gt_left" headers="T001141034">11</td>
<td class="gt_row gt_left" headers="T001141035">0</td>
<td class="gt_row gt_left" headers="T001141036">0</td>
<td class="gt_row gt_left" headers="T001141037">0</td>
<td class="gt_row gt_left" headers="T001141038">0</td>
<td class="gt_row gt_left" headers="T001141039">0</td>
<td class="gt_row gt_left" headers="T001141040">0</td>
<td class="gt_row gt_left" headers="T001141041">0</td>
<td class="gt_row gt_left" headers="T001141042">0</td>
<td class="gt_row gt_left" headers="T001141043">0</td>
<td class="gt_row gt_left" headers="T001141044">0</td>
<td class="gt_row gt_left" headers="T001141045">0</td>
<td class="gt_row gt_left" headers="T001141046">0</td>
<td class="gt_row gt_left" headers="T001141047">0</td>
<td class="gt_row gt_left" headers="T001141048">0</td>
<td class="gt_row gt_left" headers="T001141049">0</td>
<td class="gt_row gt_left" headers="T001141050">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="KEY_CODE">362257381</td>
<td class="gt_row gt_right" headers="HTKSYORI">0</td>
<td class="gt_row gt_right" headers="HTKSAKI">NA</td>
<td class="gt_row gt_right" headers="GASSAN">NA</td>
<td class="gt_row gt_left" headers="T001141001">101</td>
<td class="gt_row gt_left" headers="T001141002">46</td>
<td class="gt_row gt_left" headers="T001141003">55</td>
<td class="gt_row gt_left" headers="T001141004">24</td>
<td class="gt_row gt_left" headers="T001141005">9</td>
<td class="gt_row gt_left" headers="T001141006">15</td>
<td class="gt_row gt_left" headers="T001141007">77</td>
<td class="gt_row gt_left" headers="T001141008">37</td>
<td class="gt_row gt_left" headers="T001141009">40</td>
<td class="gt_row gt_left" headers="T001141010">54</td>
<td class="gt_row gt_left" headers="T001141011">27</td>
<td class="gt_row gt_left" headers="T001141012">27</td>
<td class="gt_row gt_left" headers="T001141013">76</td>
<td class="gt_row gt_left" headers="T001141014">36</td>
<td class="gt_row gt_left" headers="T001141015">40</td>
<td class="gt_row gt_left" headers="T001141016">76</td>
<td class="gt_row gt_left" headers="T001141017">36</td>
<td class="gt_row gt_left" headers="T001141018">40</td>
<td class="gt_row gt_left" headers="T001141019">23</td>
<td class="gt_row gt_left" headers="T001141020">10</td>
<td class="gt_row gt_left" headers="T001141021">13</td>
<td class="gt_row gt_left" headers="T001141022">5</td>
<td class="gt_row gt_left" headers="T001141023">1</td>
<td class="gt_row gt_left" headers="T001141024">4</td>
<td class="gt_row gt_left" headers="T001141025">4</td>
<td class="gt_row gt_left" headers="T001141026">1</td>
<td class="gt_row gt_left" headers="T001141027">3</td>
<td class="gt_row gt_left" headers="T001141028">1</td>
<td class="gt_row gt_left" headers="T001141029">0</td>
<td class="gt_row gt_left" headers="T001141030">1</td>
<td class="gt_row gt_left" headers="T001141031">0</td>
<td class="gt_row gt_left" headers="T001141032">0</td>
<td class="gt_row gt_left" headers="T001141033">0</td>
<td class="gt_row gt_left" headers="T001141034">39</td>
<td class="gt_row gt_left" headers="T001141035">39</td>
<td class="gt_row gt_left" headers="T001141036">11</td>
<td class="gt_row gt_left" headers="T001141037">8</td>
<td class="gt_row gt_left" headers="T001141038">8</td>
<td class="gt_row gt_left" headers="T001141039">10</td>
<td class="gt_row gt_left" headers="T001141040">2</td>
<td class="gt_row gt_left" headers="T001141041">0</td>
<td class="gt_row gt_left" headers="T001141042">0</td>
<td class="gt_row gt_left" headers="T001141043">28</td>
<td class="gt_row gt_left" headers="T001141044">24</td>
<td class="gt_row gt_left" headers="T001141045">4</td>
<td class="gt_row gt_left" headers="T001141046">8</td>
<td class="gt_row gt_left" headers="T001141047">16</td>
<td class="gt_row gt_left" headers="T001141048">1</td>
<td class="gt_row gt_left" headers="T001141049">4</td>
<td class="gt_row gt_left" headers="T001141050">3</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="KEY_CODE">362257382</td>
<td class="gt_row gt_right" headers="HTKSYORI">0</td>
<td class="gt_row gt_right" headers="HTKSAKI">NA</td>
<td class="gt_row gt_right" headers="GASSAN">NA</td>
<td class="gt_row gt_left" headers="T001141001">28</td>
<td class="gt_row gt_left" headers="T001141002">16</td>
<td class="gt_row gt_left" headers="T001141003">12</td>
<td class="gt_row gt_left" headers="T001141004">1</td>
<td class="gt_row gt_left" headers="T001141005">0</td>
<td class="gt_row gt_left" headers="T001141006">1</td>
<td class="gt_row gt_left" headers="T001141007">27</td>
<td class="gt_row gt_left" headers="T001141008">16</td>
<td class="gt_row gt_left" headers="T001141009">11</td>
<td class="gt_row gt_left" headers="T001141010">19</td>
<td class="gt_row gt_left" headers="T001141011">13</td>
<td class="gt_row gt_left" headers="T001141012">6</td>
<td class="gt_row gt_left" headers="T001141013">27</td>
<td class="gt_row gt_left" headers="T001141014">16</td>
<td class="gt_row gt_left" headers="T001141015">11</td>
<td class="gt_row gt_left" headers="T001141016">27</td>
<td class="gt_row gt_left" headers="T001141017">16</td>
<td class="gt_row gt_left" headers="T001141018">11</td>
<td class="gt_row gt_left" headers="T001141019">8</td>
<td class="gt_row gt_left" headers="T001141020">3</td>
<td class="gt_row gt_left" headers="T001141021">5</td>
<td class="gt_row gt_left" headers="T001141022">6</td>
<td class="gt_row gt_left" headers="T001141023">3</td>
<td class="gt_row gt_left" headers="T001141024">3</td>
<td class="gt_row gt_left" headers="T001141025">0</td>
<td class="gt_row gt_left" headers="T001141026">0</td>
<td class="gt_row gt_left" headers="T001141027">0</td>
<td class="gt_row gt_left" headers="T001141028">0</td>
<td class="gt_row gt_left" headers="T001141029">0</td>
<td class="gt_row gt_left" headers="T001141030">0</td>
<td class="gt_row gt_left" headers="T001141031">2</td>
<td class="gt_row gt_left" headers="T001141032">1</td>
<td class="gt_row gt_left" headers="T001141033">1</td>
<td class="gt_row gt_left" headers="T001141034">18</td>
<td class="gt_row gt_left" headers="T001141035">18</td>
<td class="gt_row gt_left" headers="T001141036">11</td>
<td class="gt_row gt_left" headers="T001141037">4</td>
<td class="gt_row gt_left" headers="T001141038">3</td>
<td class="gt_row gt_left" headers="T001141039">0</td>
<td class="gt_row gt_left" headers="T001141040">0</td>
<td class="gt_row gt_left" headers="T001141041">0</td>
<td class="gt_row gt_left" headers="T001141042">0</td>
<td class="gt_row gt_left" headers="T001141043">7</td>
<td class="gt_row gt_left" headers="T001141044">6</td>
<td class="gt_row gt_left" headers="T001141045">1</td>
<td class="gt_row gt_left" headers="T001141046">0</td>
<td class="gt_row gt_left" headers="T001141047">5</td>
<td class="gt_row gt_left" headers="T001141048">1</td>
<td class="gt_row gt_left" headers="T001141049">1</td>
<td class="gt_row gt_left" headers="T001141050">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="KEY_CODE">362257451</td>
<td class="gt_row gt_right" headers="HTKSYORI">0</td>
<td class="gt_row gt_right" headers="HTKSAKI">NA</td>
<td class="gt_row gt_right" headers="GASSAN">NA</td>
<td class="gt_row gt_left" headers="T001141001">117</td>
<td class="gt_row gt_left" headers="T001141002">59</td>
<td class="gt_row gt_left" headers="T001141003">58</td>
<td class="gt_row gt_left" headers="T001141004">20</td>
<td class="gt_row gt_left" headers="T001141005">13</td>
<td class="gt_row gt_left" headers="T001141006">7</td>
<td class="gt_row gt_left" headers="T001141007">97</td>
<td class="gt_row gt_left" headers="T001141008">46</td>
<td class="gt_row gt_left" headers="T001141009">51</td>
<td class="gt_row gt_left" headers="T001141010">70</td>
<td class="gt_row gt_left" headers="T001141011">34</td>
<td class="gt_row gt_left" headers="T001141012">36</td>
<td class="gt_row gt_left" headers="T001141013">96</td>
<td class="gt_row gt_left" headers="T001141014">46</td>
<td class="gt_row gt_left" headers="T001141015">50</td>
<td class="gt_row gt_left" headers="T001141016">96</td>
<td class="gt_row gt_left" headers="T001141017">46</td>
<td class="gt_row gt_left" headers="T001141018">50</td>
<td class="gt_row gt_left" headers="T001141019">27</td>
<td class="gt_row gt_left" headers="T001141020">12</td>
<td class="gt_row gt_left" headers="T001141021">15</td>
<td class="gt_row gt_left" headers="T001141022">14</td>
<td class="gt_row gt_left" headers="T001141023">4</td>
<td class="gt_row gt_left" headers="T001141024">10</td>
<td class="gt_row gt_left" headers="T001141025">5</td>
<td class="gt_row gt_left" headers="T001141026">0</td>
<td class="gt_row gt_left" headers="T001141027">5</td>
<td class="gt_row gt_left" headers="T001141028">0</td>
<td class="gt_row gt_left" headers="T001141029">0</td>
<td class="gt_row gt_left" headers="T001141030">0</td>
<td class="gt_row gt_left" headers="T001141031">0</td>
<td class="gt_row gt_left" headers="T001141032">0</td>
<td class="gt_row gt_left" headers="T001141033">0</td>
<td class="gt_row gt_left" headers="T001141034">58</td>
<td class="gt_row gt_left" headers="T001141035">58</td>
<td class="gt_row gt_left" headers="T001141036">25</td>
<td class="gt_row gt_left" headers="T001141037">18</td>
<td class="gt_row gt_left" headers="T001141038">10</td>
<td class="gt_row gt_left" headers="T001141039">1</td>
<td class="gt_row gt_left" headers="T001141040">2</td>
<td class="gt_row gt_left" headers="T001141041">2</td>
<td class="gt_row gt_left" headers="T001141042">0</td>
<td class="gt_row gt_left" headers="T001141043">32</td>
<td class="gt_row gt_left" headers="T001141044">25</td>
<td class="gt_row gt_left" headers="T001141045">7</td>
<td class="gt_row gt_left" headers="T001141046">3</td>
<td class="gt_row gt_left" headers="T001141047">22</td>
<td class="gt_row gt_left" headers="T001141048">0</td>
<td class="gt_row gt_left" headers="T001141049">7</td>
<td class="gt_row gt_left" headers="T001141050">4</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>これを見てみると、1行目には特に意味がなく、2行目が列名になっていることが分かります。</p>
<p>そこで、1行目をスキップして読み込むために、<code>read_csv()</code> 内で skip を指定します。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">test_skip1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/census_2020/tblT001141H3622.txt"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">skip =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, </span>
<span id="cb4-2">                       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">locale =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">locale</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">encoding =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Shift_JIS"</span>))</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(test_skip1)</span></code></pre></div>
</div>
<div class="cell">
<div id="tbl-file-check-skip1" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-file-check-skip1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表&nbsp;2: 1行目をスキップ
</figcaption>
<div aria-describedby="tbl-file-check-skip1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="svudgbcsoj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#svudgbcsoj table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#svudgbcsoj thead, #svudgbcsoj tbody, #svudgbcsoj tfoot, #svudgbcsoj tr, #svudgbcsoj td, #svudgbcsoj th {
  border-style: none;
}

#svudgbcsoj p {
  margin: 0;
  padding: 0;
}

#svudgbcsoj .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#svudgbcsoj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#svudgbcsoj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#svudgbcsoj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#svudgbcsoj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#svudgbcsoj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#svudgbcsoj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#svudgbcsoj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#svudgbcsoj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#svudgbcsoj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#svudgbcsoj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#svudgbcsoj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#svudgbcsoj .gt_spanner_row {
  border-bottom-style: hidden;
}

#svudgbcsoj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#svudgbcsoj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#svudgbcsoj .gt_from_md > :first-child {
  margin-top: 0;
}

#svudgbcsoj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#svudgbcsoj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#svudgbcsoj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#svudgbcsoj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#svudgbcsoj .gt_row_group_first td {
  border-top-width: 2px;
}

#svudgbcsoj .gt_row_group_first th {
  border-top-width: 2px;
}

#svudgbcsoj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#svudgbcsoj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#svudgbcsoj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#svudgbcsoj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#svudgbcsoj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#svudgbcsoj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#svudgbcsoj .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#svudgbcsoj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#svudgbcsoj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#svudgbcsoj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#svudgbcsoj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#svudgbcsoj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#svudgbcsoj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#svudgbcsoj .gt_left {
  text-align: left;
}

#svudgbcsoj .gt_center {
  text-align: center;
}

#svudgbcsoj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#svudgbcsoj .gt_font_normal {
  font-weight: normal;
}

#svudgbcsoj .gt_font_bold {
  font-weight: bold;
}

#svudgbcsoj .gt_font_italic {
  font-style: italic;
}

#svudgbcsoj .gt_super {
  font-size: 65%;
}

#svudgbcsoj .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#svudgbcsoj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#svudgbcsoj .gt_indent_1 {
  text-indent: 5px;
}

#svudgbcsoj .gt_indent_2 {
  text-indent: 10px;
}

#svudgbcsoj .gt_indent_3 {
  text-indent: 15px;
}

#svudgbcsoj .gt_indent_4 {
  text-indent: 20px;
}

#svudgbcsoj .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="...1" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">...1</th>
<th id="...2" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">...2</th>
<th id="...3" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">...3</th>
<th id="...4" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">...4</th>
<th id="　人口（総数）" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　人口（総数）</th>
<th id="　人口（総数）　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　人口（総数）　男</th>
<th id="　人口（総数）　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　人口（総数）　女</th>
<th id="　０〜１４歳人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　０〜１４歳人口　総数</th>
<th id="　０〜１４歳人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　０〜１４歳人口　男</th>
<th id="　０〜１４歳人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　０〜１４歳人口　女</th>
<th id="　１５歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５歳以上人口　総数</th>
<th id="　１５歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５歳以上人口　男</th>
<th id="　１５歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５歳以上人口　女</th>
<th id="　１５〜６４歳人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５〜６４歳人口　総数</th>
<th id="　１５〜６４歳人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５〜６４歳人口　男</th>
<th id="　１５〜６４歳人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５〜６４歳人口　女</th>
<th id="　１８歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１８歳以上人口　総数</th>
<th id="　１８歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１８歳以上人口　男</th>
<th id="　１８歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１８歳以上人口　女</th>
<th id="　２０歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　２０歳以上人口　総数</th>
<th id="　２０歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　２０歳以上人口　男</th>
<th id="　２０歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　２０歳以上人口　女</th>
<th id="　６５歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６５歳以上人口　総数</th>
<th id="　６５歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６５歳以上人口　男</th>
<th id="　６５歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６５歳以上人口　女</th>
<th id="　７５歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　７５歳以上人口　総数</th>
<th id="　７５歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　７５歳以上人口　男</th>
<th id="　７５歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　７５歳以上人口　女</th>
<th id="　８５歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　８５歳以上人口　総数</th>
<th id="　８５歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　８５歳以上人口　男</th>
<th id="　８５歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　８５歳以上人口　女</th>
<th id="　９５歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　９５歳以上人口　総数</th>
<th id="　９５歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　９５歳以上人口　男</th>
<th id="　９５歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　９５歳以上人口　女</th>
<th id="　外国人人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　外国人人口　総数</th>
<th id="　外国人人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　外国人人口　男</th>
<th id="　外国人人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　外国人人口　女</th>
<th id="　世帯総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　世帯総数</th>
<th id="　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　一般世帯数</th>
<th id="　１人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１人世帯数　一般世帯数</th>
<th id="　２人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　２人世帯数　一般世帯数</th>
<th id="　３人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　３人世帯数　一般世帯数</th>
<th id="　４人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　４人世帯数　一般世帯数</th>
<th id="　５人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　５人世帯数　一般世帯数</th>
<th id="　６人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６人世帯数　一般世帯数</th>
<th id="　７人以上世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　７人以上世帯数　一般世帯数</th>
<th id="　親族のみの世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　親族のみの世帯数　一般世帯数</th>
<th id="　核家族世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　核家族世帯数　一般世帯数</th>
<th id="　核家族以外の世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　核家族以外の世帯数　一般世帯数</th>
<th id="　６歳未満世帯員のいる世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６歳未満世帯員のいる世帯数　一般世帯数</th>
<th id="　６５歳以上世帯員のいる世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６５歳以上世帯員のいる世帯数　一般世帯数</th>
<th id="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数</th>
<th id="　高齢単身世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　高齢単身世帯数　一般世帯数</th>
<th id="　高齢夫婦世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　高齢夫婦世帯数　一般世帯数</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="...1">362257353</td>
<td class="gt_row gt_right" headers="...2">0</td>
<td class="gt_row gt_right" headers="...3">NA</td>
<td class="gt_row gt_right" headers="...4">NA</td>
<td class="gt_row gt_right" headers="　人口（総数）">29</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">15</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">14</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">5</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">2</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">3</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">24</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">13</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">11</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">19</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">11</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">8</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">23</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">12</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">11</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">23</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">12</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">11</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">5</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">2</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">3</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">1</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">1</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">0</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">0</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">0</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">0</td>
<td class="gt_row gt_right" headers="　外国人人口　男">0</td>
<td class="gt_row gt_right" headers="　外国人人口　女">0</td>
<td class="gt_row gt_right" headers="　世帯総数">16</td>
<td class="gt_row gt_right" headers="　一般世帯数">16</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">10</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">1</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">4</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">1</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">6</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">4</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">2</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">1</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">4</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">1</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">1</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="...1">362257354</td>
<td class="gt_row gt_right" headers="...2">0</td>
<td class="gt_row gt_right" headers="...3">NA</td>
<td class="gt_row gt_right" headers="...4">NA</td>
<td class="gt_row gt_right" headers="　人口（総数）">96</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">91</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">5</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">0</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">0</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">0</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">96</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">91</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">5</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">96</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">91</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">5</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">96</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">91</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">5</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">96</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">91</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">5</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">0</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">0</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">0</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">0</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">0</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">0</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">0</td>
<td class="gt_row gt_right" headers="　外国人人口　男">0</td>
<td class="gt_row gt_right" headers="　外国人人口　女">0</td>
<td class="gt_row gt_right" headers="　世帯総数">11</td>
<td class="gt_row gt_right" headers="　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="...1">362257381</td>
<td class="gt_row gt_right" headers="...2">0</td>
<td class="gt_row gt_right" headers="...3">NA</td>
<td class="gt_row gt_right" headers="...4">NA</td>
<td class="gt_row gt_right" headers="　人口（総数）">101</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">46</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">55</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">24</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">9</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">15</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">77</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">37</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">40</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">54</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">27</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">27</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">76</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">36</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">40</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">76</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">36</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">40</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">23</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">10</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">13</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">5</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">1</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">4</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">4</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">1</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">3</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">1</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">1</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">0</td>
<td class="gt_row gt_right" headers="　外国人人口　男">0</td>
<td class="gt_row gt_right" headers="　外国人人口　女">0</td>
<td class="gt_row gt_right" headers="　世帯総数">39</td>
<td class="gt_row gt_right" headers="　一般世帯数">39</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">11</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">8</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">8</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">10</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">2</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">28</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">24</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">4</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">8</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">16</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">1</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">4</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">3</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="...1">362257382</td>
<td class="gt_row gt_right" headers="...2">0</td>
<td class="gt_row gt_right" headers="...3">NA</td>
<td class="gt_row gt_right" headers="...4">NA</td>
<td class="gt_row gt_right" headers="　人口（総数）">28</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">16</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">12</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">1</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">0</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">1</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">27</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">16</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">11</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">19</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">13</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">6</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">27</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">16</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">11</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">27</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">16</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">11</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">8</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">3</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">5</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">6</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">3</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">3</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">0</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">0</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">2</td>
<td class="gt_row gt_right" headers="　外国人人口　男">1</td>
<td class="gt_row gt_right" headers="　外国人人口　女">1</td>
<td class="gt_row gt_right" headers="　世帯総数">18</td>
<td class="gt_row gt_right" headers="　一般世帯数">18</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">11</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">4</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">3</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">7</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">6</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">1</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">5</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">1</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">1</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="...1">362257451</td>
<td class="gt_row gt_right" headers="...2">0</td>
<td class="gt_row gt_right" headers="...3">NA</td>
<td class="gt_row gt_right" headers="...4">NA</td>
<td class="gt_row gt_right" headers="　人口（総数）">117</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">59</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">58</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">20</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">13</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">7</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">97</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">46</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">51</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">70</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">34</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">36</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">96</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">46</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">50</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">96</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">46</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">50</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">27</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">12</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">15</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">14</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">4</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">10</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">5</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">5</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">0</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">0</td>
<td class="gt_row gt_right" headers="　外国人人口　男">0</td>
<td class="gt_row gt_right" headers="　外国人人口　女">0</td>
<td class="gt_row gt_right" headers="　世帯総数">58</td>
<td class="gt_row gt_right" headers="　一般世帯数">58</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">25</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">18</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">10</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">1</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">2</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">2</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">32</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">25</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">7</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">3</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">22</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">0</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">7</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">4</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="...1">362257452</td>
<td class="gt_row gt_right" headers="...2">1</td>
<td class="gt_row gt_right" headers="...3">NA</td>
<td class="gt_row gt_right" headers="...4">362257454</td>
<td class="gt_row gt_right" headers="　人口（総数）">348</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">182</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">166</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">85</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">41</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">44</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">273</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">149</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">124</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">214</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">118</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">96</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">271</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">148</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">123</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">269</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">148</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">121</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">59</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">31</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">28</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">23</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">10</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">13</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">11</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">3</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">8</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">0</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">0</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">0</td>
<td class="gt_row gt_right" headers="　外国人人口　男">0</td>
<td class="gt_row gt_right" headers="　外国人人口　女">0</td>
<td class="gt_row gt_right" headers="　世帯総数">162</td>
<td class="gt_row gt_right" headers="　一般世帯数">162</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">86</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">34</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">19</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">15</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">10</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">5</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">1</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">80</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">72</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">8</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">26</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">43</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">12</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">18</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>この後必要な列をセレクトして名前を付け直すので、ここで一旦列名を確認してみましょう。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(test_skip1)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "...1"                                                
 [2] "...2"                                                
 [3] "...3"                                                
 [4] "...4"                                                
 [5] "　人口（総数）"                                      
 [6] "　人口（総数）　男"                                  
 [7] "　人口（総数）　女"                                  
 [8] "　０〜１４歳人口　総数"                              
 [9] "　０〜１４歳人口　男"                                
[10] "　０〜１４歳人口　女"                                
[11] "　１５歳以上人口　総数"                              
[12] "　１５歳以上人口　男"                                
[13] "　１５歳以上人口　女"                                
[14] "　１５〜６４歳人口　総数"                            
[15] "　１５〜６４歳人口　男"                              
[16] "　１５〜６４歳人口　女"                              
[17] "　１８歳以上人口　総数"                              
[18] "　１８歳以上人口　男"                                
[19] "　１８歳以上人口　女"                                
[20] "　２０歳以上人口　総数"                              
[21] "　２０歳以上人口　男"                                
[22] "　２０歳以上人口　女"                                
[23] "　６５歳以上人口　総数"                              
[24] "　６５歳以上人口　男"                                
[25] "　６５歳以上人口　女"                                
[26] "　７５歳以上人口　総数"                              
[27] "　７５歳以上人口　男"                                
[28] "　７５歳以上人口　女"                                
[29] "　８５歳以上人口　総数"                              
[30] "　８５歳以上人口　男"                                
[31] "　８５歳以上人口　女"                                
[32] "　９５歳以上人口　総数"                              
[33] "　９５歳以上人口　男"                                
[34] "　９５歳以上人口　女"                                
[35] "　外国人人口　総数"                                  
[36] "　外国人人口　男"                                    
[37] "　外国人人口　女"                                    
[38] "　世帯総数"                                          
[39] "　一般世帯数"                                        
[40] "　１人世帯数　一般世帯数"                            
[41] "　２人世帯数　一般世帯数"                            
[42] "　３人世帯数　一般世帯数"                            
[43] "　４人世帯数　一般世帯数"                            
[44] "　５人世帯数　一般世帯数"                            
[45] "　６人世帯数　一般世帯数"                            
[46] "　７人以上世帯数　一般世帯数"                        
[47] "　親族のみの世帯数　一般世帯数"                      
[48] "　核家族世帯数　一般世帯数"                          
[49] "　核家族以外の世帯数　一般世帯数"                    
[50] "　６歳未満世帯員のいる世帯数　一般世帯数"            
[51] "　６５歳以上世帯員のいる世帯数　一般世帯数"          
[52] "　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数"
[53] "　高齢単身世帯数　一般世帯数"                        
[54] "　高齢夫婦世帯数　一般世帯数"                        </code></pre>
</div>
</div>
<p>これはトラップで、よく見ると変数名の前に全角スペースが空いています。列名を変更するときはここに注意しないと、謎のエラーに苛まれます。</p>
</section>
</section>
<section id="まとめて読み込む" class="level2">
<h2 class="anchored" data-anchor-id="まとめて読み込む">まとめて読み込む</h2>
<p>ではファイルの中身を確認できたところで、ファイルをまとめて読み込みます。</p>
<p>結論から言うと、コードは以下です。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 指定されたディレクトリ内のファイル名の文字ベクトルを生成</span></span>
<span id="cb8-2">census_files <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list.files</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/census_2020"</span>),  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ファイルが入っているフォルダのパス</span></span>
<span id="cb8-3">                           <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pattern =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.txt$"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">full.names =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb8-4"></span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># lapplyで、ファイル一覧に対して読み込む関数を適用</span></span>
<span id="cb8-6">census_objects <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(</span>
<span id="cb8-7">  census_files, </span>
<span id="cb8-8">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(file) {</span>
<span id="cb8-9">    census_obj <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(file, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">locale =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">locale</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">encoding =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Shift_JIS"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">skip =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-10">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 使いたい列をセレクトする</span></span>
<span id="cb8-11">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"　人口（総数）"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"　０〜１４歳人口　総数"</span>, </span>
<span id="cb8-12">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"　１５〜６４歳人口　総数"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"　６５歳以上人口　総数"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-13">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2列目が0であれば秘匿対象外</span></span>
<span id="cb8-14">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(...<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-15">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2, 3, 4列目はもう使わないので除く</span></span>
<span id="cb8-16">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(...<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, ...<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, ...<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-17">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 変数名は任意</span></span>
<span id="cb8-18">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(</span>
<span id="cb8-19">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">KEY_CODE =</span> ...<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, </span>
<span id="cb8-20">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pop_total =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"　人口（総数）"</span>, </span>
<span id="cb8-21">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pop_young =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"　０〜１４歳人口　総数"</span>, </span>
<span id="cb8-22">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pop_working =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"　１５〜６４歳人口　総数"</span>, </span>
<span id="cb8-23">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pop_old =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"　６５歳以上人口　総数"</span></span>
<span id="cb8-24">      ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-25">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 変数のクラスを指定</span></span>
<span id="cb8-26">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb8-27">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">KEY_CODE =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(KEY_CODE), </span>
<span id="cb8-28">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pop_total =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(pop_total), </span>
<span id="cb8-29">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pop_young =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(pop_young), </span>
<span id="cb8-30">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pop_working =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(pop_working), </span>
<span id="cb8-31">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pop_old =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(pop_old)</span>
<span id="cb8-32">      )</span>
<span id="cb8-33">  }</span>
<span id="cb8-34">) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-35">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 読み込んだデータをバインドする</span></span>
<span id="cb8-36">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>()</span></code></pre></div>
</div>
<p>ポイントをいくつか挙げます。</p>
<p><strong>ポイント</strong></p>
<ol type="1">
<li><p><code>list.files()</code></p>
<ul>
<li>指定したフォルダ内の <code>.txt</code> で終わるファイルを取得しています。</li>
</ul></li>
<li><p><code>lapply()</code></p>
<ul>
<li><p>第1引数（1で取得したファイル）に対し、第2引数（<code>function</code>）を適用します。</p></li>
<li><p><code>function</code> では、ファイルの読み込みや変数名の変更など、いくつかの作業をして結果を返すよう指示しています。</p></li>
</ul></li>
<li><p><code>filter(...2 == 0)</code></p>
<ul>
<li><p><code>...2</code> はもともと <code>HTKSYORI</code>（秘匿処理） という列名でした。これが0であると秘匿対象外であり、データが存在します<sup>2</sup>。</p></li>
<li><p>逆に秘匿対象だと 表&nbsp;3 のようになります。</p></li>
<li><p>フィルターをかけてデータがあるところを抽出します。</p></li>
</ul></li>
</ol>
<div class="cell">
<div id="tbl-hitoku" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-hitoku-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表&nbsp;3: データがアスタリスクで置き換えられています。
</figcaption>
<div aria-describedby="tbl-hitoku-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="vuemhniref" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vuemhniref table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vuemhniref thead, #vuemhniref tbody, #vuemhniref tfoot, #vuemhniref tr, #vuemhniref td, #vuemhniref th {
  border-style: none;
}

#vuemhniref p {
  margin: 0;
  padding: 0;
}

#vuemhniref .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vuemhniref .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vuemhniref .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vuemhniref .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vuemhniref .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vuemhniref .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vuemhniref .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vuemhniref .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vuemhniref .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vuemhniref .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vuemhniref .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vuemhniref .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vuemhniref .gt_spanner_row {
  border-bottom-style: hidden;
}

#vuemhniref .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vuemhniref .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vuemhniref .gt_from_md > :first-child {
  margin-top: 0;
}

#vuemhniref .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vuemhniref .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vuemhniref .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vuemhniref .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vuemhniref .gt_row_group_first td {
  border-top-width: 2px;
}

#vuemhniref .gt_row_group_first th {
  border-top-width: 2px;
}

#vuemhniref .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vuemhniref .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vuemhniref .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vuemhniref .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vuemhniref .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vuemhniref .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vuemhniref .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vuemhniref .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vuemhniref .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vuemhniref .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vuemhniref .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vuemhniref .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vuemhniref .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vuemhniref .gt_left {
  text-align: left;
}

#vuemhniref .gt_center {
  text-align: center;
}

#vuemhniref .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vuemhniref .gt_font_normal {
  font-weight: normal;
}

#vuemhniref .gt_font_bold {
  font-weight: bold;
}

#vuemhniref .gt_font_italic {
  font-style: italic;
}

#vuemhniref .gt_super {
  font-size: 65%;
}

#vuemhniref .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vuemhniref .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vuemhniref .gt_indent_1 {
  text-indent: 5px;
}

#vuemhniref .gt_indent_2 {
  text-indent: 10px;
}

#vuemhniref .gt_indent_3 {
  text-indent: 15px;
}

#vuemhniref .gt_indent_4 {
  text-indent: 20px;
}

#vuemhniref .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="...1" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">...1</th>
<th id="...2" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">...2</th>
<th id="...3" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">...3</th>
<th id="...4" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">...4</th>
<th id="　人口（総数）" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　人口（総数）</th>
<th id="　人口（総数）　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　人口（総数）　男</th>
<th id="　人口（総数）　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　人口（総数）　女</th>
<th id="　０〜１４歳人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　０〜１４歳人口　総数</th>
<th id="　０〜１４歳人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　０〜１４歳人口　男</th>
<th id="　０〜１４歳人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　０〜１４歳人口　女</th>
<th id="　１５歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５歳以上人口　総数</th>
<th id="　１５歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５歳以上人口　男</th>
<th id="　１５歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５歳以上人口　女</th>
<th id="　１５〜６４歳人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５〜６４歳人口　総数</th>
<th id="　１５〜６４歳人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５〜６４歳人口　男</th>
<th id="　１５〜６４歳人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１５〜６４歳人口　女</th>
<th id="　１８歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１８歳以上人口　総数</th>
<th id="　１８歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１８歳以上人口　男</th>
<th id="　１８歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１８歳以上人口　女</th>
<th id="　２０歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　２０歳以上人口　総数</th>
<th id="　２０歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　２０歳以上人口　男</th>
<th id="　２０歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　２０歳以上人口　女</th>
<th id="　６５歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６５歳以上人口　総数</th>
<th id="　６５歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６５歳以上人口　男</th>
<th id="　６５歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６５歳以上人口　女</th>
<th id="　７５歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　７５歳以上人口　総数</th>
<th id="　７５歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　７５歳以上人口　男</th>
<th id="　７５歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　７５歳以上人口　女</th>
<th id="　８５歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　８５歳以上人口　総数</th>
<th id="　８５歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　８５歳以上人口　男</th>
<th id="　８５歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　８５歳以上人口　女</th>
<th id="　９５歳以上人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　９５歳以上人口　総数</th>
<th id="　９５歳以上人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　９５歳以上人口　男</th>
<th id="　９５歳以上人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　９５歳以上人口　女</th>
<th id="　外国人人口　総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　外国人人口　総数</th>
<th id="　外国人人口　男" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　外国人人口　男</th>
<th id="　外国人人口　女" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　外国人人口　女</th>
<th id="　世帯総数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　世帯総数</th>
<th id="　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　一般世帯数</th>
<th id="　１人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　１人世帯数　一般世帯数</th>
<th id="　２人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　２人世帯数　一般世帯数</th>
<th id="　３人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　３人世帯数　一般世帯数</th>
<th id="　４人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　４人世帯数　一般世帯数</th>
<th id="　５人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　５人世帯数　一般世帯数</th>
<th id="　６人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６人世帯数　一般世帯数</th>
<th id="　７人以上世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　７人以上世帯数　一般世帯数</th>
<th id="　親族のみの世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　親族のみの世帯数　一般世帯数</th>
<th id="　核家族世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　核家族世帯数　一般世帯数</th>
<th id="　核家族以外の世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　核家族以外の世帯数　一般世帯数</th>
<th id="　６歳未満世帯員のいる世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６歳未満世帯員のいる世帯数　一般世帯数</th>
<th id="　６５歳以上世帯員のいる世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　６５歳以上世帯員のいる世帯数　一般世帯数</th>
<th id="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数</th>
<th id="　高齢単身世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　高齢単身世帯数　一般世帯数</th>
<th id="　高齢夫婦世帯数　一般世帯数" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">　高齢夫婦世帯数　一般世帯数</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="...1">372501594</td>
<td class="gt_row gt_right" headers="...2">2</td>
<td class="gt_row gt_right" headers="...3">372501694</td>
<td class="gt_row gt_left" headers="...4">NA</td>
<td class="gt_row gt_right" headers="　人口（総数）">5</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">1</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">4</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">*</td>
<td class="gt_row gt_right" headers="　外国人人口　男">*</td>
<td class="gt_row gt_right" headers="　外国人人口　女">*</td>
<td class="gt_row gt_right" headers="　世帯総数">3</td>
<td class="gt_row gt_right" headers="　一般世帯数">3</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">*</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="...1">372502503</td>
<td class="gt_row gt_right" headers="...2">2</td>
<td class="gt_row gt_right" headers="...3">372502603</td>
<td class="gt_row gt_left" headers="...4">NA</td>
<td class="gt_row gt_right" headers="　人口（総数）">5</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">3</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">2</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">*</td>
<td class="gt_row gt_right" headers="　外国人人口　男">*</td>
<td class="gt_row gt_right" headers="　外国人人口　女">*</td>
<td class="gt_row gt_right" headers="　世帯総数">2</td>
<td class="gt_row gt_right" headers="　一般世帯数">2</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">*</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="...1">372502701</td>
<td class="gt_row gt_right" headers="...2">2</td>
<td class="gt_row gt_right" headers="...3">372502603</td>
<td class="gt_row gt_left" headers="...4">NA</td>
<td class="gt_row gt_right" headers="　人口（総数）">9</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">6</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">3</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">*</td>
<td class="gt_row gt_right" headers="　外国人人口　男">*</td>
<td class="gt_row gt_right" headers="　外国人人口　女">*</td>
<td class="gt_row gt_right" headers="　世帯総数">5</td>
<td class="gt_row gt_right" headers="　一般世帯数">5</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">*</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="...1">372502723</td>
<td class="gt_row gt_right" headers="...2">2</td>
<td class="gt_row gt_right" headers="...3">372502722</td>
<td class="gt_row gt_left" headers="...4">NA</td>
<td class="gt_row gt_right" headers="　人口（総数）">4</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">1</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">3</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">*</td>
<td class="gt_row gt_right" headers="　外国人人口　男">*</td>
<td class="gt_row gt_right" headers="　外国人人口　女">*</td>
<td class="gt_row gt_right" headers="　世帯総数">2</td>
<td class="gt_row gt_right" headers="　一般世帯数">2</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">*</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="...1">372502724</td>
<td class="gt_row gt_right" headers="...2">2</td>
<td class="gt_row gt_right" headers="...3">372502722</td>
<td class="gt_row gt_left" headers="...4">NA</td>
<td class="gt_row gt_right" headers="　人口（総数）">6</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">2</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">4</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">*</td>
<td class="gt_row gt_right" headers="　外国人人口　男">*</td>
<td class="gt_row gt_right" headers="　外国人人口　女">*</td>
<td class="gt_row gt_right" headers="　世帯総数">3</td>
<td class="gt_row gt_right" headers="　一般世帯数">3</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">*</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="...1">372502732</td>
<td class="gt_row gt_right" headers="...2">2</td>
<td class="gt_row gt_right" headers="...3">372502731</td>
<td class="gt_row gt_left" headers="...4">NA</td>
<td class="gt_row gt_right" headers="　人口（総数）">3</td>
<td class="gt_row gt_right" headers="　人口（総数）　男">0</td>
<td class="gt_row gt_right" headers="　人口（総数）　女">3</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　０〜１４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　総数">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　男">*</td>
<td class="gt_row gt_right" headers="　１５〜６４歳人口　女">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　１８歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　２０歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　６５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　７５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　８５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　総数">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　男">*</td>
<td class="gt_row gt_right" headers="　９５歳以上人口　女">*</td>
<td class="gt_row gt_right" headers="　外国人人口　総数">*</td>
<td class="gt_row gt_right" headers="　外国人人口　男">*</td>
<td class="gt_row gt_right" headers="　外国人人口　女">*</td>
<td class="gt_row gt_right" headers="　世帯総数">2</td>
<td class="gt_row gt_right" headers="　一般世帯数">2</td>
<td class="gt_row gt_right" headers="　１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　２人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　３人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　４人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　５人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　７人以上世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　親族のみの世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　核家族以外の世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６歳未満世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　６５歳以上世帯員のいる世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　世帯主の年齢が２０〜２９歳の１人世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢単身世帯数　一般世帯数">*</td>
<td class="gt_row gt_right" headers="　高齢夫婦世帯数　一般世帯数">*</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<ol start="4" type="1">
<li><p><code>rename()</code></p>
<ul>
<li>変数名を変更するときは、<code>colnames()</code> などで変数名を確認し、おかしなところはないか確認してから変えることをおすすめします（特に日本語列名の場合）。</li>
</ul></li>
<li><p><code>mutate()</code></p>
<ul>
<li><p><code>KEY_CODE</code> は文字列にしたくて、その他は数値にしたいので、<code>as.character()</code> と <code>as.numeric()</code> で変換します。</p></li>
<li><p>データによっては、この手順を踏まなくても問題ないかもしれません。</p></li>
</ul></li>
<li><p><code>bind_rows()</code></p>
<ul>
<li><p><code>lapply()</code> でそれぞれのファイルを読み込んだので、最後にすべてのデータを結合します。</p></li>
<li><p>列名もそろえてあるので、問題なく結合できます。</p></li>
</ul></li>
</ol>
<p>データは次のようになります。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(census_objects)</span></code></pre></div>
</div>
<div class="cell">
<div id="tbl-after-cleansing" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-after-cleansing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表&nbsp;4: クレンジング後
</figcaption>
<div aria-describedby="tbl-after-cleansing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="zxhxfvsdhz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zxhxfvsdhz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zxhxfvsdhz thead, #zxhxfvsdhz tbody, #zxhxfvsdhz tfoot, #zxhxfvsdhz tr, #zxhxfvsdhz td, #zxhxfvsdhz th {
  border-style: none;
}

#zxhxfvsdhz p {
  margin: 0;
  padding: 0;
}

#zxhxfvsdhz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zxhxfvsdhz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zxhxfvsdhz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zxhxfvsdhz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zxhxfvsdhz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zxhxfvsdhz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zxhxfvsdhz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zxhxfvsdhz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zxhxfvsdhz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zxhxfvsdhz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zxhxfvsdhz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zxhxfvsdhz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zxhxfvsdhz .gt_spanner_row {
  border-bottom-style: hidden;
}

#zxhxfvsdhz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zxhxfvsdhz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zxhxfvsdhz .gt_from_md > :first-child {
  margin-top: 0;
}

#zxhxfvsdhz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zxhxfvsdhz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zxhxfvsdhz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zxhxfvsdhz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zxhxfvsdhz .gt_row_group_first td {
  border-top-width: 2px;
}

#zxhxfvsdhz .gt_row_group_first th {
  border-top-width: 2px;
}

#zxhxfvsdhz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zxhxfvsdhz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zxhxfvsdhz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zxhxfvsdhz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zxhxfvsdhz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zxhxfvsdhz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zxhxfvsdhz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zxhxfvsdhz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zxhxfvsdhz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zxhxfvsdhz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zxhxfvsdhz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zxhxfvsdhz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zxhxfvsdhz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zxhxfvsdhz .gt_left {
  text-align: left;
}

#zxhxfvsdhz .gt_center {
  text-align: center;
}

#zxhxfvsdhz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zxhxfvsdhz .gt_font_normal {
  font-weight: normal;
}

#zxhxfvsdhz .gt_font_bold {
  font-weight: bold;
}

#zxhxfvsdhz .gt_font_italic {
  font-style: italic;
}

#zxhxfvsdhz .gt_super {
  font-size: 65%;
}

#zxhxfvsdhz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zxhxfvsdhz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zxhxfvsdhz .gt_indent_1 {
  text-indent: 5px;
}

#zxhxfvsdhz .gt_indent_2 {
  text-indent: 10px;
}

#zxhxfvsdhz .gt_indent_3 {
  text-indent: 15px;
}

#zxhxfvsdhz .gt_indent_4 {
  text-indent: 20px;
}

#zxhxfvsdhz .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="KEY_CODE" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">KEY_CODE</th>
<th id="pop_total" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">pop_total</th>
<th id="pop_young" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">pop_young</th>
<th id="pop_working" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">pop_working</th>
<th id="pop_old" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">pop_old</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="KEY_CODE">362257353</td>
<td class="gt_row gt_right" headers="pop_total">29</td>
<td class="gt_row gt_right" headers="pop_young">5</td>
<td class="gt_row gt_right" headers="pop_working">19</td>
<td class="gt_row gt_right" headers="pop_old">5</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="KEY_CODE">362257354</td>
<td class="gt_row gt_right" headers="pop_total">96</td>
<td class="gt_row gt_right" headers="pop_young">0</td>
<td class="gt_row gt_right" headers="pop_working">96</td>
<td class="gt_row gt_right" headers="pop_old">0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="KEY_CODE">362257381</td>
<td class="gt_row gt_right" headers="pop_total">101</td>
<td class="gt_row gt_right" headers="pop_young">24</td>
<td class="gt_row gt_right" headers="pop_working">54</td>
<td class="gt_row gt_right" headers="pop_old">23</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="KEY_CODE">362257382</td>
<td class="gt_row gt_right" headers="pop_total">28</td>
<td class="gt_row gt_right" headers="pop_young">1</td>
<td class="gt_row gt_right" headers="pop_working">19</td>
<td class="gt_row gt_right" headers="pop_old">8</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="KEY_CODE">362257451</td>
<td class="gt_row gt_right" headers="pop_total">117</td>
<td class="gt_row gt_right" headers="pop_young">20</td>
<td class="gt_row gt_right" headers="pop_working">70</td>
<td class="gt_row gt_right" headers="pop_old">27</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="KEY_CODE">362306721</td>
<td class="gt_row gt_right" headers="pop_total">269</td>
<td class="gt_row gt_right" headers="pop_young">45</td>
<td class="gt_row gt_right" headers="pop_working">152</td>
<td class="gt_row gt_right" headers="pop_old">72</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="まとめ" class="level1">
<h1>まとめ</h1>
<p>今回は国勢調査のメッシュデータを使って、R でデータクレンジングを行う方法をご紹介しました。</p>
<p>複数年分のデータをまとめなければならないときなど、繰り返し作業をするときには特に重宝します。</p>
<p>様々な場合で使えると思いますので、<code>list.files()</code> や <code>lapply()</code> をうまく使いながら効率的にデータをまとめていきましょう。</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>R プロジェクトを使用している場合は問題ありません。R プロジェクトについては<a href="../240515_rproj/index.html">こちら</a>をご参照ください。↩︎</p></li>
<li id="fn2"><p>1だと合算先地域メッシュ、2だと秘匿対象地域メッシュです。詳しくは <a href="https://www.e-stat.go.jp/gis/statmap-search?page=1&amp;type=1&amp;toukeiCode=00200521&amp;toukeiYear=2020&amp;aggregateUnit=H&amp;serveyId=H002005112020&amp;statsId=T001141&amp;datum=2011">e-Stat</a> の定義書から確認してください。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>R</category>
  <guid>https://yo5uke.github.io/tips/240622_census_cleansing/</guid>
  <pubDate>Fri, 21 Jun 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240622_census_cleansing/image/japan.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>Python のための開発コンテナ</title>
  <link>https://yo5uke.github.io/tips/240621_python_container/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>以前の記事で、Docker &amp; VSCode を用いた R 環境の構築方法をご紹介しました。</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="../240504_container/index.html">開発コンテナを使って R 環境を構築！</a></p>
</div>
</div>
</div>
<p>今回は同じく Docker &amp; VSCode で使える Python の環境テンプレートを作成しましたので、そちらをご紹介します。</p>
<p>以前の R 環境でも Python は使えましたが、特に R や Julia 等が不要である方は、ぜひ参考にしてみてください。</p>
<p>WSL2, Ubuntu, Homebrew, VSCode, Docker, Git, GitHub を使用されたことがあり、上の記事を読んでいただいた方は開発環境の構築まで飛んでいただいて大丈夫だと思います。</p>
</section>
<section id="事前準備" class="level1">
<h1>事前準備</h1>
<div class="callou-note">
<p>1から手順を説明していきますが、既に Docker や Ubuntu 等をインストールしている場合は適宜飛ばしてください。</p>
</div>
<section id="wsl2windows-ユーザーのみ" class="level2">
<h2 class="anchored" data-anchor-id="wsl2windows-ユーザーのみ">WSL2（Windows ユーザーのみ）</h2>
<ol type="1">
<li><p>アプリ一覧から PowerShell または Windows コマンドプロンプトを管理者権限で開く</p>
<ul>
<li>右クリックで管理者権限を使えます。</li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240621_python_container/image/powershell.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
<ol start="2" type="1">
<li><p>以下のコマンドを入力して実行</p>
<ul>
<li>これでインストールはできるはずですが、詳しくは<a href="https://learn.microsoft.com/ja-jp/windows/wsl/install">こちらのサイト</a>を参照してください。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>PowerShell</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="PowerShell" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">wsl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--install</span></span></code></pre></div>
</div>
<ol start="3" type="1">
<li><p>ユーザー名とパスワードを設定</p>
<ul>
<li><p>インストールが終わると、Linux ディストリビューションのユーザー名とパスワードの作成を求められます<sup>1</sup>。</p></li>
<li><p>ユーザー名は何でも大丈夫です。パスワードもめちゃくちゃ簡単で問題ありません。</p></li>
<li><p>パスワードは画面上には表示されませんが、ちゃんと入力されています。慌てて何回も入力しないようにしてください。</p></li>
</ul></li>
</ol>
<p>エクスプローラーから Linux に入り、<code>\Ubuntu\home\ユーザー名</code> がメインとなるディレクトリです。</p>
</section>
<section id="homebrewmac-ユーザーのみ" class="level2">
<h2 class="anchored" data-anchor-id="homebrewmac-ユーザーのみ">Homebrew（Mac ユーザーのみ）</h2>
<p>Mac ユーザーは Homebrew を使って諸々インストールしていくので、まだの方はここでインストールしてください。</p>
<ol type="1">
<li><p>ターミナルを開く</p>
<ul>
<li>アプリ一覧から「ターミナル」を探してください。</li>
</ul></li>
<li><p>以下のコマンドを入力して実行</p>
<ul>
<li>パスワードを求められるので、入力してください。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/bin/bash</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div>
</div>
</section>
<section id="sec-vscode-setting" class="level2">
<h2 class="anchored" data-anchor-id="sec-vscode-setting">VSCode</h2>
<ol type="1">
<li><p>VSCode の<a href="https://code.visualstudio.com/">ダウンロードサイト</a>からダウンロード、インストール</p>
<ul>
<li><p>Download for Windows<sup>2</sup> をクリックしてダウンロードできます。</p></li>
<li><p>インストールができたら、VSCode を開いてください。</p></li>
</ul></li>
<li><p>（任意）日本語の拡張機能をインストール</p>
<ul>
<li><p>画面左側に拡張機能のアイコン <img src="https://yo5uke.github.io/tips/240621_python_container/image/extention.png" class="img-fluid"> があります。ここの検索ボックスに <code>japanese</code> と入力し、1番上に出てきたものをインストールします。</p></li>
<li><p>インストール後、VSCode を再起動すれば日本語が反映されていると思います。</p></li>
</ul></li>
</ol>
<p><img src="https://yo5uke.github.io/tips/240621_python_container/image/vscode-ja.png" class="img-fluid"></p>
<ol start="3" type="1">
<li><p>拡張機能のインストール</p>
<ul>
<li><p>拡張機能の検索ボックスで、次の ID を入力し、インストールします。</p></li>
<li><p><code>ms-vscode-remote.remote-containers</code> (Dev Containers)</p></li>
<li><p><code>ms-vscode-remote.remote-wsl</code> (WSL, Windows ユーザーのみ)</p></li>
</ul></li>
<li><p>WSL に接続（Windows ユーザーのみ）</p>
<ul>
<li><p>VSCode から先ほどインストールした WSL に接続します。</p></li>
<li><p>画面左下の <code>&gt;&lt;</code> アイコンをクリックして、「WSL への接続」をクリックします。</p></li>
</ul></li>
</ol>
<p><img src="https://yo5uke.github.io/tips/240621_python_container/image/vscode-wsl.png" class="img-fluid"></p>
</section>
<section id="docker" class="level2">
<h2 class="anchored" data-anchor-id="docker">Docker</h2>
<p>Docker をインストールします。</p>
<ol type="1">
<li><p>Windows の方は<a href="https://docs.docker.com/desktop/install/windows-install/">ここ</a>から Docker Desktop for Windows を、Mac の方は<a href="https://docs.docker.com/desktop/install/mac-install/">こちら</a>からダウンロード＆インストール</p></li>
<li><p>設定の確認（Windows のみ）</p>
<ul>
<li><p>インストール出来たら、画面上部の設定ボタンから Resources、WSL integration と進み、チェックボックスにチェック、Ubuntu がオンになっていることを確認してください。</p></li>
<li><p>たまに、何もしていないのにここがオフになっていて、トラブることがあります。</p></li>
<li><p>詳しくは<a href="https://docs.docker.jp/docker-for-windows/install.html">こちら</a>をご覧ください。日本語で書いてあります。</p></li>
</ul></li>
</ol>
<p><img src="https://yo5uke.github.io/tips/240621_python_container/image/docker-desktop.png" class="img-fluid"></p>
<ol start="3" type="1">
<li><p>画面左側の Volumes に進み、Create からボリュームを作成</p>
<ul>
<li><p><code>pip</code> という名前で作成します。</p></li>
<li><p>R の開発コンテナを作成したことがある方で、もし <code>pip</code> を作成 &amp; 使用している場合、名前を変える必要があります。</p></li>
<li><p><a href="../240504_container/index.html">以前紹介した R 環境</a>の中にある Python とはバージョンが異なるので、同じボリュームを使うとエラーが出る可能性があります。</p></li>
</ul></li>
</ol>
</section>
<section id="git" class="level2">
<h2 class="anchored" data-anchor-id="git">Git</h2>
<section id="windows" class="level3">
<h3 class="anchored" data-anchor-id="windows">Windows</h3>
<ol type="1">
<li><p>Ubuntu で git をインストール</p>
<ul>
<li>Windows のアプリ一覧から Ubuntu を探し、開いてください。開いたら、以下のコマンドを入力して実行します。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Ubuntu</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="Ubuntu" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt-get install git</span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240621_python_container/image/ubuntu-git.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>Ubuntu</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li><p>設定</p>
<ul>
<li>以下のコマンドを入力、実行します。ユーザー名は何でも大丈夫です。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Ubuntu</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="Ubuntu" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> config <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--global</span> user.name <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">任意のユーザ名</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> config <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--global</span> user.email <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">任意のメールアドレス</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
</div>
</section>
<section id="mac" class="level3">
<h3 class="anchored" data-anchor-id="mac">Mac</h3>
<ol type="1">
<li><p>Homebrew で git をインストール</p>
<ul>
<li>ターミナルを開いて、以下のコマンドを入力して実行します。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb5" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">brew</span> install git</span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240621_python_container/image/homebrew.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>この Mac では2回目なので git is already installed と表示されてます…。</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li><p>設定</p>
<ul>
<li><p>以下のコマンドを入力、実行します。ユーザー名は何でも大丈夫です。</p></li>
<li><p>ここに限らずですが、<code>[]</code> ごと置き換えてくださいね。</p></li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb6" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> config <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--global</span> user.name <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">任意のユーザ名</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> config <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--global</span> user.email <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">任意のメールアドレス</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
</div>
</section>
</section>
<section id="github-アカウントの作成" class="level2">
<h2 class="anchored" data-anchor-id="github-アカウントの作成">GitHub アカウントの作成</h2>
<p>ファイルは基本的に GitHub で管理するので、<a href="https://github.com/">ここ</a>からアカウントを作成してください。</p>
<section id="ポイント" class="level3">
<h3 class="anchored" data-anchor-id="ポイント">ポイント</h3>
<p>GitHub アカウントを作成したら、VSCode にログインしておきましょう。</p>
<ol type="1">
<li><p>VSCode を開く</p></li>
<li><p>画面左下のアイコンをクリック</p>
<ul>
<li>GitHub でサインインを行う</li>
</ul></li>
</ol>
<p>GitHub にログインすることで、その後の作業がスムーズに進みます。</p>
<p>事前準備は以上です！</p>
</section>
</section>
</section>
<section id="sec-build-env" class="level1">
<h1>開発環境の構築</h1>
<p>1人でプロジェクトを進めると仮定して説明します。</p>
<p>共同プロジェクトの場合は、<a href="../240525_vscode_github/index.html">こちらの記事</a>を参考にして進めてみて下さい。</p>
<section id="github-リポジトリを作成" class="level2">
<h2 class="anchored" data-anchor-id="github-リポジトリを作成">GitHub リポジトリを作成</h2>
<ol type="1">
<li><p>テンプレートの <a href="https://github.com/yo5uke/template-Python">GitHub リポジトリ</a> にアクセス</p></li>
<li><p>画面右の「Use this template」から「Create a new repository」を選択</p></li>
<li><p>Repository name を記入</p></li>
<li><p>Private を選択</p>
<ul>
<li>通常のプロジェクトなら Private で OK</li>
</ul></li>
<li><p>「Create repository」をクリック</p></li>
</ol>
</section>
<section id="リポジトリをクローン" class="level2">
<h2 class="anchored" data-anchor-id="リポジトリをクローン">リポジトリをクローン</h2>
<ol type="1">
<li><p>VSCode を開く</p></li>
<li><p>画面左側のアイコンから「ソース管理」<sup>3</sup>を開く</p></li>
<li><p>「リポジトリの複製」を選択し、さらに「GitHub から複製」を選ぶ</p></li>
<li><p>リポジトリを選択し、クローン</p>
<ul>
<li><p>リポジトリは、「ユーザー名/リポジトリ名」の形式で表示されます。</p></li>
<li><p>クローンしたリポジトリを開くか問われるので、開いてください。</p></li>
</ul></li>
<li><p>画面右下に「コンテナーで再度開く」と出たらクリック</p>
<ul>
<li><p>出ない場合、画面左下「WSL: Ubuntu」<sup>4</sup>をクリックし、「コンテナーで再度開く」を選択してください。</p></li>
<li><p>初めて環境を構築する場合、ここでかなり時間がかかるので辛抱強く待ちましょう。</p></li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240621_python_container/image/reopen.png" class="img-fluid figure-img"></p>
<figcaption>「コンテナーで再度開く」をクリック</figcaption>
</figure>
</div>
<p>エクスプローラーを開き、<code>\\wsl.localhost\Ubuntu\home\ユーザー名</code> を確認してみてください。リポジトリ名と同じフォルダができていると思います。</p>
<p>Mac の場合は、ユーザー名の下にできているはずです。</p>
</section>
<section id="python-の設定" class="level2">
<h2 class="anchored" data-anchor-id="python-の設定">Python の設定</h2>
<p>この環境では、<code>pip</code> を使用してパッケージをインストールし、<code>requirements.txt</code> でパッケージを管理します。</p>
<section id="dvc-のインストール" class="level3">
<h3 class="anchored" data-anchor-id="dvc-のインストール">DVC のインストール</h3>
<p>まず初めに、データを管理するための <code>dvc</code> をインストールしてみます。</p>
<p>Google ドライブを使用してデータを管理するので、ドライブ上の任意の場所にデータを保存するためのフォルダを作っておいてください。</p>
<ol type="1">
<li><p>VSCode を開く</p></li>
<li><p>画面上「ターミナル」から「新しいターミナル」を開く</p></li>
<li><p>以下のコマンドを入力して実行</p></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb7" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install dvc dvc-gdrive</span></code></pre></div>
</div>
<ol start="4" type="1">
<li><p>次のコマンドを入力しておく</p>
<ul>
<li>最後の四角括弧で囲まれた部分を置き換えるので、まだ実行しないでください！</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb8" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> init <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> remote add <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-d</span> myremote gdrive://[Google DriveのフォルダID]</span></code></pre></div>
</div>
<ol start="5" type="1">
<li><p>Google ドライブで作成したフォルダの ID をコピー</p>
<ul>
<li>ID は、ドライブでフォルダを開いたときの URL で、最後のスラッシュ（~/folders/）より右側の部分です。</li>
</ul></li>
<li><p>[Google DriveのフォルダID]を置き換えて実行</p></li>
</ol>
<p>以上で DVC の設定ができました。</p>
<p>次に、今使った DVC パッケージを記録しておきましょう<sup>5</sup>。</p>
<p>以下のコマンドを実行してください。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb9" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> freeze <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> requirements.txt</span></code></pre></div>
</div>
<p>これで <code>requirements.txt</code> というファイルが生成され、その中にインストールしたパッケージの情報が保存されます。</p>
<p>新たなパッケージをインストールしたら、適宜実行して保存していってください。</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ちなみに
</div>
</div>
<div class="callout-body-container callout-body">
<p>パッケージは Docker にキャッシュされるので、1度インストールしてしまえば、別のプロジェクトではインストールしなくても使えます。</p>
<p>これはこのテンプレートの設定を使っていればの話なので、ローカルの Python であれば話は変わりますが…。</p>
</div>
</div>
<p>違う PC など、環境を作成した環境とは異なる環境で作業に移るときは、リポジトリをクローンした後、以下のコマンドで必要なパッケージをインストールできます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb10" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span></code></pre></div>
</div>
<p>作業の流れについては後ほど詳述します。</p>
</section>
</section>
<section id="データの管理" class="level2">
<h2 class="anchored" data-anchor-id="データの管理">データの管理</h2>
<p>データは今インストールした DVC で管理します。データは Google ドライブ上で保管されます。</p>
<ol type="1">
<li><p>ワーキングディレクトリに、<code>data</code> というフォルダを作成</p></li>
<li><p>データが入ったら、以下のコードを実行</p>
<ul>
<li><p><code>data</code> フォルダごとドライブに追加します。</p></li>
<li><p><code>data</code> フォルダは <code>.gitignore</code> に記載されているため、GitHub にはアップロードされません。</p></li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb11" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> add data/</span></code></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
データの入れ方
</div>
</div>
<div class="callout-body-container callout-body">
<p>データは、Windows のエクスプローラーや Mac の Finder から直接フォルダに入れて大丈夫です（通常の Windows や Mac での作業のように）。</p>
<p>データをプッシュした後に Google ドライブを見てもらえれば分かりますが、よくわからない形で保存されています。DVC の仕組みがそのような保存形式になっているからなので、決してファイルが破損しているわけではありません。</p>
<p>ちなみに Windows ユーザーの方で、一回ローカルに落としてから Linux にデータ等を入れたら <code>Zone.Identifier</code> というファイルができることがありますが、これは無視して大丈夫です。邪魔であればまとめて消してください。</p>
</div>
</div>
<ol start="3" type="1">
<li><p>データをアップロード</p>
<ul>
<li>以下のコードでデータをプッシュします。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb12" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> push</span></code></pre></div>
</div>
<p>最初は add と push をする過程でアカウントの認証が必要になりますが、表示に従って認証を進めてください<sup>6</sup>。</p>
<ol start="4" type="1">
<li><p>データのダウンロード</p>
<ul>
<li>パッケージと同様、別環境でデータをダウンロードするためには以下のコードを実行して下さい。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb13" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> pull</span></code></pre></div>
</div>
<p>これでデータが管理できます。</p>
</section>
<section id="作業終了時" class="level2">
<h2 class="anchored" data-anchor-id="作業終了時">作業終了時</h2>
<p>一連の作業を終えたら、GitHub にコミット、プッシュしましょう。</p>
<ol type="1">
<li><p>作業内容をコミット</p>
<ul>
<li><p>画面左側の「ソース管理」をクリックします。</p></li>
<li><p>ファイルにカーソルを当てると、右側に「+」が表示されます。これをクリックしてステージングします<sup>7</sup>。</p></li>
<li><p>画面上部の「メッセージを入力」にコミットメッセージ<sup>8</sup>を入力し、「✓コミット」をクリックしてください。</p></li>
</ul></li>
<li><p>プッシュ</p>
<ul>
<li><p>「ソース管理」の右側にある「…」をクリックし、「プッシュ」を選択してください。</p></li>
<li><p>これで、作業内容が GitHub にアップロードされます。</p></li>
</ul></li>
</ol>
<p>プッシュをするのは最後で良いと思います。例えば作業を3つのファイルで行ったとしたら、それぞれのファイルでコミットメッセージを書いてコミットし、最後にプッシュすれば OK です。</p>
<p>毎度毎度プッシュを行うより効率的ですね。</p>
</section>
</section>
<section id="作業の流れ" class="level1">
<h1>作業の流れ</h1>
<p>少し流れがごちゃごちゃしてしまったので整理します。</p>
<section id="作業手順" class="level2">
<h2 class="anchored" data-anchor-id="作業手順">作業手順</h2>
<ol type="1">
<li><p>事前準備を行う</p></li>
<li><p>リポジトリのクローン</p>
<ul>
<li><p>VSCode 内で行います。</p></li>
<li><p>クローン出来たら、「コンテナーで再度開く」をクリックし開発コンテナに移動します。</p></li>
</ul></li>
<li><p>DVC の設定をする（データを使わない場合は5にスキップ）</p>
<ul>
<li><p><code>pip install dvc dvc-gdrive</code></p></li>
<li><p><code>dvc init &amp;&amp; dvc remote add -d myremote gdrive://[Google DriveのフォルダID]</code></p></li>
</ul></li>
<li><p>データの保存</p>
<ul>
<li><p>ワーキングディレクトリに <code>data</code> フォルダを作成します。</p></li>
<li><p><code>data</code> 内にデータを追加していきます。</p></li>
<li><p>一通りデータを追加したら、<code>dvc add data/</code> を実行します。</p></li>
</ul></li>
<li><p>作業をする</p></li>
<li><p>パッケージを記録</p>
<ul>
<li><p><code>pip freeze &gt; requirements.txt</code></p></li>
<li><p>パッケージを追加したら適宜実行して下さい。</p></li>
<li><p>パッケージごとに逐一実行する必要はありません。最後にまとめて、で大丈夫です。</p></li>
</ul></li>
<li><p>git にコミット＆プッシュ</p>
<ul>
<li>VSCode 上でデータをコミット、プッシュします。</li>
</ul></li>
<li><p>データをプッシュする</p>
<ul>
<li><p><code>dvc push</code></p></li>
<li><p>これを実行することでドライブにデータが送られます。</p></li>
</ul></li>
</ol>
</section>
<section id="別の環境で再現する" class="level2">
<h2 class="anchored" data-anchor-id="別の環境で再現する">別の環境で再現する</h2>
<p>環境を変えた場合は、次の流れで環境を再現します。</p>
<ol type="1">
<li><p>事前準備</p></li>
<li><p>リポジトリのクローン</p>
<ul>
<li>開発コンテナに入ります。</li>
</ul></li>
<li><p>ターミナルで以下を実行</p>
<ul>
<li>Python のパッケージがインストールされ、データもダウンロードされます。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb14" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span>
<span id="cb14-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> pull</span></code></pre></div>
</div>
<p>あとは上の流れと同じです。</p>
</section>
</section>
<section id="おわりに" class="level1">
<h1>おわりに</h1>
<p>私自身はあまり Python に詳しくないのですが、少々使う機会があったので、これを機にと思いまとめてみました。</p>
<p>より効率的な環境構築方法があると思いますので、勉強し次第更新しようと思います。</p>
<p>間違いや書き漏れ、よりよい構築案がありましたらコメントいただけると幸いです。</p>
</section>
<section id="追記" class="level1">
<h1>追記</h1>
<p>2024/06/24：Docker のボリュームに関する説明を変更</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>求められない場合は、続けて <code>wsl</code> とだけ入力して実行してください。↩︎</p></li>
<li id="fn2"><p>もしくは Mac↩︎</p></li>
<li id="fn3"><p>上から3番目↩︎</p></li>
<li id="fn4"><p>Mac なら <code>&gt;&lt;</code>↩︎</p></li>
<li id="fn5"><p>記録しておくことで、違う PC に変えたり共同研究をしたりするなど違う環境で実行するときに、必要なパッケージを指定したバージョンで簡単にインストールすることができます。↩︎</p></li>
<li id="fn6"><p>私の場合認証の読み込みが終わらない問題によく直面するので、その際にはターミナルを消し、再度新しいターミナルで実行するようにしています。↩︎</p></li>
<li id="fn7"><p>ステージしていないとコミットできません。↩︎</p></li>
<li id="fn8"><p>どのような作業をしたのか↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Python</category>
  <category>VSCode</category>
  <category>Docker</category>
  <category>Ubuntu</category>
  <guid>https://yo5uke.github.io/tips/240621_python_container/</guid>
  <pubDate>Thu, 20 Jun 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240621_python_container/image/python-logo-only.png" medium="image" type="image/png" height="175" width="144"/>
</item>
<item>
  <title>環境構築における備忘録</title>
  <link>https://yo5uke.github.io/tips/240619_trouble_shooting/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>環境構築に関する記事をいくつかまとめてきましたが、頻繁にエラーに直面するので、その場合の対処法をまとめていきます。</p>
<p>本記事は随時更新します。</p>
<p>関連するエラーや不明点については一番下のコメントに書いていただけると幸いです。</p>
</section>
<section id="python-のパス" class="level1">
<h1>Python のパス</h1>
<ul>
<li><strong>発生環境</strong>：開発コンテナ内<sup>1</sup></li>
<li><strong>エラーが発生したコマンド</strong>：</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> init</span></code></pre></div>
</div>
<ul>
<li><strong>発生したエラー</strong>：<code>bash: /home/rstudio/.cache/pip/bin/dvc: /usr/local/bin/python: bad interpreter: No such file or directory</code></li>
<li><strong>発生タイミング</strong>：Python 環境をいじった後</li>
<li><strong>対処法</strong>：パッケージをアンインストールして再インストール</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> uninstall dvc</span>
<span id="cb2-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install dvc</span></code></pre></div>
</div>
<ul>
<li><strong>原因</strong>：
<ul>
<li>別の Dockerfile でバージョンの異なる Python 環境を作成しており、R 環境と Python 環境で同じ Docker ボリュームにマウントしていた。</li>
<li>その結果競合が起こり、エラーが発生したと考えられる。</li>
</ul></li>
<li><strong>解決策</strong>：一時的な対処なら上の方法で十分。根本的解決のためには R 環境と Python 環境で異なるボリュームを作成し、マウントする必要がある。</li>
</ul>
</section>
<section id="ファイル削除の失敗" class="level1">
<h1>ファイル削除の失敗</h1>
<ul>
<li><strong>発生環境</strong>：WSL（Windows 環境）</li>
<li><strong>発生タイミング</strong>：エクスプローラーからファイルを削除するとき</li>
<li><strong>発生したエラー</strong>：ファイルが削除できない（再試行やスキップしてもダメ）</li>
<li><strong>対処法</strong>：
<ol type="1">
<li>VSCode を開き、WSL に接続する。</li>
<li><code>Ctrl</code> + <code>J</code> でターミナルを開いて次のコマンドを入力し、<code>[フォルダ名]</code> を置き換えた上で実行する<sup>2</sup>。</li>
</ol></li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> rm <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-rf</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">フォルダ名</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
</div>
</section>
<section id="古い-tinytex" class="level1">
<h1>古い TinyTeX</h1>
<ul>
<li><strong>発生環境</strong>：開発コンテナ内<sup>3</sup></li>
<li><strong>発生タイミング</strong>：TinyTeX を使って Quarto コードをコンパイルしようとしたとき</li>
<li><strong>発生したエラー</strong>：次の画像の通り（TinyTeX が古いと言われる）</li>
</ul>
<p><img src="https://yo5uke.github.io/tips/240619_trouble_shooting/image/old_tinytex.png" class="img-fluid"></p>
<ul>
<li><strong>対処法</strong>：
<ol type="1">
<li>TinyTeX をアンインストール</li>
<li>TinyTeX を再インストール<sup>4</sup></li>
</ol></li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">tinytex<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uninstall_tinytex</span>()</span>
<span id="cb4-2">tinytex<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_tinytex</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dir =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/home/rstudio/.TinyTeX"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">force =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
</div>
</section>
<section id="vscode-で-wsl-が起動しない" class="level1">
<h1>VSCode で WSL が起動しない</h1>
<ul>
<li><strong>発生環境</strong>：Windows 11</li>
<li><strong>発生タイミング</strong>：VSCode で WSL を起動しようとしたとき</li>
<li><strong>発生したエラー</strong>：「VS Code Server for WSL closed unexpectedly」という表示と、「/node: not found」で終わるエラーが出力される。</li>
<li><strong>対処法</strong>：vscode-server の再インストール
<ul>
<li>以下のコードを Ubuntu のターミナルで実行してください。</li>
</ul></li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Ubuntu</strong></pre>
</div>
<div class="sourceCode" id="cb5" data-filename="Ubuntu" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-rf</span> ~/.vscode-server</span></code></pre></div>
</div>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p><a href="../240504_container/index.html">この記事</a>で紹介した開発コンテナを使用。↩︎</p></li>
<li id="fn2"><p><code>\\wsl.localhost\Ubuntu\home\user</code> 下にファイルがあると仮定している。フォルダのパスが異なる場合は、<code>cd [your_path]</code> でディレクトリを変更したうえで実行する。もしくは <code>[フォルダ名]</code> にパス含めて入力する↩︎</p></li>
<li id="fn3"><p><a href="../240504_container/index.html">この記事</a>で紹介した <code>TinyTeX</code> ボリュームを使用。↩︎</p></li>
<li id="fn4"><p><code>tinytex::reinstall_tinytex()</code> でもいけるのかもしれないけど、途中でエラーが出たので手順を踏むことにしました。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>備忘録</category>
  <guid>https://yo5uke.github.io/tips/240619_trouble_shooting/</guid>
  <pubDate>Tue, 18 Jun 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240619_trouble_shooting/image/vscode.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>【WSL】割り当てるメモリを増やす方法</title>
  <link>https://yo5uke.github.io/tips/240531_wsl_memory/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>WSL &amp; Docker を使用していて、使えるメモリを増やしたい、そんな時にどうすればよいのか解説します。</p>
<p>上にも書いてあるように、デフォルトでは PC の半分のメモリが WSL には割り当てられています。</p>
<p>すなわちメモリが 8GB の PC であれば 4GB が、16GB の PC であれば 8GB が割り当てられています。</p>
<p>プロジェクトによってはより多くのメモリを使いたいこともあると思うので、以下の方法を実行してみて下さい。</p>
<p>ちなみに Mac では Docker Desktop の設定から Resources で変更できます。</p>
</section>
<section id="手順" class="level1">
<h1>手順</h1>
<ol type="1">
<li><p>エクスプローラーを開く</p></li>
<li><p><code>c:</code> → <code>ユーザー</code> → 自分のユーザー と進む</p>
<ul>
<li>僕の場合だったら <code>C:\Users\yo5uk</code></li>
</ul></li>
<li><p>左上の「新規作成」から「テキストドキュメント」を選び、ファイル名を <code>.wslconfig</code> とする</p>
<ul>
<li><p>拡張子も全て消して名前を付けてください。<code>.wslconfig.txt</code> ではだめです。</p></li>
<li><p>もし拡張子がデフォルトで表示されない設定の場合は、表示されるよう設定を変更してから行って下さい。</p></li>
<li><p>エクスプローラー右上の「表示」→「表示」→「ファイル名拡張子」をオンにします。</p></li>
</ul></li>
<li><p>メモ帳など任意のテキストエディタで開く</p></li>
<li><p>中身を以下のように記述</p>
<ul>
<li><p>GB の部分は好きに置き換えてください。</p></li>
<li><p>8GB のPC を使っている場合には、もちろん 12GB は割り当てられません。</p></li>
</ul></li>
</ol>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb1-1">[wsl2]</span>
<span id="cb1-2">memory=12GB</span>
<span id="cb1-3">swap=8GB</span></code></pre></div>
<ol start="6" type="1">
<li>保存して閉じる</li>
</ol>
<p>以上です。これで WSL に割り当てられるメモリが増えました。</p>
<p>ちなみに <code>memory</code> は読んで字のごとくメモリを表しますが、ここでの <code>swap</code> は、WSL2 が使用するスワップファイルのサイズを設定することを意味します。スワップファイルを適切に設定することで、物理メモリが不足した場合でもシステムの安定性を維持することができます。</p>
</section>
<section id="おわりに" class="level1">
<h1>おわりに</h1>
<p>WSL に割り当てるメモリを増やす方法をご紹介しました。</p>
<p>プロジェクトによっては必要になることもあると思うので、ご参考まで。</p>


<!-- -->

</section>

 ]]></description>
  <category>WSL</category>
  <category>Windows</category>
  <category>備忘録</category>
  <guid>https://yo5uke.github.io/tips/240531_wsl_memory/</guid>
  <pubDate>Thu, 30 May 2024 15:00:00 GMT</pubDate>
</item>
<item>
  <title>【ワークフロー】VSCode で GitHub を使う</title>
  <link>https://yo5uke.github.io/tips/240525_vscode_github/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p><a href="../240504_container/index.html">以前</a> VSCode を用いた R 環境の構築方法についてご紹介しました。</p>
<p>その中で GitHub についても触れましたが、今回は VSCode で GitHub を使った作業の流れを詳しく紹介します。</p>
<p>基本的に共同研究を想定していますが、個人で使う場合も同様の流れで作業を進めることができます。</p>
<p>具体的な違いとして、個人作業の場合はブランチを作成したりしなくてもよいと思いますが、共同研究の場合はブランチを作成して作業を進めることが一般的です。</p>
</section>
<section id="事前準備" class="level1">
<h1>事前準備</h1>
<p><a href="../240504_container/index.html">こちらの記事</a>の手順は踏んでいるとします。</p>
<ol type="1">
<li><p>GitHub アカウントを作成している</p></li>
<li><p>VSCode で GitHub にログインする</p></li>
<li><p>コラボレーターとして登録する</p>
<ul>
<li>招待の詳細については記事をご覧ください。</li>
</ul></li>
</ol>
</section>
<section id="ワークフロー" class="level1">
<h1>ワークフロー</h1>
<section id="リポジトリをクローンする" class="level2">
<h2 class="anchored" data-anchor-id="リポジトリをクローンする">1. リポジトリをクローンする</h2>
<ol type="1">
<li><p>VSCode を開き、WSL に接続</p></li>
<li><p>画面左のアイコンで上から3つ目の「ソース管理」を選択</p></li>
<li><p>「リポジトリを複製」、「GitHub から複製」を順に選択</p></li>
<li><p>クローンしたいリポジトリを選択しOK をクリック<sup>1</sup></p>
<ul>
<li>リポジトリが表示されない場合は「ユーザー名/リポジトリ名」の書き方でクローンできます。</li>
</ul></li>
<li><p>クローンするディレクトリを選択</p>
<ul>
<li>特に理由がなければそのまま OK をクリックして下さい。</li>
</ul></li>
<li><p>クローンされる</p>
<ul>
<li><p>自動でクローンしたリポジトリが開かれます。</p></li>
<li><p>開発コンテナを使用する場合は「開発コンテナで再度開く」と出るので、選択してください。</p></li>
</ul></li>
</ol>
</section>
<section id="ブランチを作成する" class="level2">
<h2 class="anchored" data-anchor-id="ブランチを作成する">2. ブランチを作成する</h2>
<p>作業ブランチを作成します。デフォルトでは <code>main</code> ブランチになっているので、作業ブランチを作成して作業を進めます。</p>
<p>ブランチは、イメージで言うと「自分の作業用のコピー」です。そっくりそのままファイル等をコピーして作業を行い、完成したら <code>main</code> にくっつけてあげるという感じです。</p>
<p><code>main</code> ブランチは基本的に完成品を置いておくイメージなので、各自でブランチを作成して作業を進めてください。</p>
<ol type="1">
<li><p>画面左下の「main」をクリック</p></li>
<li><p>「新しいブランチを作成」を選択</p></li>
<li><p>ブランチ名を入力し、Enter キーを押す</p>
<ul>
<li><p>ブランチ名は、作業内容がわかるように命名するとよいと思います。</p></li>
<li><p>しかし何でも大丈夫です。</p></li>
</ul></li>
<li><p>ブランチが作成される</p>
<ul>
<li>画面左下に作成したブランチ名が表示されます。</li>
</ul></li>
</ol>
<p>これでブランチが作成されました。作業を進めていきましょう。</p>
</section>
<section id="ファイルを編集する" class="level2">
<h2 class="anchored" data-anchor-id="ファイルを編集する">3. ファイルを編集する</h2>
<p>作業を進めます。コードを書いたりデータを追加したり、何らかの作業が行われたとします。</p>
</section>
<section id="変更をコミットする" class="level2">
<h2 class="anchored" data-anchor-id="変更をコミットする">4. 変更をコミットする</h2>
<p>作業が終わったら、変更をコミットします。</p>
<ol type="1">
<li><p>画面左のアイコンで上から3つ目の「ソース管理」を選択</p></li>
<li><p>コミットするファイルを選択</p>
<ul>
<li><p>カーソルをファイルに当てると「+」が表示されるので、クリックしてステージングします。</p></li>
<li><p>すべてのファイルをステージングする場合は「変更」の右側にある「+」をクリックすれば OK です。</p></li>
</ul></li>
<li><p>コミットメッセージを入力</p>
<ul>
<li><p>コミットメッセージは、変更内容がわかるように簡潔に書くとよいと思います。</p></li>
<li><p>例: <code>Add new data</code></p></li>
</ul></li>
<li><p>「✓コミット」をクリック</p>
<ul>
<li>コミットが完了します。</li>
</ul></li>
</ol>
</section>
<section id="プッシュする" class="level2">
<h2 class="anchored" data-anchor-id="プッシュする">5. プッシュする</h2>
<p>コミットした内容をリモートリポジトリに反映させます。</p>
<ol type="1">
<li><p>「ソース管理」の右にある「…」をクリック</p>
<ul>
<li>カーソルを当てると出てきます。</li>
</ul></li>
<li><p>「プッシュ」を選択</p>
<ul>
<li><p>ブランチを公開するか聞かれたら、OK をクリックしてください。</p></li>
<li><p>プッシュが完了します。</p></li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240525_vscode_github/image/vscode-push.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>これでリモートリポジトリに変更が反映されました。</p>
<p>コミットしてすぐプッシュしたい場合は、コミットメッセージを入力した後に「✓コミット」の右側にある下矢印から「コミットしてプッシュ」を選択することで一括で行えます。</p>
</section>
<section id="プルリクエストを作成する" class="level2">
<h2 class="anchored" data-anchor-id="プルリクエストを作成する">6. プルリクエストを作成する</h2>
<p>作業が終わったら、プルリクエストを作成します。</p>
<p>現段階では、自分のブランチに反映させただけなので、これを <code>main</code> ブランチに反映させる必要があります。</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
この手続きを踏む理由
</div>
</div>
<div class="callout-body-container callout-body">
<p>プルリクエストを作成する理由は、他の人に自分の作業内容を確認してもらうためです。</p>
<p>プルリクエストを作成することで、他の人が自分の作業内容を確認し、問題がなければ <code>main</code> ブランチに反映させることができます。</p>
<p>もし全員が <code>main</code> ブランチに直接コミットしてしまうと、他の人の作業とコンフリクトする場合があったり、誤って動かないコードで上書きされてしまったりなど、問題が発生する可能性があります。</p>
<p>そのため、プルリクエストを作成して他の人に確認してもらいながら、問題がなければ <code>main</code> ブランチに反映させるという手順を踏むことが一般的です。</p>
</div>
</div>
<ol type="1">
<li><p>GitHub にアクセスし、リポジトリを開く</p></li>
<li><p>「Compare &amp; pull request」を選択</p>
<ul>
<li>以下のようなバナーが表示されるので、クリックしてください。</li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240525_vscode_github/image/pull-request.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<ol start="3" type="1">
<li><p>プルリクエストの内容を入力</p>
<ul>
<li><p>「Add a title」にはコミットメッセージが入力されていると思います。</p></li>
<li><p>「Add a description」には、必要に応じて作業内容や変更点などを詳しく書くとよいと思います。</p></li>
</ul></li>
<li><p>「Create pull request」をクリック</p>
<ul>
<li>プルリクエストが作成されます。</li>
</ul></li>
</ol>
<p>これでプルリクエストが作成されました。他の人に確認してもらいましょう。</p>
</section>
<section id="プルリクエストをマージする" class="level2">
<h2 class="anchored" data-anchor-id="プルリクエストをマージする">7. プルリクエストをマージする</h2>
<p>プルリクエストを作成したら、他の人に確認してもらい、問題がなければマージします。</p>
<ol type="1">
<li><p>リポジトリのページにアクセスし、「Pull requests」を開く</p></li>
<li><p>リクエストを選択して開く</p></li>
<li><p>問題がなければ「Merge pull request」をクリック</p>
<ul>
<li>問題ない場合「This branch has no conflicts with the base branch」と表示されます。</li>
</ul></li>
</ol>
<p><img src="https://yo5uke.github.io/tips/240525_vscode_github/image/pull-request-merge.png" class="img-fluid"></p>
<ol start="4" type="1">
<li><p>「Confirm merge」をクリック</p>
<ul>
<li>マージが完了します。</li>
</ul></li>
</ol>
</section>
<section id="ブランチを削除する" class="level2">
<h2 class="anchored" data-anchor-id="ブランチを削除する">8. ブランチを削除する</h2>
<p>プルリクエストがマージされたら、作業ブランチを削除します。ちなみにブランチは作業ごとに新しいものを作り、プルリクエストがマージされたら削除するという流れが推奨されるようです。</p>
<ol type="1">
<li><p>VSCode でリポジトリを開く</p></li>
<li><p>画面左側のアイコンから「ソース管理」を選択</p></li>
<li><p>「ソース管理」の右にある「…」をクリック</p></li>
<li><p>「ブランチ」から「ブランチを削除」を選択</p></li>
<li><p>削除するブランチを選択</p>
<ul>
<li>削除するブランチを選択して OK をクリック</li>
</ul></li>
<li><p>ブランチが削除される</p>
<ul>
<li>画面左下のブランチ名が <code>main</code> になっていることを確認してください。</li>
</ul></li>
</ol>
<p>これで作業ブランチが削除されました。次回別の作業を行うときは、新しいブランチを作成して作業を進めてください。</p>
</section>
<section id="ローカルリポジトリを更新する" class="level2">
<h2 class="anchored" data-anchor-id="ローカルリポジトリを更新する">9. ローカルリポジトリを更新する</h2>
<p>リモートリポジトリに変更が反映されたので、他の人はローカルリポジトリを更新します。</p>
<ol type="1">
<li><p>VSCode でリポジトリを開く</p></li>
<li><p>画面左下のブランチが <code>main</code> であれば自分の作業ブランチに切り替える</p>
<ul>
<li>画面左下のブランチ名をクリックして、切り替えてください。</li>
</ul></li>
<li><p>画面左のアイコンから「ソース管理」を選択</p></li>
<li><p>「変更の同期」と出ていたらそれを、出ていなければ「…」をクリックして「プル」を選択</p>
<ul>
<li><p>プルすることでリモートリポジトリの変更をローカルリポジトリに反映させます。</p></li>
<li><p>プルが完了します。ファイルを見てみてください。</p></li>
</ul></li>
</ol>
<p>これで他の人の変更が反映されたローカルリポジトリが得られました。</p>
<p>ここからは再び作業を進め、作業をサイクルさせていきます。</p>
</section>
</section>
<section id="まとめ" class="level1">
<h1>まとめ</h1>
<p>VSCode で GitHub を使った作業の流れを紹介しました。</p>
<p>基本的には、リポジトリをクローンして作業ブランチを作成し、作業を進め、変更をコミットしてプッシュし、プルリクエストを作成してマージするという流れです。</p>
<p>共同研究を行う場合は、このような流れで作業を進めることで、コンフリクトなどを回避しながら効率的に作業を進めることができます。</p>
<p>ぜひ参考にしてみてください。</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>Enter キーでも OK です。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>VSCode</category>
  <category>GitHub</category>
  <guid>https://yo5uke.github.io/tips/240525_vscode_github/</guid>
  <pubDate>Fri, 24 May 2024 15:00:00 GMT</pubDate>
</item>
<item>
  <title>TeX Live を使わずに LaTeX 環境を作る！</title>
  <link>https://yo5uke.github.io/tips/240520_latex/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>こんにちは、Windows ユーザーです。</p>
<p>TeX Live はインストールするのが面倒だし、使い方もよくわからないので<sup>1</sup>、別の方法で<img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> を使えるようにしました。</p>
<p>また、Mac での方法も併せてご紹介します。</p>
<p>これまで TeX Live に苦労していた方や Overleaf を使っていた方は、ぜひ試してみてください。</p>
</section>
<section id="作業手順" class="level1">
<h1>作業手順</h1>
<p>前提として、VSCodeはインストールされているとします。もしまだの方は<a href="../240504_container/index.html#sec-vscode-setting">こちら</a>を参考にインストールしてください<sup>2</sup>。</p>
<section id="wsl-ubuntu-と-homebrew-の準備" class="level2">
<h2 class="anchored" data-anchor-id="wsl-ubuntu-と-homebrew-の準備">0. WSL, Ubuntu と Homebrew の準備</h2>
<p>Windows のローカルでもできるとは思うのですが、Ubuntu でやる方が楽なので、WSL2 を使って Ubuntu でやります。何言ってるかわからない方は、気にしないでください。僕もよくわかりません。</p>
<p>事前準備は少し面倒だけど、一度やってしまえば楽、みたいなイメージで使っています。とりあえず使えればよいと思っている一大学院生なので、そのあたりは許してください。</p>
<p>Mac の方は、Homebrew を使って TinyTeX をインストールしていきます。</p>
<p>既にこれらの準備が出来ている方は、飛ばしてください。</p>
<section id="sec-install-ubuntu" class="level3">
<h3 class="anchored" data-anchor-id="sec-install-ubuntu">0-1. WSL と Ubuntu のインストール（Windows）</h3>
<p>まずは Windows Subsystem for Linux（WSL）をインストールします<sup>3</sup>。</p>
<p>PowerShell を管理者権限で起動<sup>4</sup>し、以下のコマンドを実行します。</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">wsl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--install</span></span></code></pre></div>
<p>もし再起動を求められたら、再起動してください。インストールはこれだけです。</p>
<p>インストールができたらユーザー名とパスワードの設定が求められるので、設定します。</p>
<p>これは何でも構いません。<code>sudo</code> コマンドを使う際にパスワードが必要になりますが、本当に簡単なもので大丈夫です<sup>5</sup>。</p>
<p>また、パスワード入力の際に、入力しても画面上には表示されませんが、きちんと入力されていますので慌てず続けてください。</p>
</section>
<section id="homebrew-のインストールmac" class="level3">
<h3 class="anchored" data-anchor-id="homebrew-のインストールmac">0-2. Homebrew のインストール（Mac）</h3>
<p>Mac ユーザーは Homebrew を使って諸々インストールしていくので、まだの方はここでインストールしてください。</p>
<ol type="1">
<li><p>ターミナルを開く</p>
<ul>
<li>アプリ一覧から「ターミナル」を探してください。</li>
</ul></li>
<li><p>以下のコマンドを入力して実行</p>
<ul>
<li>パスワードを求められるので、入力してください。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/bin/bash</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div>
</div>
</section>
</section>
<section id="tinytex-のインストール" class="level2">
<h2 class="anchored" data-anchor-id="tinytex-のインストール">1. TinyTeX のインストール</h2>
<p>TeX Live はインストールが面倒なので、TinyTeX という軽量な <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> ディストリビューションを使います。R Markdown でもよく使われているので、馴染みがある方も多いかもしれません。</p>
<p>しかし今回は、R は使いません。目標とするのは TeX Live の代替として、簡潔に <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> を使えるようにすることです。</p>
<section id="windows-でのインストール" class="level3">
<h3 class="anchored" data-anchor-id="windows-でのインストール">1-1. Windows でのインストール</h3>
<p>Windows では、Ubuntu を開いて以下のコマンドを実行します。</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">wget</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-qO-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://yihui.org/tinytex/install-bin-unix.sh"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sh</span></span></code></pre></div>
<p>これで TinyTeX のインストールは完了です。簡単ですね。</p>
</section>
<section id="mac-でのインストール" class="level3">
<h3 class="anchored" data-anchor-id="mac-でのインストール">1-2. Mac でのインストール</h3>
<p>Mac の方は、ターミナルを開いて以下のコマンドを実行してください。</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-sL</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://yihui.org/tinytex/install-bin-unix.sh"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sh</span></span></code></pre></div>
</section>
</section>
<section id="vscode-での設定" class="level2">
<h2 class="anchored" data-anchor-id="vscode-での設定">2. VSCode での設定</h2>
<section id="拡張機能のインストール" class="level3">
<h3 class="anchored" data-anchor-id="拡張機能のインストール">2-1. 拡張機能のインストール</h3>
<p>VSCode で LaTeX を使うためには、拡張機能をインストールする必要があります。</p>
<p>画面左の拡張機能アイコン <img src="https://yo5uke.github.io/tips/240520_latex/image/extention.png" class="img-fluid"> をクリックし、検索バーに「LaTeX」と入力します。すると、LaTeX および LaTeX Workshop という拡張機能が表示されるので、2つをインストールします<sup>6</sup>。</p>
</section>
<section id="設定の変更" class="level3">
<h3 class="anchored" data-anchor-id="設定の変更">2-2. 設定の変更</h3>
<p>拡張機能をインストールしたら、設定を変更します。</p>
<p>画面左下の管理ボタンから「設定」で設定画面を開き<sup>7</sup>、右上にある <img src="https://yo5uke.github.io/tips/240520_latex/image/json.png" class="img-fluid"> をクリックして <code>settings.json</code> を開きます。</p>
<p>以下の <code>{}</code> の中身を設定に追加します。もし既に何か設定がある場合は、最後をカンマで区切り、改行して追加してください。</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-2">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"latex-workshop.latex.tools"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-3">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-4">          <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"name"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"latexmk"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-5">          <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"command"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"latexmk"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-6">          <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"args"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-7">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-synctex=1"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-8">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-interaction=nonstopmode"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-9">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-file-line-error"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-10">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-xelatex"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-11">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%DOC%"</span></span>
<span id="cb5-12">          <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb5-13">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-14">    <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-15">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"latex-workshop.latex.recipes"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-16">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-17">          <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"name"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"latexmk (xelatex)"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-18">          <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"tools"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-19">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"latexmk"</span></span>
<span id="cb5-20">          <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb5-21">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-22">    <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-23">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"latex-workshop.view.pdf.viewer"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tab"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-24">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"latex-workshop.latex.clean.fileTypes"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-25">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.aux"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.bbl"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.blg"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.idx"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.ind"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.lof"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.lot"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.out"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.toc"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.acn"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> </span>
<span id="cb5-26">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.acr"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.alg"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.glg"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.glo"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.gls"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.ist"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.fls"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.log"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.fdb_latexmk"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.synctex.gz"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-27">        <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">//</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">for</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">Beamer</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">files</span></span>
<span id="cb5-28">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_minted*"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.nav"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.snm"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.vrb"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-29">    <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-30">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"latex-workshop.latex.autoBuild.run"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"onBuilt"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-31"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
<!--
次に、画面上部の「ターミナル」→「新しいターミナル」よりターミナルを開きます^[Windows なら `Ctrl` ＋ `Shift` ＋ `@` でもいけます]。そして以下のコマンドを実行してください。

```{.bash filename="Windows ユーザー"}
sudo apt-get update
sudo apt-get install chktex
```

`sudo` コマンドを使うとパスワードが求められるので、[先ほど](#sec-install-ubuntu)設定したパスワードを入力してください。
-->
<p>これで設定は完了です。</p>
</section>
</section>
<section id="動作確認" class="level2">
<h2 class="anchored" data-anchor-id="動作確認">3. 動作確認</h2>
<p>ここからは Windows も Mac も共通です。</p>
<p>はじめに今回使うフォントをインストールしましょう。VSCode のターミナルで以下のコマンドを実行してください。</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tlmgr</span> install ipaex</span></code></pre></div>
<p>次に、VSCode で新しいファイルを作成し、GitHub Copilot が作ってくれた以下のコードを回してみます<sup>8</sup>。</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb7-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">\documentclass</span>{<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">article</span>}</span>
<span id="cb7-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">\usepackage</span>{<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">bookmark</span>} </span>
<span id="cb7-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">\usepackage</span>{<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">fontspec</span>} </span>
<span id="cb7-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">\usepackage</span>{<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zxjatype</span>} </span>
<span id="cb7-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">\usepackage</span>[ipaex]{<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">zxjafont</span>}</span>
<span id="cb7-6"></span>
<span id="cb7-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">\title</span>{サンプルドキュメント}</span>
<span id="cb7-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">\author</span>{あなたの名前}</span>
<span id="cb7-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">\date</span>{今日の日付}</span>
<span id="cb7-10"></span>
<span id="cb7-11"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">\begin</span>{<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">document</span>}</span>
<span id="cb7-12"></span>
<span id="cb7-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">\maketitle</span></span>
<span id="cb7-14"></span>
<span id="cb7-15"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">\section</span>{導入}</span>
<span id="cb7-16"></span>
<span id="cb7-17">これはサンプルのセクションです。</span>
<span id="cb7-18"></span>
<span id="cb7-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">\subsection</span>{サブセクション}</span>
<span id="cb7-20"></span>
<span id="cb7-21">これはサンプルのサブセクションです。</span>
<span id="cb7-22"></span>
<span id="cb7-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">\end</span>{<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">document</span>}</span></code></pre></div>
<p>これを保存し、右上の緑の三角ボタン <img src="https://yo5uke.github.io/tips/240520_latex/image/latex-compile.png" class="img-fluid"> をクリックすると、PDF ファイルが生成されます。</p>
<p>しかし、おそらくここでエラーに直面するでしょう。次のセクションでエラーの解決法について説明します。</p>
</section>
<section id="エラーの解決" class="level2">
<h2 class="anchored" data-anchor-id="エラーの解決">4. エラーの解決</h2>
<p>この段階のエラーのほとんどは、パッケージがインストールされていないことが原因です。</p>
<p>コンパイルすると右下にエラーの表記とともに「Open compiler log」と出ると思うので、それをクリックしてエラーログを開きます。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240520_latex/image/open-compiler-log.png" class="img-fluid figure-img"></p>
<figcaption>これを押します。</figcaption>
</figure>
</div>
<p>エラーログを少し遡ってみると、どのパッケージがインストールされていないかがわかります。例えば、「! LaTeX Error: File ‘xltxtra.sty’ not found.」と出た場合、<code>xltxtra</code> パッケージがインストールされていないことがわかります。</p>
<p>その場合、ターミナルに戻り以下のコマンドを実行してください。</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tlmgr</span> install xltxtra</span></code></pre></div>
<p>これでインストールできますが、使い始めのうちは何度か似たようなエラーが出るかもしれません。エラーが出たらエラーログを見て、同様の方法で必要なパッケージをインストールしてください。</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
エラーのトラップ
</div>
</div>
<div class="callout-body-container callout-body">
<p>先ほどのサンプルコードを実行しようとすると、</p>
<p>! LaTeX Error: File `xeCJK.sty’ not found.</p>
<p>というエラーが途中で出てきます。しかし、<code>tlmgr install xeCJK</code> としてもインストールできません。これは、<code>xeCJK</code> というパッケージが存在しないためです。</p>
<p>代わりに、<code>ctex</code> パッケージをインストールすることで解決できます。<code>ctex</code> パッケージが <code>xeCJK</code> を含んでいるためです。</p>
<p>ややこしいですが、これで試してみてください。</p>
</div>
</div>
</section>
<section id="再び動作確認" class="level2">
<h2 class="anchored" data-anchor-id="再び動作確認">5. 再び動作確認</h2>
<p>エラーを解消するうちに、足りないパッケージがインストールでき、最終的には問題なくコンパイルできるようになるはずです。</p>
<p>日本語で使う場合、フォントをインストールしていないミスが多いので、気を付けてください。</p>
<p>最終的に次のように出力できました。</p>
<p><img src="https://yo5uke.github.io/tips/240520_latex/image/latex-output.png" class="img-fluid"></p>
</section>
</section>
<section id="おわりに" class="level1">
<h1>おわりに</h1>
<p>以上で、TeX Live を使わずに <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> 環境を作る方法を紹介しました。</p>
<p>TinyTeX は、R 上だと必要なパッケージが自動でインストールされる<sup>9</sup>ので、それに比べるとやや不便ですが、簡潔に <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> を使えるようになるので、一度試してみる価値はあると思います。</p>
<p>TeX Live や VSCode の設定に苦心している方は、ぜひ試してみてください。</p>
<p>また、何かエラー等ありましたらコメントでお知らせください。</p>
</section>
<section id="参考" class="level1">
<h1>参考</h1>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://yihui.org/tinytex/">TinyTeX</a></p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://gedevan-aleksizde.github.io/tinytex-doc-ja/index.html">TinyTeX 非公式日本語版ドキュメント</a></p>
</div>
</div>
</div>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>実際には少し使っていたので、並程度には使えます（笑）↩︎</p></li>
<li id="fn2"><p>日本語設定などもしておくと便利かもしれません↩︎</p></li>
<li id="fn3"><p>Windows における WSL のインストールについては<a href="../240504_container/index.html#sec-wsl2-setting">こちら</a>でも触れています。↩︎</p></li>
<li id="fn4"><p>アプリ一覧から右クリックすれば「詳細」→「管理者として実行」で使えます。↩︎</p></li>
<li id="fn5"><p><a href="https://www.youtube.com/watch?v=odDJ3QvlF2g">こちらの動画</a>の 4:42~ あたりを見てみてください。パスワードは「a」です。a。↩︎</p></li>
<li id="fn6"><p>怪しかったら、<code>mathematic.vscode-latex</code> と <code>James-Yu.latex-workshop</code> をそれぞれ入力すれば確実です。↩︎</p></li>
<li id="fn7"><p>Windowsなら <code>Ctrl</code> ＋ <code>,</code> で、Mac なら<code>command</code> ＋ <code>,</code> でもいけます。↩︎</p></li>
<li id="fn8"><p>少し日本語フォントなどの設定を加えています。↩︎</p></li>
<li id="fn9"><p>その割によく手動でインストールさせられる気がしますが…↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Windows</category>
  <category>Mac</category>
  <category>Ubuntu</category>
  <category>LaTeX</category>
  <guid>https://yo5uke.github.io/tips/240520_latex/</guid>
  <pubDate>Sun, 19 May 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240520_latex/image/latex-output.png" medium="image" type="image/png" height="78" width="144"/>
</item>
<item>
  <title>【R】アーカイブされたパッケージを使う</title>
  <link>https://yo5uke.github.io/tips/240516_archived_pkg/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>因果推論を勉強している人にはおなじみの <a href="https://mixtape.scunning.com/">Mixtape</a> ですが、昨年勉強中にこの中の合成コントロール法の章でパッケージがインストールできない問題に直面しました。</p>
<p>よく調べてみると、当時<sup>1</sup> <code>SCtools</code> パッケージはアーカイブされてしまっており、<code>install.packages('SCtools')</code> ではインストールができないことが判明しました。</p>
<p>現在<sup>2</sup>では復活してインストールできるようになっていますが、そんなときに備えて対処法をまとめます。</p>
</section>
<section id="作業の流れ" class="level1">
<h1>作業の流れ</h1>
<section id="アーカイブされたパッケージを探す" class="level2">
<h2 class="anchored" data-anchor-id="アーカイブされたパッケージを探す">アーカイブされたパッケージを探す</h2>
<p>CRAN の<a href="https://cran.r-project.org/src/contrib/Archive/">アーカイブ</a>にアクセスして、アーカイブされたパッケージを探します。</p>
<p>例えば当時アーカイブされていた <code>SCtools</code> を探すと、次のようになります。</p>
<p><img src="https://yo5uke.github.io/tips/240516_archived_pkg/sctools-archived.png" class="img-fluid"></p>
<p>この中で最新のものを右クリックし、リンクをコピーしてください。</p>
</section>
<section id="rstudio-を開く" class="level2">
<h2 class="anchored" data-anchor-id="rstudio-を開く">RStudio を開く</h2>
<p>続いて RStudio を開き、スクリプトに次のコードを入力してください。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">url <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://cran.r-project.org/src/contrib/Archive/SCtools/SCtools_0.3.2.tar.gz"</span></span>
<span id="cb1-2">pkgFile <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SCtools_0.3.2.tar.gz"</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">download.file</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">url =</span> url, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">destfile =</span> pkgFile)</span></code></pre></div>
</div>
<p>ここで URL はコピーしたものに変え、<code>pkgFile</code> は URL の最後の <code>.tar.gz</code> 部分をコピペしてください。</p>
<p>実行するとエラーが出るかもしれませんが、それは依存しているパッケージがインストールされていないということです。エラーを読んでみて、足りなそうなパッケージを以下のコードの <code>c()</code> にまとめて入れて実行し、 改めて <code>download.file()</code> を実行してみてください。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xxx"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yyy"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zzz"</span>))</span></code></pre></div>
</div>
<p>そしてパッケージをインストールします。次のコードを実行してください。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pkgs=</span>pkgFile, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">repos=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>)</span></code></pre></div>
</div>
<p>最後に以下を実行して下さい。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlink</span>(pkgFile)</span></code></pre></div>
</div>
<p>以上です。インストール出来たのではないでしょうか。</p>
</section>
</section>
<section id="おわりに" class="level1">
<h1>おわりに</h1>
<p>備忘録的にアーカイブされたパッケージのインストール方法をまとめました。</p>
<p>出会ってしまった際にはご活用ください。</p>
</section>
<section id="参考" class="level1">
<h1>参考</h1>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://stackoverflow.com/questions/24194409/how-do-i-install-a-package-that-has-been-archived-from-cran">stackoverflow</a></p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://yoshi-nishikawa.hatenablog.com/entry/2017/10/27/143615">CRANから消えた”Archived R package”をインストールしたい</a></p>
</div>
</div>
</div>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>2023年秋↩︎</p></li>
<li id="fn2"><p>2024年5月16日↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>R</category>
  <guid>https://yo5uke.github.io/tips/240516_archived_pkg/</guid>
  <pubDate>Wed, 15 May 2024 15:00:00 GMT</pubDate>
</item>
<item>
  <title>【R】プロジェクトを使う</title>
  <link>https://yo5uke.github.io/tips/240515_rproj/</link>
  <description><![CDATA[ 




<section id="r-プロジェクトについて" class="level1">
<h1>R プロジェクトについて</h1>
<p>R プロジェクトは、RStudio で作成できるプロジェクトです。プロジェクトを作成すると、プロジェクトのためのディレクトリが作成され、そのディレクトリ内で作業することになります。</p>
<p>プロジェクトを作成すると、プロジェクトのための <code>.Rproj</code> ファイルが作成され、RStudio でそのファイルを開くことで、プロジェクトが開かれます。</p>
</section>
<section id="作り方" class="level1">
<h1>作り方</h1>
<ol type="1">
<li><p>RStudio を開く</p></li>
<li><p>画面右上の <img src="https://yo5uke.github.io/tips/240515_rproj/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAIsUlEQVR4Xu3XeWyT5x0HcLbuaCemtaq0Tlo1oQ5UrWJtpW4tZe1GIYybkBLYAi2EK5yDhbZchUCBEcIRDAmE3LcJTuLEcew4jhM7cZzEfm2/l4/X5+szvp3Yjh2HBLz3jZMAGbBA9+ce6atXsiL/Pv49v8d5PGvW/9cLLJoi9pO15bx3F+WxUpcXcTfsbUbeolljr8RisR9M/9v/zaLRXvqIUvfuZ7cZaYkVrXdWljQbttZ2mdfWdQweYEv16yo52MoSFjehkHVmVVnbqm9Yil9JY7EfT3+bGa+5N9g/eNN2vsLb9G3rShhlawp46jSGD3qsyIMv4U6dDRTSFFvGUY380HnHVMYrbVEkEK1V53Za9TtZ0oV66u4ijWlnLplRZwjSRXti0/z8Vef2Z1FN/mzFxU2LVhcwNy1rJiVt66yDTjABoCLYr2iVOvVNtqiaJNjBGbYR2A6UbjeHEapxkF0U4fMRTUGUZppCKaZIvAdIlTjEFxNJF/pUZ8TGdG9zRJpcjUPTKxoK19X1f6PFJrg4/Qe6ytTxTfQ+LP/XsPnp3PlvMtyUzcVDyjYnvswx3cfYnmIuEbhJucI3GCNIHWWMELDQ0SCSKVhENnIlbjKdH6k2hBEqvRBhCw+Cag0RqDJlOuH4FzIozgl1PbtYUp6Nt0ViNPypfEtSm3gv3q8HfFlAXh/scZnaHSOoBzfA5AAgCz3fZDpHIXo9gi8p0ji+dtVYeDLnG5/8uXOwF9OtEbmHKCPfXKsJZJCEfovdpj05dogXGkYgioNETIgmbKJFGCDyBWZzXBKoHGkc6HABzT/L6a6kC7Qhmr0A5pc0GLL6FQGL/TqvTmo3VJlDGAN/SNQnTUCfZEj8i84zI5+mM6OLj/DC+2rABx/utUW3F0h7V/4DTvy/kFm9Hy7UVeiGYDKtCGwlMhtpU+ZJbXjGUKd+0SHMpAlsVnylAH1QYE+OKs09vIU4IAAC3f7HgBC3xjQSaTZFkYrNB79DbnJcbFXN5gtx53ZErMls1Nv+MMhVnRXkdiZr3Ijq9k9zjyFG7kFOdGPDrMiK861B65DLuySxGI7L9L7M8W4mwK58WJtGK02PQCqzTGASmRLCxp7JkBAhO8dk/Dc9yRsR0RG1fuwQsRmoUhw785K8dghOhi4Dtu0q5kiVw7qUFLk/cYDtfLwvhrp/WtSi/Mm7DIUa4fgCsMYUGkaA6rH82A8zwfw3JO0OocBln0IYJiDQJ3BK/nwUGM0nQr4c4munOxWjmSLTaEcudWWWtg38MFBZrhQFZCVYEOyMv2w9EkAsgtPBXT/B2BsHMC2hSUMSxCoxwck83fcHd6W02kvUlilf2XwHJcBE5wlNKPzdtCj6y93uUlAmSYsjQPuPS8g3gUSICAB3knA8GOAdec4niM1gOHtgtpg0rUO53t7G8Pv7WWEr/bYkUIs9BTABGImgPEuEMXJLnBJQH8cQJ8A/G57zfDb2+4Mv3a6YnTuLlp0+Vme95LQguajflkxCdBNAEzxLXisCy8CaJkG2JYjsJcpbJJPa1tc8/fTwyQgD/bKZgQg8kSAaBqgczrAPLEFO+MAcgYSGFz7rirANHdHffRQDYSTAHIGSqdtwQwBsXHA5CA+BIwAbHt4/BSMd4AAbCeGsERlBxKa2uyXAQu8/Gybl5yDKyIrEj8FZBeGnzAHMwJMdIEEeB4CmiYAvycBuV32EswJJDAJgNRKngKE7MKKczxvAToQ34ZnDOILAa62aTTHamQ4CVj6LXNgQ77A/dvC2sgWNth/ttei2l0uNc8jEJtzeh37K2FzHhKQP20bngvQRgDIGUjJavfP23F39M2t1NHXN1eNvbGlavTNK3dG0tpVpo1MmWdZbW9o/uGm8JzU2hHyO4ECeBES8KQvpCcCegjA5CCOzwEBYDui8hvKfu1hocqxhSsbIJ62TJkVK9b4oVtqD/wZs8N1QepSZMN+5LzMrdrH11mSmZAvuRn2ftVjMuaqgvCMOxAHxACi5eBtlUt7vFfn3MNH/BkSkzVX7cFqLBGoxjwEVptC8nJjQJ6vG4AWszucmXKPIhsZRB7NGalbvVtgsCY1I/4vuWrXCbFTV6SLyh8CkMcBXwv1gwVqt+6UWO86KFT7/0X8WyaKaJiuUYjhHAXp/SNgnS0qv2uNgFRrRF5hisgLDAPQEjbfeQFyoxQ0CI9HRT5D8DUi40/VEJwB+LA0Pm5LYikGt/P1ju/kHs1JidM2BVhIb/3l3g7Uewm2Wal4SMsjbkGtRDjkbSh+IQEb+kfBcrUXpfQZsBOMPvwUW6Y/36XGPq3neC5AxOtE4fO9/ar9dRL8CEejO8bVaSlEcYoqMpVrqgjyrdSr3c7HHYksReAtmiF+IfmkWvja6gZRTwZgEjLsUZjne/AYoJkANBKps4/IyWR1YRhFZlEV4QFwCbvTmQl6FBkCo+ZrFqq/JCMxZOFHM4mIwqeIbhBbgi6li5BZp2M/nNqCFB76xqoGUdqSOoFkZwfcfRvzEMVHkTjg/mOAXKI4RWpSXYds6J8Zbe6vOEpdBt+IXYF9CEUVmlZ8CM5WhJGjYodmAxtUJjJ7apObJZ/nS2M/myr+6Dodi/0omQksWtkgoiQ19cpOSgyyanNYQQLqHXFACeZFyGtXCdGBBKIDF2Afmo34kYvEaSAzWTgTCigOCnF9YpMY+7yp71oqG14w498K5B1+T7vm14mNPbuX0TvBXR0QRFE61TXmCFiNh0ByCB8FkANIIq4Sx/E7GXkCMMPaRpFmI1t85FgvPocWi700vcaMVykee/mLFnBREqMnd31zr+p4n0GdrxtEpgDEEJJH76TYpk3lQXhKC9CR0iLdmqsOvk58kIf7/H0X+SmOCu2/IfZw30ZWX2dqm1z7cRPX90+hzpTCBkxbuVLqzlZ0KQOL/fyZv4K+7yLfnOaOzd7EkSe8Q226u6ZRdPR4l/kdZv9TBuu/rH8DYKkbNvCO3j8AAAAASUVORK5CYII=" class="img-fluid"> をクリックし、「New Project…」を選択</p>
<ul>
<li><p>ここで、新しいディレクトリを作るか、既存のディレクトリに作るかを選択できます。</p></li>
<li><p>新しくフォルダを作って作業をしたい場合は新しいディレクトリを、既にデータフォルダなどを含む作業ディレクトリがある場合は既存のディレクトリを選択します。</p></li>
<li><p>新規ディレクトリの場合、特に目的が決まっていなければ「New Project」を選んでもらって大丈夫です。</p></li>
<li><p>「Browse」より、プロジェクトを作成するディレクトリを選択します。</p></li>
<li><p>既存のディレクトリを選択した場合、そのディレクトリ内に <code>.Rproj</code> ファイルが作成されます。</p></li>
</ul></li>
</ol>
<ul>
<li><p>自動でプロジェクトが開く</p>
<ul>
<li>右上を見てもらうと、プロジェクト名になっていることが分かると思います。</li>
</ul></li>
</ul>
<p>2回目以降開くときは、同様に右上から「Open Project」を選ぶか、エクスプローラーもしくは Finder から <code>.Rproj</code> ファイルをダブルクリックして開くことができます。</p>
</section>
<section id="プロジェクトの強みを活かす" class="level1">
<h1>プロジェクトの強みを活かす</h1>
<section id="強み" class="level2">
<h2 class="anchored" data-anchor-id="強み">強み</h2>
<p>プロジェクトの強みとして、そのディレクトリ内で作業が完結することが挙げられます。</p>
<p>データやソースコードは、プロジェクトのディレクトリ内に保存しておきましょう。その上で強みを発揮するのが、<code>here</code> パッケージを使った相対パスの指定です。</p>
<p>例えば、次のようなディレクトリであるとします。</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode css code-with-copy"><code class="sourceCode css"><span id="cb1-1">project-root/</span>
<span id="cb1-2">├── proj<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.Rproj</span></span>
<span id="cb1-3">├── code/</span>
<span id="cb1-4">│   ├── script1<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.R</span></span>
<span id="cb1-5">│   ├── script2<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.R</span></span>
<span id="cb1-6">│   └── utils/</span>
<span id="cb1-7">│       ├── helper1<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.R</span></span>
<span id="cb1-8">│       └── helper2<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.R</span></span>
<span id="cb1-9">└── data/</span>
<span id="cb1-10">    ├── raw/</span>
<span id="cb1-11">    │   ├── dataset1<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.csv</span></span>
<span id="cb1-12">    │   └── dataset2<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.csv</span></span>
<span id="cb1-13">    └── processed/</span>
<span id="cb1-14">        ├── processed1<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.csv</span></span>
<span id="cb1-15">        └── processed2<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.csv</span></span></code></pre></div>
<p>このもとで話を進めます。</p>
</section>
<section id="here-パッケージ" class="level2">
<h2 class="anchored" data-anchor-id="here-パッケージ"><code>here</code> パッケージ</h2>
<p><code>here</code> パッケージを使うと、<code>.Rproj</code> ファイルがあるディレクトリを基準として、相対パスを指定することができます。</p>
<p>まずはインストールしましょう。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"here"</span>)</span></code></pre></div>
</div>
<p>次に読み込みます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(here)</span></code></pre></div>
</div>
<p>例えばここで、<code>processed1.csv</code> を使いたいとします。</p>
<p><code>C:</code> から始まるパスを指定していたのでは長いですし、<code>setwd()</code> でワーキングディレクトリを設定していたとしても、その都度設定するのも非効率です<sup>1</sup>。</p>
<p>パッケージの主要関数である <code>here()</code> は、<code>.Rproj</code> があるディレクトリ起点とした相対パスを使用可能です。</p>
<p>百聞は一見に如かずということで、次のコードをご覧ください。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> readr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/processed/processed1.csv"</span>))</span></code></pre></div>
</div>
<p>&lt;ポイント&gt;</p>
<ul>
<li><p>引数がデータのところで <code>here()</code> を使う</p></li>
<li><p><code>.Rproj</code> があるディレクトリからのパスを書く</p></li>
<li><p><code>here()</code> 内ではダブルクォーテーションでパスを囲む</p></li>
</ul>
<p>このようにすれば、フォルダの位置が PC 内で変わるなどの環境の変化に対応しながらコーディングができます。</p>
</section>
</section>
<section id="おわりに" class="level1">
<h1>おわりに</h1>
<p>今回はプロジェクトを使った環境のメリットと、<code>here()</code> パッケージをご紹介しました。ぜひ論文などのプロジェクトでは、R にもプロジェクトを作って作業してみてください。</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>共同研究を行うなら PC ごとに環境が異なりますから、なおさら非効率的です。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>R</category>
  <guid>https://yo5uke.github.io/tips/240515_rproj/</guid>
  <pubDate>Tue, 14 May 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240515_rproj/thumbnail.png" medium="image" type="image/png" height="102" width="144"/>
</item>
<item>
  <title>【日本語版】クリーンなスライドを Quarto で作る！</title>
  <link>https://yo5uke.github.io/tips/240514_clean_slide/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p><a href="../240512_beamer/index.html">別記事</a>で、Beamer 風の Reveal.js スライドをご紹介しましたが、英語にしか対応していませんでした。というのも、あのフォントと釣り合う日本語のフォントが思いつかなかったからです。</p>
<p>今回は、別のデザインで日本語にも対応したスライドのテンプレートをご紹介します。デザインに困っている方はぜひ使ってみてください！</p>
</section>
<section id="テーマ" class="level1">
<h1>テーマ</h1>
<p>テーマは、<a href="https://quarto.org/docs/extensions/listing-revealjs.html">Quarto 公式</a>でも紹介されている <code>clean-revealjs</code> をアレンジしたものです。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240514_clean_slide/clean-revealjs.png" class="img-fluid figure-img"></p>
<figcaption>clean-revealjs （<a href="https://github.com/grantmcdermott/quarto-revealjs-clean?tab=readme-ov-file">GitHub リポジトリ</a>より）</figcaption>
</figure>
</div>
<p>そして、今回ご紹介するスライドはこちらです。</p>
<div>
<iframe class="slide-deck" src="demo/demo1/demo.html"></iframe>
</div>
<p>タイトルやヘッダーなどのフォントは、<a href="https://fonts.google.com/">Google Fonts</a> から、<a href="https://fonts.google.com/specimen/Zen+Maru+Gothic?query=zen+">Zen Maru Gothic</a> を使っています。</p>
<p>また、サブヘッダーも追加しています。サブヘッダーが水色っていうのがいいですよね、なんか。</p>
</section>
<section id="ポイント" class="level1">
<h1>ポイント</h1>
<section id="とりあえず見てみよう" class="level2">
<h2 class="anchored" data-anchor-id="とりあえず見てみよう">とりあえず見てみよう</h2>
<p>このスライドは、結構嬉しいポイントとして、移動ボタンが準備されているということがあります。</p>
<p>これはどういうことか、こちらをご覧ください。</p>
<div>
<iframe class="slide-deck" src="demo/demo2/demo.html"></iframe>
</div>
<p>結構すごくないですか？PDF だと図や表に飛べたりしますが、自分でスライドを作っていて戻るのめんどいな、と思うことがあったので、結構重宝しています。</p>
</section>
<section id="使い方" class="level2">
<h2 class="anchored" data-anchor-id="使い方">使い方</h2>
<p>使い方はデモスライドに書いた通り、<code>[[図へ]{.button}](#sec-cars)</code> です。これをする上で必要な準備があるので、それをまとめます。</p>
<section id="スライドにラベルを付ける" class="level3">
<h3 class="anchored" data-anchor-id="スライドにラベルを付ける">スライドにラベルを付ける</h3>
<p>この機能、個人的には便利だなと思うのですが、図には直接飛べないのが玉に瑕です。要は図に飛ぶのではなく、図があるスライドに飛ぶ必要があるということです<sup>1</sup>。</p>
<p>ラベルを付けるには、次のようにします。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">## ヘッダー</span></span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">### サブヘッダー {#sec-hogehoge}</span></span></code></pre></div>
</div>
<p><code>hogehoge</code> の部分は適宜変更してください。波括弧で囲み、<code>#sec-</code> で始めることでラベルを付けることができます。セクションの場合は必ず <code>#sec-</code> で始める必要があるので注意してください。</p>
</section>
<section id="ボタンを作る" class="level3">
<h3 class="anchored" data-anchor-id="ボタンを作る">ボタンを作る</h3>
<p>先述の通り、ボタンを作るには、任意の場所で次のように書きます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1">[<span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">図へ</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>{.button}](#sec-hogehoge)</span></code></pre></div>
</div>
<p>中の <code>[]</code> は表示したいテキストで、<code>()</code> の中はラベル名です。ラベル名はセクションのラベル名を指定してください。</p>
</section>
<section id="帰れないと意味がない" class="level3">
<h3 class="anchored" data-anchor-id="帰れないと意味がない">帰れないと意味がない</h3>
<p>図（があるセクション）へ飛ぶボタンを作ったら、図から戻るボタンも作りましょう。せっかく何ページも飛んでいったのに、戻るのに1スライドずつ戻っていたのでは意味がありません。</p>
<p>例えば、次のようにします。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb3-1">[<span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">戻る</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>{.button}](#sec-hogehoge)</span></code></pre></div>
</div>
<p>これで、図から戻るボタンが作れます。1つの図を複数の箇所から参照する場合、「○○へ戻る」<sup>2</sup>として、複数のボタンを作るとよいでしょう。</p>
<p>横に並べたいときは Quarto の機能を活かして、</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1">:::: {.columns}</span>
<span id="cb4-2">::: {.column width="50%"}</span>
<span id="cb4-3">[<span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">セクション1へ戻る</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>{.button}](#sec-hogehoge)</span>
<span id="cb4-4">:::</span>
<span id="cb4-5"></span>
<span id="cb4-6">::: {.column width="50%"}</span>
<span id="cb4-7">[<span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">セクション2へ戻る</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>{.button}](#sec-fugafuga)</span>
<span id="cb4-8">:::</span>
<span id="cb4-9">::::</span></code></pre></div>
</div>
<p>とすれば、横に並べてボタンを配置できます<sup>3</sup>。</p>
</section>
<section id="scss-ファイルをゲット" class="level3">
<h3 class="anchored" data-anchor-id="scss-ファイルをゲット">scss ファイルをゲット</h3>
<p>このスライドを使うには、<a href="https://github.com/yo5uke/clean-slide">こちら</a>をクローンするか、ZIP ファイルダウンロードするかして、<code>clean-slide.scss</code> を入手してください<sup>4</sup>。</p>
<p>これを Quarto ファイルと同じディレクトリに置いてください。</p>
<p>重ねてになりますが、詳しいスライドの作り方は<a href="../240512_revealjs/index.html">こちら</a>を参照してください。</p>
</section>
</section>
</section>
<section id="おわりに" class="level1">
<h1>おわりに</h1>
<p>今回は、日本語にも対忘したスライドのテンプレートをご紹介しました。</p>
<p>Quarto などの Markdown でスライドを作るのは、パワポより体裁が整うし<sup>5</sup>、個人的に Beamer よりは簡単に作れると思います。</p>
<p>ぜひ、Quarto でスライドを作ってみてください！</p>
</section>
<section id="参考" class="level1">
<h1>参考</h1>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://quarto.org/docs/extensions/listing-revealjs.html">Quarto Extensions: clean-revealjs</a></p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://github.com/grantmcdermott/quarto-revealjs-clean?tab=readme-ov-file">GitHub: clean-revealjs</a></p>
</div>
</div>
</div>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>図の参照自体はもちろんできます。Quarto での相互参照の仕方については<a href="../240509_cross_reference/index.html">こちら</a>↩︎</p></li>
<li id="fn2"><p>○○はセクションやサブセクションの名前など↩︎</p></li>
<li id="fn3"><p>この書き方の詳細や Quarto の機能については<a href="../240512_revealjs/index.html">こちら</a>↩︎</p></li>
<li id="fn4"><p>もはや新しい scss ファイルを手動で作って、中身をコピーするでもいいですよ。↩︎</p></li>
<li id="fn5"><p>スライド作成に自信がある方はすみません…↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Quarto</category>
  <category>R</category>
  <guid>https://yo5uke.github.io/tips/240514_clean_slide/</guid>
  <pubDate>Mon, 13 May 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240514_clean_slide/thumbnail.png" medium="image" type="image/png" height="95" width="144"/>
</item>
<item>
  <title>【スライド】Beamer の Metropolis テーマを Reveal.js で再現したい</title>
  <link>https://yo5uke.github.io/tips/240512_beamer/</link>
  <description><![CDATA[ 




<section id="metropolis-との出会い" class="level1">
<h1>Metropolis との出会い</h1>
<p><img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> の Beamer で使える Metropolis テーマがおしゃれだと思ったので使ってみたい！というモチベーションです。</p>
<p>普段は Reveal.js を使っているので、Metropolis テーマを Reveal.js で再現したいと思い、できる限り頑張ってみました。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240512_beamer/image/metropolis.png" class="img-fluid figure-img"></p>
<figcaption>Metropolis テーマはこんな感じです（<a href="https://github.com/matze/mtheme">GitHub リポジトリ</a>より）</figcaption>
</figure>
</div>
</section>
<section id="reveal.js-で再現" class="level1">
<h1>Reveal.js で再現</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Reveal.js で、と書いていますが、Quarto 経由で使用することを想定しています。</p>
<p>Quarto での使い方については<a href="https://quarto.org/docs/presentations/revealjs/">こちら</a>、Reveal.js については<a href="https://revealjs.com/">こちら</a>を参照してください。</p>
</div>
</div>
<p><a href="https://github.com/yo5uke/modern-revealjs/tree/main">こちら</a>の GitHub リポジトリに、Metropolis テーマをもとに作成した scss ファイルがあります。</p>
<p>私もよくわからずに作成しましたが、scss ファイルはデザインを指定しているファイル、みたいな理解で良いと思います（笑）</p>
</section>
<section id="使い方" class="level1">
<h1>使い方</h1>
<ol type="1">
<li><p><a href="https://github.com/yo5uke/modern-revealjs/tree/main">この</a>リポジトリをクローン、もしくは scss ファイルをダウンロード</p>
<ul>
<li>リポジトリ自体は整えてないので、クローンしなくても scss ファイルがダウンロードできれば大丈夫です。</li>
</ul></li>
<li><p>Quarto コードがあるディレクトリに scss ファイルを配置</p>
<ul>
<li>要は <code>.qmd</code> ファイルと <code>.scss</code> ファイルが同じフォルダに入っていれば大丈夫です。</li>
</ul></li>
<li><p><code>.qmd</code> ファイルに以下のように記述</p></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Title"</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">author</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Author"</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">institute</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Institute"</span></span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">date</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2024-05-12"</span></span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">revealjs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb1-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">            </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> default</span></span>
<span id="cb1-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">            </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> metropolis.scss</span></span>
<span id="cb1-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slide-number</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb1-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">date-format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> long</span></span>
<span id="cb1-13"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
</div>
<ol start="4" type="1">
<li><p><code>.qmd</code> ファイルをレンダリング</p>
<ul>
<li>R Markdown で言うところの Knit です。</li>
</ul></li>
</ol>
</section>
<section id="デモ" class="level1">
<h1>デモ</h1>
<div>
<iframe class="slide-deck" src="demo/"></iframe>
</div>
<p>Metropolis からヘッダー部分をアレンジしています<sup>1</sup>。</p>
</section>
<section id="まとめ" class="level1">
<h1>まとめ</h1>
<p>Reveal.js はシンプルでデザイン性も高く、コードの実行結果もそのまま表示できるというメリットがあります。</p>
<p>ぜひ試しに使ってみてください。</p>
<p>ちなみに、Quarto では Beamer も使えますので、普通に Metropolitan 本家を使うこともできます。単に普段使っている Reveal.js で使いたかったから作ったというだけです。笑</p>
</section>
<section id="参考" class="level1">
<h1>参考</h1>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://github.com/matze/mtheme">Metropolis テーマ</a></p>
</div>
</div>
</div>
</section>
<section id="追記" class="level1">
<h1>追記</h1>
<p>2024/5/13：このテーマをもとに、Quarto でスライドを作る方法を紹介しました。<a href="../240512_revealjs/index.html">こちら</a>も併せてご覧ください。</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>塗りつぶしがうまくいかなかっただけです。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Quarto</category>
  <category>Reveal.js</category>
  <category>R</category>
  <guid>https://yo5uke.github.io/tips/240512_beamer/</guid>
  <pubDate>Sat, 11 May 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240512_beamer/image/revealjs.png" medium="image" type="image/png" height="83" width="144"/>
</item>
<item>
  <title>【Quarto】使い方解説！Reveal.js でスライドを作ろう</title>
  <link>https://yo5uke.github.io/tips/240512_revealjs/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>皆さん、スライドを作るときに何を使っていますか？PowerPoint ですか？<img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> の Beamer ですか？</p>
<p><a href="../240512_beamer/index.html">こちらの記事</a>で Reveal.js を使ったスライドをご紹介しましたが、今回はスライドを作る上での tips をご紹介します。</p>
<p>今回は Quarto の使い方と併せて、スライドの作り方を書いていこうと思います。</p>
</section>
<section id="準備" class="level1">
<h1>準備</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>この記事は R ユーザーをターゲットに書いています。しかし、Quarto は多言語でも使えるのがメリットなので、もちろん Python などでも使うことができます。</p>
<p>今回は RStudio で使うことを前提としますが、Python でも使いたいという方は<a href="../240508_jupyter/index.html">こちらの記事</a>を参考に VSCode で始めてみてください。コードの書き方はこの記事と同じです。</p>
</div>
</div>
<p>細かいことは、Quarto の<a href="https://quarto.org/docs/guide/">公式ガイド</a>をお読みください。この記事では、とりあえずこれができればいいかな、というところをピックアップして解説します。</p>
<section id="ドキュメントを開く" class="level2">
<h2 class="anchored" data-anchor-id="ドキュメントを開く">ドキュメントを開く</h2>
<p>RStudio を開き、任意のディレクトリをワーキングディレクトリとして設定します。</p>
<p>RStudio 左上の <img src="https://yo5uke.github.io/tips/240512_revealjs/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAkCAYAAADl9UilAAACvElEQVR4Xu2XTWgTQRSA0/wo4k9VghH14MWzB+9S0YMHbxJBsZDdTdJS3aTBghQPKRRUrF6EWIpNtjSKGo0XTS96CA00CUVpmqot2tLGHvTSNDYFE0jGfUkj4bn52e0EL/vBO+3MvI+Zt29nNRoVlf/BQ36nTrB0tvmYYJvALGsEJg+h9TEp/SgT3DvMsedu2tvNZrMOT20dXvaiKLEqBqkXouQPo4e1dfb17Xa73Vq8DD0CZp1WsNzDAo3i/LM7a6Fw9FM4lpidnE4mlEQknryFdf4i7sAQTgqBwc8h7O8fk0zmFykUCnh4U4Ac9ilTPr5/EjYrBuGJT5CNjSwpFot4SkOkxQLmHZo6NYXBzytx6AlPFldWyO9cDk9piKSYzsdcxUmUiEHcDr8ka+m07COVFBNbwmucQKnYmVeDJPV9leRk7pq0mMCkakk0S2W+yc+TL/MLJJvdxEPqIimmKTdPKmL6MY7MJJJkPZPBQ+pSS2yTptiHjzOlOpODpJjYVJdoiZn81+mJ6b3sm8rCUoHBz6vj9IsBeke5Z4TrwgmUivWHBHrF3+Hu3Q8fZJxErphx/BoJT0XptQu4usAtASeSKzYQGieJ2Tl6DRaAq8u+YW4MJ2tW7FLwPonFp0u7Re2TBMB96rLTaWp/xD3FSRsFSEWiMfJtcYnyR3wLUU5vtTpNxx/Y+g2jbM2aq8QRv4O4xeODnQKp1lx7tgA5u/2G8YrDcerEkO3uAQ83ZfCyP8WXI2fwccWjfic5Gxgk7gk/mRR3KZGcKx0f7JRSKaChGADHCjVn5fljbBd/0trd22Hrdl4YEZ4vQ/OEAp9f+FoSgkKHmlJyfNU0JVYB3laXy7WL41wHLT09h9++i3xOp9dLzRP6VD6f39YuVSNLDAOT8YK0UMXkoorJZVti8FMKC7Qi6v7wqqi0iD86M3fnY/LjkAAAAABJRU5ErkJggg==" class="img-fluid"> より、「Quarto Document」を選択してください。</p>
<p>さらに「Presentation」を選び、タイトル、著者名を必要に応じて付け、Reveal JS を選びます。エンジンは Knitr<sup>1</sup>、Use visual markdown editor はオフにしておいてください。</p>
<p>最後に Create を押します。</p>
<p>すると、次のようなヘッダーだけがある文書が出てくると思います。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"[任意のタイトル]"</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> revealjs</span></span>
<span id="cb1-4"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
</div>
<p>これでドキュメントは無事開けました。そしたら <img src="https://yo5uke.github.io/tips/240512_revealjs/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAkCAYAAAD7PHgWAAABBklEQVR4Xu2XMQrCQBBFBQvR6wgJHsEDpHVjBDvvoBhbI3bWCkZbFUyhFrYiEat0WgmC6AVkdQqbIVmWZAOi82C64b+/bDWZDEEQP4phTLMaa9d003bTGMgu1psF7JVGNzuWPdzs18GDz443rgrIcndXbvW8g1axGfZKo7P2eBXc+WB74a3FGXtiA1kwzfnpqTF7hL3SwDfAaz+BqvjkwYADe6WhglQwJlQwKVQwKakVTGOoYNL5z4JxwBlUMEwqAu9SwTCpCLxLBcOkIvCusoKT9/WFQ6OkIvCukoJwt5rO0sehUVIReBem6ng+OLBXmnKjn4PbGM5PeKnqgXIlo5vHXoL4Nl4ZYqbbEGA7+wAAAABJRU5ErkJggg==" class="img-fluid"> を押して、任意のフォルダに保存してください。</p>
</section>
<section id="テーマ" class="level2">
<h2 class="anchored" data-anchor-id="テーマ">テーマ</h2>
<p>このままでもスライドは作れますが、味気ないスライドになってしまいますので、テーマを設定します。</p>
<p>テーマは、先ほどのヘッダーを次のように書き加えることで使うことができます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"[任意のタイトル]"</span></span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb2-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">revealjs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb2-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> night</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  # この部分を変える</span></span>
<span id="cb2-6"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
</div>
<p>もとのヘッダーと変えた時のヘッダーでそれぞれ <img src="https://yo5uke.github.io/tips/240512_revealjs/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABbElEQVRYhe3WP0scURSH4WdnNyGIlQS/gGyXMkG0Fi2SwmotExBBSLNFUoSgWNit2FvIFoKFRYoQC3HtQ/ALiFilFASLBBI2f4pZYRxmZyfO7izB/cHlztxz7jkvw5xzLyONdN9VentwnjfGKp5gHVdZNzVqVRDkzY4NvMZnTP3r5n4ATHbmagdipmiAUuT5MVpYKBIgrjF8RG1YAPAQ+1jJAlAVEl/jT2xIWIvbu6mMHbxJc6pgD9O9SO+oEhqYwHsJ0AGeDih5VO/QxIMkgHIBAPASnzAeByhS8zjCo2EBwCzqNy8VtxtJkvLaUxXoXWZ57N3GchSgaB0LK2IoAC0s4ncUoF1Q8g94ju/RxQCnBSRvCg+nn3FDgFc4wY8BJd8W/nS/kowVnGEuJUCeMlvDZppDJUfwNLWFd8XdXo6DAPiGJRxmce4HQDsS5xIv8CXr5n70ga+d+ULY5zMnpz9foI5n2BLeqv4v/QUmf1bR1/DM0QAAAABJRU5ErkJggg==" class="img-fluid"> Render してみてください。</p>
<p>ちなみに、Quarto 公式では、以下のようなテーマが紹介されています。</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p><code>beige</code></p></li>
<li><p><code>blood</code></p></li>
<li><p><code>dark</code></p></li>
<li><p><code>default</code></p></li>
<li><p><code>league</code></p></li>
<li><p><code>moon</code></p></li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li><p><code>night</code></p></li>
<li><p><code>serif</code></p></li>
<li><p><code>simple</code></p></li>
<li><p><code>sky</code></p></li>
<li><p><code>solarized</code></p></li>
</ul>
</div>
</div>
<p>それぞれ特徴があるので、いろいろ試してみてください。</p>
<p>今回は、私が作成した Reveal.js のテンプレートを使っていきます。現状英語にしか対応していないのが難点ですが、いずれ日本語に対応したものも作る予定です。</p>
<p><a href="https://github.com/yo5uke/modern-revealjs">GitHub リポジトリ</a>にアクセスし、クローンするか、<code>&lt;&gt; Code</code> より ZIP ファイルをダウンロードしてください<sup>2</sup>。使うのは <code>modern_theme.scss</code> です。このファイルを準備し、先ほどのドキュメントを保存したフォルダと同じフォルダに移しておいてください。</p>
<p>そしたらヘッダーを次のように修正してください。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"[任意のタイトル]"</span></span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb3-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">revealjs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb3-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb3-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> default</span></span>
<span id="cb3-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> modern_theme.scss</span></span>
<span id="cb3-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slide-number</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  # スライド番号を付ける</span></span>
<span id="cb3-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">date-format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> long</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">   # 日付のフォーマットを整える</span></span>
<span id="cb3-10"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
</div>
<p>これでテーマの設定もできました。</p>
</section>
</section>
<section id="quarto-での書き方" class="level1">
<h1>Quarto での書き方</h1>
<section id="表紙" class="level2">
<h2 class="anchored" data-anchor-id="表紙">表紙</h2>
<p>表紙はヘッダーに書いた要素で構成されます。<code>title</code> の他には、<code>author</code>（著者）や <code>date</code>（日付）、 <code>institute</code>（所属組織） を追加することを想定しています<sup>3</sup>。</p>
</section>
<section id="本スライド" class="level2">
<h2 class="anchored" data-anchor-id="本スライド">本スライド</h2>
<p>スライドでは、<code>##</code> を使ってページを区切っていきます<sup>4</sup>。</p>
<p>例えば次のように書きます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb4-2"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">title:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> "Title"</span></span>
<span id="cb4-3"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">subtitle:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb4-4"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">format:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb4-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  revealjs: </span></span>
<span id="cb4-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    theme: </span></span>
<span id="cb4-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">      - default</span></span>
<span id="cb4-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">      - modern_theme.scss</span></span>
<span id="cb4-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    slide-number: true  # スライド番号を付ける</span></span>
<span id="cb4-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    date-format: long   # 日付のフォーマットを整える</span></span>
<span id="cb4-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb4-12"></span>
<span id="cb4-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">## First page</span></span>
<span id="cb4-14"></span>
<span id="cb4-15">"First page" is the headline text. Note that a half-width space is required before the heading.</span>
<span id="cb4-16"></span>
<span id="cb4-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">## Second page</span></span>
<span id="cb4-18"></span>
<span id="cb4-19">You can break a line by leaving one line blank.</span>
<span id="cb4-20"></span>
<span id="cb4-21">Like this.</span></code></pre></div>
</div>
<p><code>"First page" is ~</code> と <code>You can break ~</code> が本文です。</p>
<p>通常の Markdown と基本的な使い方は一緒ですが、改行するには空行を入れる必要があります。1回改行しただけでは、スライド上では改行されません。見出し部分にも適用されますので、1行空けてから <code>## 見出し</code> と書くようにしてください。</p>
<div>
<iframe class="slide-deck" src="demo/demo1/demo.html"></iframe>
</div>
</section>
<section id="色遣い" class="level2">
<h2 class="anchored" data-anchor-id="色遣い">色遣い</h2>
<p>このテーマは基本的に派手なデザインではありませんが、2色を文字に使えます。<span class="alert">alert</span> と、<span class="accent">accent</span> です。</p>
<p>これらの色にしたい文字や文を <code>[]</code> で囲んだ後、<code>{.alert}</code> および <code>{.accent}</code> と入力します。<code>[alert]{.alert}</code> といった感じです。</p>
<p>基本的には alert があれば概ね大丈夫な気がしますが、accent も入れておきました。</p>
</section>
<section id="callout" class="level2">
<h2 class="anchored" data-anchor-id="callout">callout</h2>
<p>callout ブロックを紹介します。</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>これは Note</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>これは Tip</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>これは Warning</p>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>これは Important</p>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>これは Caution</p>
</div>
</div>
<p>これらのことです。</p>
<p>要点をまとめたいときや、断り事を書きたいときなどに重宝します。</p>
<p>書き方は、</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb5" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1">::: {.callout-note}</span>
<span id="cb5-2">これは Note</span>
<span id="cb5-3">:::</span>
<span id="cb5-4"></span>
<span id="cb5-5">::: {.callout-tip}</span>
<span id="cb5-6">これは Tip</span>
<span id="cb5-7">:::</span>
<span id="cb5-8"></span>
<span id="cb5-9">::: {.callout-warning}</span>
<span id="cb5-10">これは Warning</span>
<span id="cb5-11">:::</span>
<span id="cb5-12"></span>
<span id="cb5-13">::: {.callout-important}</span>
<span id="cb5-14">これは Important</span>
<span id="cb5-15">:::</span>
<span id="cb5-16"></span>
<span id="cb5-17">::: {.callout-caution}</span>
<span id="cb5-18">これは Caution</span>
<span id="cb5-19">:::</span></code></pre></div>
</div>
<p>こうです。</p>
<p>ちなみに、ブロックのタイトルを変えたいときや、長いので折りたたみたいときは、</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb6" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1">::: {.callout-note collapse=true}</span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">## ここがタイトル</span></span>
<span id="cb6-3"></span>
<span id="cb6-4">collapse=true で折りたためる Note</span>
<span id="cb6-5">:::</span></code></pre></div>
</div>
<p>と書くことで、</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ここがタイトル
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>collapse=true で折りたためる Note</p>
</div>
</div>
</div>
<p>とできます。</p>
</section>
<section id="リスト" class="level2">
<h2 class="anchored" data-anchor-id="リスト">リスト</h2>
<p>箇条書きなどのリスト形式が使えます。書き方はシンプルで、</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Markdon</strong></pre>
</div>
<div class="sourceCode" id="cb7" data-filename="Markdon" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1">箇条書きリスト</span>
<span id="cb7-2"></span>
<span id="cb7-3"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>Item 1</span>
<span id="cb7-4"></span>
<span id="cb7-5"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - </span>Item 1-1</span>
<span id="cb7-6">    </span>
<span id="cb7-7"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>Item2</span>
<span id="cb7-8"></span>
<span id="cb7-9">順序付きリスト</span>
<span id="cb7-10"></span>
<span id="cb7-11"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">1. </span>Item 1</span>
<span id="cb7-12"></span>
<span id="cb7-13"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">2. </span>Item 2</span></code></pre></div>
</div>
<p>箇条書きリストでは2段階を、順序付きリストでは1段階の利用を想定しています。</p>
<p>アイテムの前には半角スペースを忘れないでください。また、2段階目を使うときには4つ分のスペースが必要です。</p>
</section>
<section id="列を分ける" class="level2">
<h2 class="anchored" data-anchor-id="列を分ける">列を分ける</h2>
<p>箇条書きを10個も書くと、2列にしたいことがありますよね。そんなときは次のようにしてください。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb8" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb8-1">:::: {.columns}</span>
<span id="cb8-2">::: {.column width="50%"}</span>
<span id="cb8-3"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>Item 1</span>
<span id="cb8-4"></span>
<span id="cb8-5"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>Item 2</span>
<span id="cb8-6">:::</span>
<span id="cb8-7"></span>
<span id="cb8-8">:::{.column width="50%"}</span>
<span id="cb8-9"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>Item 3</span>
<span id="cb8-10"></span>
<span id="cb8-11"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>Item 4</span>
<span id="cb8-12">:::</span>
<span id="cb8-13">::::</span></code></pre></div>
</div>
<p>このように書くと、</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>このように</p></li>
<li><p>なります。</p></li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li><p><code>width</code> を変えれば</p></li>
<li><p>列の幅を調節できます。</p></li>
</ul>
</div>
</div>
</section>
<section id="コード" class="level2">
<h2 class="anchored" data-anchor-id="コード">コード</h2>
<p>R や Python のコードも書けます。</p>
<p>特筆すべきは、コードをハイライトできることです。</p>
<p>例えば、次のコードをご覧ください。</p>
<div>
<iframe class="slide-deck" src="demo/demo2/demo.html"></iframe>
</div>
<p>上のコードでは <code>select()</code> と <code>filter()</code> の行がハイライトされています。</p>
<p>また、スライド上で右に進んでみてください。順にハイライトされています。</p>
<p>これらのコードは、次のように書いています。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb9" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```{.r code-line-numbers="5-6"}</span></span>
<span id="cb9-2"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">library(tidyverse)</span></span>
<span id="cb9-3"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">library(gt)</span></span>
<span id="cb9-4"></span>
<span id="cb9-5"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">df &lt;- mtcars |&gt; </span></span>
<span id="cb9-6"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  select(1:5) |&gt; </span></span>
<span id="cb9-7"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  filter(disp &gt;= 400)</span></span>
<span id="cb9-8"></span>
<span id="cb9-9"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">gt(df)</span></span>
<span id="cb9-10"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```</span></span>
<span id="cb9-11"></span>
<span id="cb9-12"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```{.r code-line-numbers="|5|6"}</span></span>
<span id="cb9-13"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">library(tidyverse)</span></span>
<span id="cb9-14"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">library(gt)</span></span>
<span id="cb9-15"></span>
<span id="cb9-16"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">df &lt;- mtcars |&gt; </span></span>
<span id="cb9-17"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  select(1:5) |&gt; </span></span>
<span id="cb9-18"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  filter(disp &gt;= 400)</span></span>
<span id="cb9-19"></span>
<span id="cb9-20"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">gt(df)</span></span>
<span id="cb9-21"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```</span></span></code></pre></div>
</div>
<p>このように <code>code-line-numbers</code> で指定することができます。<code>|5|6</code> は5行目と6行目が順にハイライトされるということですね。</p>
<p>他にも細やかな設定ができるので、Quarto の<a href="https://quarto.org/docs/presentations/revealjs/#code-blocks">公式ガイド</a>をご覧ください。</p>
</section>
<section id="図や表" class="level2">
<h2 class="anchored" data-anchor-id="図や表">図や表</h2>
<p>図や表がどのように表示されるのか見てみましょう。</p>
<p>デフォルトでは図のキャプションが左寄りになっていますが、中央になるように修正しています。</p>
<p>また、ここでは例としてコードを載せていますが、デフォルトではコード表示はオフです。表示したい場合はチャンク内で <code>echo: true</code> を設定してください<sup>5</sup>。</p>
<div>
<iframe class="slide-deck" src="demo/demo3/demo.html"></iframe>
</div>
</section>
</section>
<section id="おわりに" class="level1">
<h1>おわりに</h1>
<p>ここまで基本的な Quarto でのスライド作成についてご紹介しました。</p>
<p>ここを押さえておけばスライドを作る分には困らないのではないかと…思います。</p>
<p>他に使う要素があれば適宜追加していきます！</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>Python の場合は Jupyter↩︎</p></li>
<li id="fn2"><p>クローンするほどでもないので、ダウンロードでいいと思います。リポジトリ整えてなくてすみません^^;↩︎</p></li>
<li id="fn3"><p>私のテーマの場合↩︎</p></li>
<li id="fn4"><p><code>#</code> も使えるのですが、今回のテーマでの使用は想定していません。↩︎</p></li>
<li id="fn5"><p>チャンクオプションについて、詳しくは<a href="../240509_chunk_option/index.html">こちら</a>↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Quarto</category>
  <category>Reveal.js</category>
  <category>R</category>
  <guid>https://yo5uke.github.io/tips/240512_revealjs/</guid>
  <pubDate>Sat, 11 May 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240512_revealjs/thumbnail.png" medium="image" type="image/png" height="87" width="144"/>
</item>
<item>
  <title>【Quarto】チャンクオプションまとめてみた【R Markdown】</title>
  <link>https://yo5uke.github.io/tips/240509_chunk_option/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>どうも Quarto ユーザーです。普段チャンクオプションをよく忘れるので、備忘録も兼ねてまとめます。おそらく R Markdown も同じです。</p>
<p>直感的な分かりやすさ重視です。</p>
<p>私が普段使うものに偏っているかもしれませんが、ご了承ください。</p>
</section>
<section id="前提" class="level1">
<h1>前提</h1>
<p>Quarto でも R Markdown と同じようなチャンクオプションの書き方ができるのですが、ここでは Quarto 独自の書き方で進めます。</p>
<p>理由は単純に私が好んで使っているからです。</p>
<section id="r-markdown-の書き方" class="level2">
<h2 class="anchored" data-anchor-id="r-markdown-の書き方">R Markdown の書き方</h2>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R Markdown</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="R Markdown" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```{r cars, echo=TRUE}</span></span>
<span id="cb1-2"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">plot(cars)</span></span>
<span id="cb1-3"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```</span></span></code></pre></div>
</div>
<p><code>cars</code> の部分がチャンクのラベル（名前）、<code>echo=TRUE</code> の部分がチャンクオプションです。</p>
</section>
<section id="quarto-の書き方" class="level2">
<h2 class="anchored" data-anchor-id="quarto-の書き方">Quarto の書き方</h2>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```{r}</span></span>
<span id="cb2-2"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| label: fig-cars</span></span>
<span id="cb2-3"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| echo: true</span></span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">plot(cars)</span></span>
<span id="cb2-6"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```</span></span></code></pre></div>
</div>
<p>チャンク内で <code>#|</code> の後に書きます。ちなみに、こちらは TRUE や FALSE が小文字で大丈夫です。</p>
</section>
</section>
<section id="チャンクオプション" class="level1">
<h1>チャンクオプション</h1>
<section id="共通" class="level2">
<h2 class="anchored" data-anchor-id="共通">共通</h2>
<p>R Markdown と Quarto で共通のオプションをざっくり表にしました。 これを使えば普段は問題なさそうというものをピックアップしています。</p>
<table class="caption-top table">
<caption>チャンクオプションまとめ</caption>
<thead>
<tr class="header">
<th style="text-align: left;">オプション</th>
<th style="text-align: center;">デフォルト</th>
<th style="text-align: left;">効果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>echo</code></td>
<td style="text-align: center;">TRUE</td>
<td style="text-align: left;"><ul>
<li>コードを出力に含めるか否か</li>
<li>FALSE にすると、実行結果のみが表示される</li>
</ul></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>include</code></td>
<td style="text-align: center;">TRUE</td>
<td style="text-align: left;"><ul>
<li>コード、結果を出力に含めるか否か</li>
<li>FALSE にすると、何も表示されない</li>
<li>パッケージの読み込みなど重要じゃない箇所で重宝</li>
</ul></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>warning</code></td>
<td style="text-align: center;">TRUE</td>
<td style="text-align: left;"><ul>
<li>警告を出力に表示するか否か</li>
<li>基本 FALSE が多い</li>
<li>グローバルに指定することが多い（後述）</li>
</ul></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>message</code></td>
<td style="text-align: center;">TRUE</td>
<td style="text-align: left;"><ul>
<li>メッセージを出力に表示するか否か</li>
<li>結果に付随してくる文を消すために FALSE が多い</li>
<li>グローバルに指定することが多い（後述）</li>
</ul></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>cache</code></td>
<td style="text-align: center;">FALSE</td>
<td style="text-align: left;"><ul>
<li>実行結果をキャッシュするか否か</li>
<li>TRUE にすると、結果が保存され2回目以降の出力が高速化</li>
<li>重い作業でコンパイルに時間がかかるときに使っている</li>
</ul></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>eval</code></td>
<td style="text-align: center;">TRUE</td>
<td style="text-align: left;"><ul>
<li>コードを実際に評価するか否か</li>
<li>コードを見せたいだけのときに FALSE にすると便利</li>
</ul></td>
</tr>
</tbody>
</table>
</section>
<section id="違うやつ" class="level2">
<h2 class="anchored" data-anchor-id="違うやつ">違うやつ</h2>
<p>よく使うものの中でもR Markdown と Quarto で異なるものをピックアップします。</p>
<ol type="1">
<li><p>fig 系</p>
<ul>
<li><p>R Markdown では <code>fig.cap</code></p></li>
<li><p>Quarto では <code>fig-cap</code></p></li>
<li><p>これ以外にも R Markdown はピリオドで、Quarto ではハイフンのものは多々あります。</p></li>
</ul></li>
<li><p>チャンクラベル<sup>1</sup></p>
<ul>
<li><p>R Markdown は <code>{r hogehoge}</code><sup>2</sup></p></li>
<li><p>Quarto はコード内で <code>#| label: fig-hogehoge</code></p>
<ul>
<li>ご覧の通り、Quarto の方は <code>fig-</code> を前に付ける必要があります<sup>3</sup>。</li>
</ul></li>
</ul></li>
</ol>
</section>
</section>
<section id="sec-global" class="level1">
<h1>グローバルオプション</h1>
<p>全部の警告やメッセージを消したい、なんてこともよくあると思います。</p>
<p>R Markdown と Quarto でそれぞれやり方がありますのでご紹介します。</p>
<section id="r-markdown" class="level2">
<h2 class="anchored" data-anchor-id="r-markdown">R Markdown</h2>
<p>RStudio であれば新しい R Markdown ファイルを開くと既に出ていますが、以下の関数を使用します。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>opts_chunk<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">echo =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
</div>
<p>括弧内に、カンマで区切りながらオプションを TRUE, FALSE などで指定していきます。<code>echo</code> はデフォルトで TRUE なので、これだけなら無くても大丈夫です。笑</p>
<p>例えば、全てのコードについてコードは出力せず結果だけ出力し、警告やメッセージは非表示にするためには次のようにします。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>opts_chunk<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">echo =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">warning =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">message =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span></code></pre></div>
</div>
</section>
<section id="quarto" class="level2">
<h2 class="anchored" data-anchor-id="quarto">Quarto</h2>
<p>Quarto では YAML ヘッダーで設定が可能です。YAML ヘッダーは Markdown ファイルを開いたときの最上部に出てくる <code>---</code> で囲まれた部分です。</p>
<p>次のように設定します。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>YAML ヘッダー</strong></pre>
</div>
<div class="sourceCode" id="cb5" data-filename="YAML ヘッダー" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Untitled"</span></span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> html</span></span>
<span id="cb5-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">execute</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span></span>
<span id="cb5-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">echo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb5-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">warning</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb5-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">message</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb5-8"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
</div>
<p><code>execute:</code> で指定することができます。</p>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">おわりに</h2>
<p>今回は私がよく使うチャンクオプションを中心にご紹介しました。</p>
<p>今後いろいろ使いながらアップデートしていきたいと思います。</p>
<p>ご参考になれば幸いです。</p>


<!-- -->

</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>相互参照のために使うので、必ずつけなければならないものではありません。相互参照については<a href="../240509_cross_reference/index.html">こちら</a>↩︎</p></li>
<li id="fn2"><p>スペースを空けてチャンクラベルを入力します。↩︎</p></li>
<li id="fn3"><p>表なら <code>tbl-hogehoge</code> とします。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>R</category>
  <category>Quarto</category>
  <category>R Markdown</category>
  <category>備忘録</category>
  <guid>https://yo5uke.github.io/tips/240509_chunk_option/</guid>
  <pubDate>Wed, 08 May 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240509_chunk_option/thumbnail.png" medium="image" type="image/png" height="119" width="144"/>
</item>
<item>
  <title>【R Markdown】相互参照を使いこなす【Quarto】</title>
  <link>https://yo5uke.github.io/tips/240509_cross_reference/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>R Markdown や Quarto で文書を書いているとき、相互参照をどうしようと思ったことはありませんか？僕はありました。</p>
<p>手書きで「図1：Hogehoge」と書くとなんだかスマートさに欠けるし、前に図を挿入したくなった時に数字を書き換えなければならず不便ですよね。</p>
<p>今回は R Markdown ＆ Quarto における相互参照の使い方をご紹介します。</p>
<p>R Markdown と Quarto で設定が異なりますので、それぞれ見ていきましょう。</p>
</section>
<section id="r-markdown" class="level1">
<h1>R Markdown</h1>
<section id="yaml-ヘッダー" class="level2">
<h2 class="anchored" data-anchor-id="yaml-ヘッダー">YAML ヘッダー</h2>
<p>まず、新しいファイルを開くと出てくる <code>---</code> で囲まれた部分を、YAML ヘッダーと呼びます。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240509_cross_reference/yaml-header.png" class="img-fluid figure-img"></p>
<figcaption>R Markdown ファイルを開くとこれが出てきますよね</figcaption>
</figure>
</div>
<p>R Markdown はデフォルトでは相互参照が使えません（私調べ）（そんな馬鹿な）。そのため、パッケージを使って設定します。</p>
<p>デフォルトの設定はこのような感じになっています。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>YAML ヘッダー</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="YAML ヘッダー" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Untitled"</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">author</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Yosuke Abe"</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">date</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2024-07-26"</span></span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">output</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> html_document</span></span>
<span id="cb1-6"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
</div>
<p>これを <code>bookdown</code> パッケージを用いて変更します。</p>
<p>まずはインストール。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bookdown"</span>)</span></code></pre></div>
</div>
<p>次にヘッダーを次のように変更。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>YAML ヘッダー</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="YAML ヘッダー" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Untitled"</span></span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">author</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Yosuke Abe"</span></span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">date</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2024-07-26"</span></span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">output</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  bookdown:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:html_document2</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> default</span></span>
<span id="cb3-7"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
</div>
<p>これで準備が整いました。</p>
</section>
<section id="相互参照" class="level2">
<h2 class="anchored" data-anchor-id="相互参照">相互参照</h2>
<p>では何かプロットして、それを参照してみましょう。例えば次の図をプロットしたいとします。</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240509_cross_reference/index_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>これを参照するために R Markdown 内で入力すると次のようになります。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R Markdown</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="R Markdown" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```{r pressure, fig.cap="図のキャプションです。"}</span></span>
<span id="cb4-2"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">plot(pressure)</span></span>
<span id="cb4-3"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```</span></span></code></pre></div>
</div>
<p>ここでのポイントは、<code>{r pressure}</code> の部分です。デフォルトでは <code>{r}</code> だけだと思いますが、スペースを空けることでチャンク<sup>1</sup>に名前を付けることができ、このチャンク名を使って参照します。また、カンマで区切った後の <code>fig.cap</code> は図のキャプションです。</p>
<p>文中で参照したいときは、次のように書きます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R Markdown</strong></pre>
</div>
<div class="sourceCode" id="cb5" data-filename="R Markdown" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1">表 \@ref(fig:pressure) を参照する。</span></code></pre></div>
</div>
<p>すると…</p>
<p><img src="https://yo5uke.github.io/tips/240509_cross_reference/cross-reference.png" class="img-fluid"></p>
<p>このように、文中での参照ができます。前に新たに図が入っても、自動で番号を振り直してくれます。</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
図以外の場合
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>もちろん、表や数式の場合にも使えます。</p>
<ul>
<li><p>表の場合</p>
<ul>
<li><p>様々な表の関数がありますが、R Markdown では基本的に関数内でキャプションを付けます。</p></li>
<li><p>図の場合とは違い、参照の際には <code>tab:</code>を使います。</p></li>
</ul></li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb6" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```{r mtcars}</span></span>
<span id="cb6-2"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">knitr::kable(mtcars[1:5, 1:5], caption = "mtcars データ")</span></span>
<span id="cb6-3"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```</span></span>
<span id="cb6-4"></span>
<span id="cb6-5">表 \@ref(tab:mtcars) を参照する。</span></code></pre></div>
</div>
<ul>
<li><p>数式の場合</p>
<ul>
<li><p><img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> 形式で書きます。HTML 出力でも、この書き方が可能です。</p></li>
<li><p><code>$</code> で挟む方法もありますが、これだと参照ができません<sup>2</sup>。</p></li>
<li><p>参照の際には、<code>eq:</code> を使います。</p></li>
</ul></li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb7" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1">\begin{equation}</span>
<span id="cb7-2">\bar{X} = \frac{\sum_{i=1}^n X_i}{n} (<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\#</span>eq:mean)</span>
<span id="cb7-3">\end{equation}</span>
<span id="cb7-4"></span>
<span id="cb7-5">式 \@ref(eq:mean) を参照する。</span></code></pre></div>
</div>
<p>以上のやり方で表や数式の参照にも対応しています。</p>
</div>
</div>
</div>
</section>
</section>
<section id="quarto" class="level1">
<h1>Quarto</h1>
<p>Quarto もほとんど同じ方法で参照が可能ですが、書き方はもっとシンプルです。</p>
<section id="yaml-ヘッダー-1" class="level2">
<h2 class="anchored" data-anchor-id="yaml-ヘッダー-1">YAML ヘッダー</h2>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>YAML ヘッダー</strong></pre>
</div>
<div class="sourceCode" id="cb8" data-filename="YAML ヘッダー" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb8-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Untitled"</span></span>
<span id="cb8-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> html</span></span>
<span id="cb8-4"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
</div>
<p>デフォルトでは著者も日付もないのでめちゃくちゃシンプルですね<sup>3</sup>。</p>
<p>Quarto では、相互参照のためにこれをいじる必要はありません（素晴らしい！）。</p>
<p>その代わり、チャンクの方をいろいろいじっていきます。</p>
</section>
<section id="チャンクオプション" class="level2">
<h2 class="anchored" data-anchor-id="チャンクオプション">チャンクオプション</h2>
<p>改めてになりますが、<code>```</code> で囲まれたコード部分をチャンクと言います。</p>
<p>R Markdown では、<code>{r}</code>の中にチャンク名を書きましたが、Quarto ではチャンクの中に書いていきます<sup>4</sup>。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R Markdown</strong></pre>
</div>
<div class="sourceCode" id="cb9" data-filename="R Markdown" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```{r}</span></span>
<span id="cb9-2"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| label: fig-pressure</span></span>
<span id="cb9-3"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| fig-cap: "図のキャプションです。"</span></span>
<span id="cb9-4"></span>
<span id="cb9-5"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">plot(pressure)</span></span>
<span id="cb9-6"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```</span></span></code></pre></div>
</div>
<p>ポイントは以下の2つです。</p>
<ol type="1">
<li><p><code>#|</code> の後ろにオプションを指定して書くことができます。</p></li>
<li><p><code>label</code> は <code>fig-</code> で始めないと参照できません。</p></li>
</ol>
</section>
<section id="相互参照-1" class="level2">
<h2 class="anchored" data-anchor-id="相互参照-1">相互参照</h2>
<p>文中では以下のように書いていきます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb10" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb10-1">@fig-pressure を参照する。</span></code></pre></div>
</div>
<p><code>@</code> だけだなんて、なんてシンプルなのでしょう。以下のように出力されます。</p>
<p><img src="https://yo5uke.github.io/tips/240509_cross_reference/cross-reference-quarto.png" class="img-fluid"></p>
<p>とても簡単に引用できました。よく見ると、<code>図 @fig-pressure</code> とは書かずとも <code>Figure 1</code> となっています。図～とは書かなくてよいということですね。英語になっているのが気になる方は、後のセクションで解説しているのでご覧ください。</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
図以外の場合
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>もちろん、表や数式の場合にも使えます。</p>
<ul>
<li><p>表の場合</p>
<ul>
<li><p>Quarto では、表もチャンクオプションを使ってキャプションがつけられます。</p></li>
<li><p>R Markdown では、参照の際に <code>tab:</code> を使っていたのに対し、Quarto では <code>tbl-</code> となります。ややこしい！</p></li>
</ul></li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb11" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb11-1"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```{r}</span></span>
<span id="cb11-2"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| label: tbl-mtcars</span></span>
<span id="cb11-3"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| tbl-cap: "mtcars データ"</span></span>
<span id="cb11-4"></span>
<span id="cb11-5"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">knitr::kable(mtcars[1:5, 1:5])</span></span>
<span id="cb11-6"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```</span></span>
<span id="cb11-7"></span>
<span id="cb11-8">@tbl-mtcars を参照する。</span></code></pre></div>
</div>
<ul>
<li><p>数式の場合</p>
<ul>
<li><p><img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> 形式でも書けますが、<code>$$</code> で囲む方法が便利です。</p></li>
<li><p>数式自体は <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> 表記です。</p></li>
<li><p>自分で打ってみるとわかりますが、プレビューできるのもいい点です。</p></li>
</ul></li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb12" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb12-1">$$</span>
<span id="cb12-2">\bar{X} = \frac{\sum_{i=1}^n X_i}{n}</span>
<span id="cb12-3">$$ {#eq-mean}</span>
<span id="cb12-4"></span>
<span id="cb12-5">@eq-mean を参照する。</span></code></pre></div>
</div>
<p>以上のやり方で表や数式も参照できます。</p>
</div>
</div>
</div>
</section>
</section>
<section id="sec-lang-setting" class="level1">
<h1>言語の設定について</h1>
<p>特に Quarto で、<code>@fig-</code> で参照すると <code>Figure ~</code> となってしまう問題について、気になる方は次の設定で修正できます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>YAML ヘッダー</strong></pre>
</div>
<div class="sourceCode" id="cb13" data-filename="YAML ヘッダー" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb13-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb13-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Untitled"</span></span>
<span id="cb13-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> html</span></span>
<span id="cb13-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lang</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ja</span></span>
<span id="cb13-5"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
</div>
<p><code>lang: ja</code> を追加しました。これが日本語設定です。</p>
<p>これを設定したうえで実行すると、</p>
<p><img src="https://yo5uke.github.io/tips/240509_cross_reference/cross-reference-quarto-ja.png" class="img-fluid"></p>
<p>無事日本語にできました。表や式もこれでいけます。</p>
</section>
<section id="おわりに" class="level1">
<h1>おわりに</h1>
<p>今回は R Markdown と Quarto で相互参照を使う方法をご紹介しました。</p>
<p>相互参照が簡単にできるだけで、かなり Markdown を使う魅力が増すと思います。修士学生の私としては、Quarto で修論を書き上げるのが目標です^^</p>
<p>ご参考になれば幸いです。それでは。</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p><code>```</code> で囲まれているコード部分↩︎</p></li>
<li id="fn2"><p>する方法をご存じの方がいらっしゃいましたら、是非コメントください。↩︎</p></li>
<li id="fn3"><p>もちろん <code>author: "著者"</code> や <code>date: 2024-05-09</code> などで入力できますよ。↩︎</p></li>
<li id="fn4"><p>R Markdown と同様の書き方もできるのですが、私は今回紹介している方法の方がすっきりしていて好みです。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>R Markdown</category>
  <category>Quarto</category>
  <category>R</category>
  <guid>https://yo5uke.github.io/tips/240509_cross_reference/</guid>
  <pubDate>Wed, 08 May 2024 15:00:00 GMT</pubDate>
</item>
<item>
  <title>Quarto で Python を使ってみよう！</title>
  <link>https://yo5uke.github.io/tips/240508_jupyter/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
注意
</div>
</div>
<div class="callout-body-container callout-body">
<p>この記事は Windows ユーザー向けです。ただ、事前準備が異なるだけで、それ以降は Mac ユーザーの方でも参考になると思います。</p>
</div>
</div>
<p>Python の環境構築って初心者にはなんだかめんどくさいですよね。私も Python はあまり使わないので、環境構築には苦労しています。</p>
<p>今回はR Markdown に似ているでおなじみ（？）の Quarto を用いた、Python の環境構築の方法をご紹介します。</p>
<p>Anaconda をインストールして Jupiter Notebook を使っている方も多いと思いますが、今回は Anaconda ではなく Quarto で Python を使ってみましょう。</p>
</section>
<section id="quarto-とは" class="level1">
<h1>Quarto とは</h1>
<p>Quarto は、RStudio のチームが開発している、R Markdown に似たドキュメント作成ツールです。R Markdown は R のためのドキュメント作成ツールですが、Quarto は Python や Julia など他の言語でも使えるようになっています。</p>
<p>Quarto は、RStudio のチームが開発しているため、RStudio との親和性が高いです。RStudio と Quarto を組み合わせて使うことで、R と Python の両方を使ったドキュメント作成が可能になります<sup>1</sup>。</p>
</section>
<section id="事前準備" class="level1">
<h1>事前準備</h1>
<p><a href="../240504_container/index.html">以前の記事</a>で、Docker を使って環境構築する方法をご紹介しましたが、この記事を最初に読んでいる方に向けて、より簡単な手順で環境構築する方法をご紹介します。</p>
<section id="前提" class="level2">
<h2 class="anchored" data-anchor-id="前提">前提</h2>
<ul>
<li><p>VSCode をインストールしていること</p></li>
<li><p>WSL2, Ubuntu をインストールしていること</p>
<ul>
<li>Ubuntu はデフォルトで Python がインストールされています。</li>
</ul></li>
</ul>
<p>ここまではそれほど難しくありませんので、まだの方は<a href="../240504_container/index.html">こちらの記事</a>をご覧ください。</p>
</section>
<section id="wsl2-に接続" class="level2">
<h2 class="anchored" data-anchor-id="wsl2-に接続">WSL2 に接続</h2>
<p>VSCode を起動して、画面左下の <code>&gt;&lt;</code> マークをクリックして、「WSL への接続」を選択します。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240508_jupyter/image/vscode-wsl.png" class="img-fluid figure-img"></p>
<figcaption>WSL2 に接続</figcaption>
</figure>
</div>
</section>
<section id="quarto-のインストール" class="level2">
<h2 class="anchored" data-anchor-id="quarto-のインストール">Quarto のインストール</h2>
<ol type="1">
<li><p>画面上部「ターミナル」から「新しいターミナル」を選択<sup>2</sup>し、ターミナルを開く</p></li>
<li><p>以下のコマンドを入力して実行</p>
<ul>
<li><p>URL の部分は最新のものに変えてください。</p></li>
<li><p><a href="https://quarto.org/docs/get-started/">Quarto ホームページ</a>からプラットフォームが <code>Ubuntu 18+/Debian 10+</code> であるダウンロードリンクを使用してください。</p></li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>bash</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="bash" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Quartoパッケージをダウンロード（URL は適宜更新）</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">wget</span> https://github.com/quarto-dev/quarto-cli/releases/download/v1.4.554/quarto-1.4.554-linux-amd64.deb</span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># パッケージをインストール（バージョン部分は適宜変更）</span></span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> dpkg <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-i</span> quarto-1.4.554-linux-amd64.deb</span></code></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Docker を使う場合
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Docker を使っている場合は、Dockerfile に以下のコマンドを追加してください。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Dockerfile</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="Dockerfile" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">RUN</span> wget <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-O</span> quarto.deb <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://github.com/quarto-dev/quarto-cli/releases/download/v1.4.553/quarto-1.4.553-linux-amd64.deb"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb2-2">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dpkg</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-i</span> quarto.deb <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb2-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span> quarto.deb</span></code></pre></div>
</div>
<p>ちなみに、<a href="../240504_container/index.html">私の記事</a>で紹介しているテンプレートを使用される場合は、既にこのコマンドが追加されているので、追加する必要はありません。</p>
</div>
</div>
</div>
<p>これで Quarto のインストールは完了です。</p>
</section>
<section id="拡張機能の準備" class="level2">
<h2 class="anchored" data-anchor-id="拡張機能の準備">拡張機能の準備</h2>
<p>拡張機能の検索窓から、次の拡張機能をインストールしてください。</p>
<ul>
<li><p><code>quarto.quarto</code>（Quarto）</p></li>
<li><p><code>ms-python.python</code>（Python）</p></li>
<li><p><code>ms-toolsai.jupyter</code>（Jupyter）</p></li>
</ul>
</section>
</section>
<section id="使ってみる" class="level1">
<h1>使ってみる</h1>
<section id="新しい-quarto-ファイルを作成" class="level2">
<h2 class="anchored" data-anchor-id="新しい-quarto-ファイルを作成">新しい Quarto ファイルを作成</h2>
<ol type="1">
<li><p>画面左上の「ファイル」から「新しいファイル」を選択、「Quarto Document」を選んで新規ファイルを作成します。</p>
<ul>
<li><code>Ctrl</code> + <code>S</code> でファイルを保存できます。保存する際に任意のフォルダに <code>test.qmd</code> などの名前で保存してください。</li>
</ul></li>
<li><p>yaml ヘッダーを次のように編集します。</p></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>YAML ヘッダー</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="YAML ヘッダー" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"タイトル"</span></span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">author</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"著者"</span></span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> html</span></span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jupyter</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> python3</span></span>
<span id="cb3-6"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
</div>
<ol start="3" type="1">
<li>以下のようにコードを書いてみましょう。</li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Quarto</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="Quarto" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1">For a demonstration of a line plot on a polar axis, see @fig-polar.</span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```{python}</span></span>
<span id="cb4-4"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| label: fig-polar</span></span>
<span id="cb4-5"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#| fig-cap: "A line plot on a polar axis"</span></span>
<span id="cb4-6"></span>
<span id="cb4-7"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">import numpy as np</span></span>
<span id="cb4-8"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">import matplotlib.pyplot as plt</span></span>
<span id="cb4-9"></span>
<span id="cb4-10"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">r = np.arange(0, 2, 0.01)</span></span>
<span id="cb4-11"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">theta = 2 * np.pi * r</span></span>
<span id="cb4-12"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">fig, ax = plt.subplots(</span></span>
<span id="cb4-13"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  subplot_kw = {'projection': 'polar'} </span></span>
<span id="cb4-14"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb4-15"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">ax.plot(theta, r)</span></span>
<span id="cb4-16"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">ax.set_rticks([0.5, 1, 1.5, 2])</span></span>
<span id="cb4-17"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">ax.grid(True)</span></span>
<span id="cb4-18"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">plt.show()</span></span>
<span id="cb4-19"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">```</span></span></code></pre></div>
</div>
<ol start="4" type="1">
<li><p>パッケージのインストール</p>
<ul>
<li><p>今回、<code>numpy</code> と <code>matplotlib</code> を使っているので、はじめにこれらをインストールしないとエラーが出ます。</p></li>
<li><p>また、実行する際に <code>ModuleNotFoundError:</code> が出たら、そのモジュールもインストールする必要があります<sup>3</sup>。</p></li>
<li><p>ターミナルから以下のコマンドを実行してください。</p></li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>bash</strong></pre>
</div>
<div class="sourceCode" id="cb5" data-filename="bash" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install numpy matplotlib nbformat nbclient</span></code></pre></div>
</div>
<ol start="5" type="1">
<li><p>実行</p>
<ul>
<li>画面右上のボタンの中から「Preview」を選択して、ファイルをレンダリングします。</li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240508_jupyter/image/python.png" class="img-fluid figure-img"></p>
<figcaption>実行結果</figcaption>
</figure>
</div>
<p>R を使うときと同様に、Python のコードを書いて実行することができました。</p>
</section>
</section>
<section id="ちなみに" class="level1">
<h1>ちなみに</h1>
<p>R ユーザーの私としては、エンジンは R Markdown と同じ <code>Knitr</code> を使っているので、基本的に R 環境に Python を混ぜるということになります。</p>
<p>そのままでは R と Python が混在したコードは出力できません<sup>4</sup>が、<code>reticulate</code> パッケージを使うことで R を使っていても Python が混ざったコードを出力できます。</p>
<p>例えばこの記事は R 環境で書いていますのでこのままでは Python を使えません。そこで <code>reticulate</code> パッケージをインストールします。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb6" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'reticulate'</span>)</span></code></pre></div>
</div>
<p>ライブラリで読み込む必要はありません。</p>
<p>先ほどのコードを書いてみると、</p>
<div id="cell-fig-polar" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb7-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb7-3"></span>
<span id="cb7-4">r <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.arange(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>)</span>
<span id="cb7-5">theta <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> np.pi <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> r</span>
<span id="cb7-6">fig, ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(</span>
<span id="cb7-7">  subplot_kw <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'projection'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'polar'</span>} </span>
<span id="cb7-8">)</span>
<span id="cb7-9">ax.plot(theta, r)</span>
<span id="cb7-10">ax.set_rticks([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>])</span>
<span id="cb7-11">ax.grid(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb7-12">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-polar" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-polar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="https://yo5uke.github.io/tips/240508_jupyter/index_files/figure-html/fig-polar-output-1.png" width="450" height="439" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-polar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
図&nbsp;1: A line plot on a polar axis
</figcaption>
</figure>
</div>
</div>
</div>
<p>無事 図&nbsp;1 が出力できました。</p>
<p>このように R と Python が混在していても出力できますので、必要に応じて使ってみてください。</p>
</section>
<section id="まとめ" class="level1">
<h1>まとめ</h1>
<p>今回は Quarto を使って Python の環境構築を行いました。</p>
<p>Anaconda と比べると、Quarto はより柔軟で、R でも Python でも使えるのがメリットです。</p>
<p>また、書き方はほぼ R Markdown と同じなので、普段 R を使っている方にはすぐに慣れると思います。</p>
<p>ただし、R と Python を1つのファイルで併用する際には追加でパッケージのインストールが必要です。</p>
<p>以上です。お疲れ様でした！</p>
</section>
<section id="追記" class="level1">
<h1>追記</h1>
<p>2024年5月16日：R と Python が混在したコードの出力について追加</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>今回は Python がメインなので RStudio は使いませんが、普段 R を使う方はぜひ RStudio でも使ってみてください。↩︎</p></li>
<li id="fn2"><p>ショートカット：<code>Ctrl</code> + <code>Shift</code> + <code>@</code>↩︎</p></li>
<li id="fn3"><p>今回は <code>nbformat</code> と <code>nbclient</code> が出ると思います。↩︎</p></li>
<li id="fn4"><p>R では <code>Knitr</code> を使って Python では <code>Jupyter</code> を使うためです。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>Quarto</category>
  <category>Python</category>
  <category>Ubuntu</category>
  <category>VSCode</category>
  <category>R</category>
  <guid>https://yo5uke.github.io/tips/240508_jupyter/</guid>
  <pubDate>Tue, 07 May 2024 15:00:00 GMT</pubDate>
</item>
<item>
  <title>【R パッケージ】インストールも読み込みも一撃で？【pacman】</title>
  <link>https://yo5uke.github.io/tips/240507_pacman/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>何か新しいプロジェクトを始める際に、新しいパッケージをいちいちインストールして読み込むのは面倒ですよね。</p>
<p>そんな時に便利な <code>pacman</code> パッケージのご紹介です。</p>
</section>
<section id="pacman-とは" class="level1">
<h1>pacman とは</h1>
<p>ざっくり言うと、パッケージのマネジメントツールです。このパッケージには <code>p_</code> で始まる様々な関数が含まれています。</p>
<p>特に便利なのが <code>p_load()</code> で、パッケージのインストールと読み込みを両方してくれます。もちろんインストール済みのパッケージは、読み込むだけです。</p>
<p>さらに便利なのは、複数のパッケージをまとめて書けるということです。<code>install.packages()</code> は一度に複数のパッケージをインストールできるものの、<code>library()</code> はパッケージごとにしなくてはなりません。その点 <code>pacman::p_load()</code> は、括弧内にパッケージを並べて書くことで、複数のパッケージを一度にインストール、読み込みまでしてくれます（しかもダブルクォーテーションで囲まなくてよい！）。</p>
</section>
<section id="使ってみる" class="level1">
<h1>使ってみる</h1>
<p>早速使ってみます。今回は、<code>tidyverse</code>, <code>sf</code>, <code>here</code> の3つを使いたいとして、まだインストールもしていないとします。</p>
<section id="library" class="level2">
<h2 class="anchored" data-anchor-id="library">library()</h2>
<p>まず、インストールします。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tidyverse"</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sf"</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"here"</span>)</span></code></pre></div>
</div>
<p>次に、読み込みます。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(sf)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(here)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>here() starts at /home/rstudio/work</code></pre>
</div>
</div>
<p>これで使えるようになりました。</p>
</section>
<section id="p_load" class="level2">
<h2 class="anchored" data-anchor-id="p_load">p_load()</h2>
<p><code>pacman::p_load()</code> はこれで一発です。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">pacman<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">p_load</span>(tidyverse, sf, here)</span></code></pre></div>
</div>
<p>この場合、上に出てきたような読み込みに付随するメッセージは出てきません。</p>
</section>
</section>
<section id="使うにあたって" class="level1">
<h1>使うにあたって</h1>
<p><code>pacman</code> がパッケージである以上、はじめに <code>install.packages("pacman")</code> はしなければなりません。それ以降は <code>install.packages()</code> とはおさらばできます。</p>
<p><code>packman::</code> の書き方を使って、<code>library(pacman)</code>も省略しましょう<sup>1</sup>。</p>
<p>また、Docker を用いて環境構築する場合、Dockerfile にインストールすることを指示しておけば、それすら要らなくなります<sup>2</sup>。</p>
<p>Dockerfile に以下を追加します。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Dockerfile</strong></pre>
</div>
<div class="sourceCode" id="cb9" data-filename="Dockerfile" style="background: #f1f3f5;"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb9-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">R</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-e</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"install.packages('pacman')"</span></span></code></pre></div>
</div>
<p>これでビルドすれば、RStudio でインストールせずとも <code>pacman</code> が使えます。</p>
</section>
<section id="おまけ" class="level1">
<h1>おまけ</h1>
<p>パッケージを全部アップデートしたい、なんてこともありますよね。RStudio から一括でやる方法もありますが、せっかくなので <code>pacman</code> を使ってやってみましょう。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">pacman<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">p_update</span>()</span></code></pre></div>
</div>
<p>これでいけます。</p>
</section>
<section id="まとめ" class="level1">
<h1>まとめ</h1>
<p><code>pacman</code> パッケージをご紹介しました。</p>
<p><code>library()</code> とどちらを使うかはお好み次第だと思います。</p>
<p>魅力を感じた方はぜひ使ってみてください！</p>
</section>
<section id="参考" class="level1">
<h1>参考</h1>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://qiita.com/taiyodayo/items/e69d997754d55e3d7e4c">“install.packages()”するのはこれが最後！Rのパッケージ管理には「pacman」を使おう</a></p>
</div>
</div>
</div>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>この書き方では、<code>library()</code> を使わずともパッケージ内の関数が使えます。一度だけ使いたい！というときに便利です。また、どのパッケージに属しているかが明確になるというメリットもあります。↩︎</p></li>
<li id="fn2"><p><a href="../240504_container/index.html">こちら</a>を参照↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>R</category>
  <guid>https://yo5uke.github.io/tips/240507_pacman/</guid>
  <pubDate>Mon, 06 May 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240507_pacman/image/Rlogo.png" medium="image" type="image/png" height="112" width="144"/>
</item>
<item>
  <title>R でGIS を動かす【ハンドリング】</title>
  <link>https://yo5uke.github.io/tips/240506_gis_on_r/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>R 上で GIS を操作する方法を簡単に紹介します。</p>
<p>GIS を R 上で実行するメリットは、再現性が担保できることです。同じ作業を繰り返しするような場合、力を発揮すると思います。また、<code>ggplot2</code> で可視化できる点も便利です。</p>
<p>主に、使用するパッケージ、データの読み込み、簡単なデータハンドリング、そして交差する地物の抽出を少しご紹介します。</p>
</section>
<section id="使用するパッケージ" class="level1">
<h1>使用するパッケージ</h1>
<p><code>sf</code> パッケージを使用します。また、これらのデータを通常のデータと同様 <code>tidyverse</code> でハンドリングできるので、これら2つを主に使います。</p>
<p>また、ここでは詳しく紹介しませんが、私は <code>here</code> パッケージも使用します。<a href="../240504_container/index.html">こちらの記事</a>で紹介しているような方法でプロジェクトを実行している場合、相対パスを使用すると便利です。詳しくは作業の流れで見てみてください。</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Docker で環境を構築する場合
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><a href="../240504_container/index.html">Docker を用いた環境構築の記事</a>で紹介している方法で環境を構築する場合、1つ注意点があります。Dockerfile の1行目を以下のように変更してください。</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1">FROM rocker/geospatial:latest</span></code></pre></div>
<p><code>rocker/rstudio</code> のままだと、GIS を扱うのに必要なパッケージを使用できません。上のように変更してファイルを保存した後、画面左下「&gt;&lt; 開発コンテナー」 をクリックし、「コンテナーのリビルド」を実行してください。</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># パッケージのインストール</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sf"</span>)</span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tidyverse"</span>)</span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"here"</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># パッケージの読み込み</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(sf)</span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(here)</span></code></pre></div>
</div>
</section>
<section id="使用するデータ" class="level1">
<h1>使用するデータ</h1>
<section id="鉄道データ" class="level2">
<h2 class="anchored" data-anchor-id="鉄道データ">鉄道データ</h2>
<p>今回は日本の鉄道（駅）データを使用してみます。</p>
<ul>
<li><a href="https://nlftp.mlit.go.jp/ksj/">国土数値情報ダウンロードサイト</a>より「鉄道（ライン）」をクリック、2022年のデータをダウンロード</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240506_gis_on_r/data_download.png" class="img-fluid figure-img"></p>
<figcaption>一番上の2022年データを今回は使用</figcaption>
</figure>
</div>
</section>
<section id="行政区域データ" class="level2">
<h2 class="anchored" data-anchor-id="行政区域データ">行政区域データ</h2>
<p>後ほど鉄道データと重ねて使うために使用します。</p>
<p>同様に国土数値情報ダウンロードサイトから、「<a href="https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-N03-2024.html">行政区域</a>」に進み、今回は福島県の2024年データをダウンロードします。</p>
<p>鉄道データと同じフォルダに入れておいてください。</p>
</section>
</section>
<section id="データの読み込み" class="level1">
<h1>データの読み込み</h1>
<p>ダウンロードしたデータには、駅のデータと路線のデータがそれぞれ入っています。</p>
<p>それぞれ読み込みます。読み込みには、<code>sf::read_sf()</code> を使います。<code>sf::st_read()</code> もありますが、こちらは読み込む際に設定を施したい場合に使います。基本は前者で OK です。</p>
<p>UTF-8 で読み込みたいので、<code>utf8</code> フォルダの中のデータを使用します。読み込むのは Shapefile です。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">station <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_sf</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/N02-22_GML/utf8/N02-22_Station.shp"</span>))</span>
<span id="cb4-2"></span>
<span id="cb4-3">rail <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_sf</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/N02-22_GML/utf8/N02-22_RailroadSection.shp"</span>))</span></code></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
here について
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>ご覧の通り、<code>here</code> はワーキングディレクトリをベースとして、そこからの相対パスでファイルの読み込み等を行うことができます。</p>
<p>R のプロジェクトを使用している場合、<code>.Rproj</code> ファイルがあるところがワーキングディレクトリです。今回はその中の <code>data</code> フォルダにデータを入れているので、このような書き方になっています。<code>here()</code> の中はダブルクォーテーションで囲んでください。</p>
</div>
</div>
</div>
</section>
<section id="データの可視化" class="level1">
<h1>データの可視化</h1>
<section id="ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="ggplot2">ggplot2</h2>
<p>おなじみ <code>ggplot2</code> パッケージを使ってこれらの路線を可視化します<sup>1</sup>。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">station <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_sf</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># GIS 用</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_void</span>() <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 背景や罫線を除去</span></span></code></pre></div>
<div class="cell-output-display">
<div id="fig-station" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-station-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="https://yo5uke.github.io/tips/240506_gis_on_r/index_files/figure-html/fig-station-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-station-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
図&nbsp;1: 日本の駅
</figcaption>
</figure>
</div>
</div>
</div>
<p>なんとなく日本が形作られましたね。東京と大阪に特に駅が多いことも一目瞭然です。</p>
<p>同様に路線もプロットします。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">rail <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_sf</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_void</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="fig-rail" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rail-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="https://yo5uke.github.io/tips/240506_gis_on_r/index_files/figure-html/fig-rail-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rail-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
図&nbsp;2: 日本の鉄道路線
</figcaption>
</figure>
</div>
</div>
</div>
<p>こうして見るとなんか面白いですよね。北海道の北東部は線路がないみたいです。</p>
<p>ここまでシンプルに可視化する方法をご紹介しました。次のセクションでもう少し地域にフォーカスして見ていきます。</p>
</section>
</section>
<section id="データハンドリング" class="level1">
<h1>データハンドリング</h1>
<section id="データの抽出" class="level2">
<h2 class="anchored" data-anchor-id="データの抽出">データの抽出</h2>
<p>例えば、新幹線の駅だけデータとして使いたいとします。</p>
<p>先ほどの<a href="https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-N02-2022.html">ダウンロードサイト</a>の属性情報の部分をご覧ください。そこから事業者種別コード（変数名：<code>N02-002</code>）を確認してみると、1が新幹線に該当することが分かります。</p>
<p>ここで、<code>tidyverse</code> パッケージを使用しながら、東北新幹線の駅だけを抽出してみましょう。また、列名を変更しながら必要な変数のみ抽出します。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">sta_tohoku <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> station <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb7-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(N02_002 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, N02_003 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"東北新幹線"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"路線名"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> N02_003, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"駅名"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> N02_005, geometry)</span></code></pre></div>
</div>
<div class="cell">
<div id="tbl-tohoku-shinkansen" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-tohoku-shinkansen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表&nbsp;1: 東北新幹線の駅情報（上から6行を表示）
</figcaption>
<div aria-describedby="tbl-tohoku-shinkansen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="htoclglwvp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#htoclglwvp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#htoclglwvp thead, #htoclglwvp tbody, #htoclglwvp tfoot, #htoclglwvp tr, #htoclglwvp td, #htoclglwvp th {
  border-style: none;
}

#htoclglwvp p {
  margin: 0;
  padding: 0;
}

#htoclglwvp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#htoclglwvp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#htoclglwvp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#htoclglwvp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#htoclglwvp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#htoclglwvp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#htoclglwvp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#htoclglwvp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#htoclglwvp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#htoclglwvp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#htoclglwvp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#htoclglwvp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#htoclglwvp .gt_spanner_row {
  border-bottom-style: hidden;
}

#htoclglwvp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#htoclglwvp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#htoclglwvp .gt_from_md > :first-child {
  margin-top: 0;
}

#htoclglwvp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#htoclglwvp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#htoclglwvp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#htoclglwvp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#htoclglwvp .gt_row_group_first td {
  border-top-width: 2px;
}

#htoclglwvp .gt_row_group_first th {
  border-top-width: 2px;
}

#htoclglwvp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#htoclglwvp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#htoclglwvp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#htoclglwvp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#htoclglwvp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#htoclglwvp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#htoclglwvp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#htoclglwvp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#htoclglwvp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#htoclglwvp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#htoclglwvp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#htoclglwvp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#htoclglwvp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#htoclglwvp .gt_left {
  text-align: left;
}

#htoclglwvp .gt_center {
  text-align: center;
}

#htoclglwvp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#htoclglwvp .gt_font_normal {
  font-weight: normal;
}

#htoclglwvp .gt_font_bold {
  font-weight: bold;
}

#htoclglwvp .gt_font_italic {
  font-style: italic;
}

#htoclglwvp .gt_super {
  font-size: 65%;
}

#htoclglwvp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#htoclglwvp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#htoclglwvp .gt_indent_1 {
  text-indent: 5px;
}

#htoclglwvp .gt_indent_2 {
  text-indent: 10px;
}

#htoclglwvp .gt_indent_3 {
  text-indent: 15px;
}

#htoclglwvp .gt_indent_4 {
  text-indent: 20px;
}

#htoclglwvp .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="路線名" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">路線名</th>
<th id="駅名" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">駅名</th>
<th id="geometry" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">geometry</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="路線名">東北新幹線</td>
<td class="gt_row gt_center" headers="駅名">二戸</td>
<td class="gt_row gt_center" headers="geometry">c(141.28627, 141.28491, 40.26107, 40.25848)</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="路線名">東北新幹線</td>
<td class="gt_row gt_center" headers="駅名">いわて沼宮内</td>
<td class="gt_row gt_center" headers="geometry">c(141.21742, 141.21742, 39.96114, 39.96009)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="路線名">東北新幹線</td>
<td class="gt_row gt_center" headers="駅名">八戸</td>
<td class="gt_row gt_center" headers="geometry">c(141.42981, 141.43206, 40.50822, 40.51043)</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="路線名">東北新幹線</td>
<td class="gt_row gt_center" headers="駅名">盛岡</td>
<td class="gt_row gt_center" headers="geometry">c(141.13807, 141.13499, 39.70015, 39.70295)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="路線名">東北新幹線</td>
<td class="gt_row gt_center" headers="駅名">北上</td>
<td class="gt_row gt_center" headers="geometry">c(141.12356, 141.12285, 141.12234, 141.12168, 39.28386, 39.28272, 39.28188, 39.28054)</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="路線名">東北新幹線</td>
<td class="gt_row gt_center" headers="駅名">水沢江刺</td>
<td class="gt_row gt_center" headers="geometry">c(141.18919, 141.18822, 39.14381, 39.14651)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>表&nbsp;1 をご覧いただくと分かる通り、東北新幹線の駅のみを抽出できています。また、<code>geometry</code> 変数が地理情報を示しています。</p>
</section>
<section id="ラインデータをポイントデータ化する" class="level2">
<h2 class="anchored" data-anchor-id="ラインデータをポイントデータ化する">ラインデータをポイントデータ化する</h2>
<p>駅はラインデータになっています。駅は幅を持っているためです。そこで、これをポイントデータ化し、駅の位置を1点で特定します。</p>
<p>まず、ラインデータがどうなっているか確認しましょう。地図を拡大して見てみると、線状になっていることが分かります。</p>
<div class="cell">
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-82accbf383c067d0841a" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-82accbf383c067d0841a">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["line",430]},{"method":"addPolylines","args":[[[[{"lng":[141.28627,141.28491],"lat":[40.26107,40.25848]}]],[[{"lng":[141.21742,141.21742],"lat":[39.96114,39.96009]}]],[[{"lng":[141.42981,141.43206],"lat":[40.50822,40.51043]}]],[[{"lng":[141.13807,141.13499],"lat":[39.70015,39.70295]}]],[[{"lng":[141.12356,141.12285,141.12234,141.12168],"lat":[39.28386,39.28272,39.28188,39.28054]}]],[[{"lng":[141.18919,141.18822],"lat":[39.14381,39.14651]}]],[[{"lng":[141.13841,141.13979],"lat":[38.92493,38.92796]}]],[[{"lng":[141.17405,141.17318],"lat":[39.40777,39.40523]}]],[[{"lng":[140.96747,140.96771,140.96778,140.96819],"lat":[38.56948,38.57044,38.57073,38.57235]}]],[[{"lng":[141.07251,141.07157,141.07122,141.071,141.07086,141.07074,141.07063],"lat":[38.75052,38.74885,38.74824,38.74784,38.74759,38.74738,38.74718]}]],[[{"lng":[140.88181,140.88207,140.88229,140.88245],"lat":[38.25865,38.26086,38.26195,38.26243]}]],[[{"lng":[140.45857,140.45859,140.45865],"lat":[37.75232,37.75301,37.7558]}]],[[{"lng":[140.63377,140.63331,140.6318],"lat":[37.99595,37.99539,37.9936]}]],[[{"lng":[140.38904,140.3882],"lat":[37.40043,37.39681]}]],[[{"lng":[140.01964,140.01977,140.02,140.02034,140.02064,140.02112,140.02177],"lat":[36.93054,36.9307,36.93098,36.93132,36.93165,36.93216,36.93278]}]],[[{"lng":[140.18778,140.18946,140.18987],"lat":[37.12221,37.12397,37.12441]}]],[[{"lng":[139.89761,139.89857],"lat":[36.55688,36.56066]}]],[[{"lng":[139.80525,139.80746],"lat":[36.31159,36.3155]}]],[[{"lng":[139.77802,139.77675],"lat":[35.71432,35.71231]}]],[[{"lng":[139.62381,139.62313,139.62235],"lat":[35.90445,35.906,35.90806]}]],[[{"lng":[139.76807,139.76811,139.76746],"lat":[35.68296,35.68099,35.67936]}]],[[{"lng":[141.155455,141.152362],"lat":[40.719403,40.720459]}]],[[{"lng":[140.693511,140.69351,140.69347,140.693428],"lat":[40.826832,40.826883,40.828104,40.829376]}]]],null,"sta_tohoku",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"line","stroke":true,"color":"#FF0000","weight":2,"opacity":0.9,"fill":false,"fillColor":"#6666FF","fillOpacity":1,"smoothFactor":1,"noClip":false},["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>二戸&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>いわて沼宮内&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>八戸&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>盛岡&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>5&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>北上&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>6&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>水沢江刺&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>7&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>一ノ関&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>8&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>新花巻&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>9&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>古川&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>10&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>くりこま高原&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>11&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>仙台&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>12&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>福島&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>13&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>白石蔵王&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>14&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>郡山&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>15&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>那須塩原&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>16&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>新白河&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>17&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>宇都宮&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>18&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>小山&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>19&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>上野&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>20&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>大宮&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>21&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>東京&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>22&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>七戸十和田&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>23&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>新青森&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_LINESTRING&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":3,"opacity":1,"fill":false,"fillOpacity":0,"bringToFront":false,"sendToBack":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[139.62235,35.67936,141.43206,40.829376,true,"sta_tohoku","Zoom to sta_tohoku","<strong> sta_tohoku <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"sta_tohoku",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#FF0000"],"labels":["sta_tohoku"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"sta_tohoku"}]}],"limits":{"lat":[35.67936,40.829376],"lng":[139.62235,141.43206]},"fitBounds":[35.67936,139.62235,40.829376,141.43206,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
<p><br></p>
<p>これをポイント化するために使用するのが、<code>sf::st_centroid()</code> です。地物の重心を求めてくれます。</p>
<p>コードは以下です。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">sta_tohoku_c <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sta_tohoku <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_centroid</span>(geometry)</span></code></pre></div>
</div>
<p>改めて見てみると、ポイントになっていることが分かります。</p>
<div class="cell">
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-d2467886531faf6b9615" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d2467886531faf6b9615">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[40.25977500199004,39.960615,40.50932500545462,39.70155001017157,39.28221447906011,39.14516000100501,38.92644500203087,39.40650000080996,38.57091520279362,38.74885038112572,38.26054813216488,37.75405996736191,37.99477329798773,37.39862000074277,36.9316760252389,37.12330847422381,36.55877000096198,36.31354500508468,35.71331500166777,35.90624857740386,35.68113776410924,40.71993101031934,40.82810400647369],[141.2855899869844,141.21742,141.4309349814632,141.1365300312422,141.122576535068,141.1887050093019,141.1390999852644,141.1736149920781,140.967828671052,141.0715688420302,140.8820652110559,140.4586120676028,140.6327882843098,140.3886199898564,140.0206780976089,140.1888275371686,139.8980899882586,139.80635497229,139.7773849919924,139.6230560412632,139.7679481318551,141.1539085122669,140.6934699111492],6,null,"sta_tohoku_c",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#FF0000","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>二戸&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>いわて沼宮内&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>八戸&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>盛岡&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>5&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>北上&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>6&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>水沢江刺&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>7&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>一ノ関&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>8&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>新花巻&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>9&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>古川&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>10&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>くりこま高原&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>11&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>仙台&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>12&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>福島&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>13&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>白石蔵王&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>14&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>郡山&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>15&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>那須塩原&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>16&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>新白河&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>17&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>宇都宮&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>18&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>小山&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>19&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>上野&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>20&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>大宮&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>21&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>東京&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>22&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>七戸十和田&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>23&emsp;<\/td><\/tr><tr><td>1<\/td><th>路線名&emsp;<\/th><td>東北新幹線&emsp;<\/td><\/tr><tr><td>2<\/td><th>駅名&emsp;<\/th><td>新青森&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[139.6230560412632,35.68113776410924,141.4309349814632,40.82810400647369,true,"sta_tohoku_c","Zoom to sta_tohoku_c","<strong> sta_tohoku_c <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"sta_tohoku_c",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#FF0000"],"labels":["sta_tohoku_c"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"sta_tohoku_c"}]}],"limits":{"lat":[35.68113776410924,40.82810400647369],"lng":[139.6230560412632,141.4309349814632]},"fitBounds":[35.68113776410924,139.6230560412632,40.82810400647369,141.4309349814632,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
<p><br></p>
<p>ポイントデータ化するメリットとしては、距離の算出に使えることなどがあります。ある地点から駅までの距離を算出したい場合、駅が幅を持っていると距離算出の基準が曖昧になってしまうので、そこでポイント化すればその基準を明確化できるというわけです。</p>
<p>以上、<code>sf::st_centroid()</code> を用いてポイントデータ化する方法をご紹介しました。</p>
</section>
</section>
<section id="交差する地物の抽出" class="level1">
<h1>交差する地物の抽出</h1>
<p>先ほど福島県のデータをダウンロードしました。ここで、福島県に含まれる新幹線駅を抽出したいとします<sup>2</sup>。</p>
<section id="行政区域データ-1" class="level2">
<h2 class="anchored" data-anchor-id="行政区域データ-1">行政区域データ</h2>
<p>まず、福島県の行政区域データを読み込み、可視化しましょう。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">fukushima <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_sf</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/N03-20240101_07_GML/N03-20240101_07.shp"</span>))</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">fukushima <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb10-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_sf</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb10-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_void</span>()</span></code></pre></div>
<div class="cell-output-display">
<div id="fig-fukushima" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-fukushima-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="https://yo5uke.github.io/tips/240506_gis_on_r/index_files/figure-html/fig-fukushima-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-fukushima-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
図&nbsp;3: 福島県
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="抽出" class="level2">
<h2 class="anchored" data-anchor-id="抽出">抽出</h2>
<p>次に、<code>sta_tohoku_c</code> を用いて、福島県と交差する（含まれる）駅を抽出します。</p>
<p>交差する地物を抽出するためには、<code>sf::st_intersects()</code> もしくは <code>sf::st_intersection()</code> を用います。</p>
<p>正直後者の方がシンプルなのですが、両者には次のような違いがあります。</p>
<ol type="1">
<li><p><code>st_intersects()</code>: 2つのジオメトリが交差するかどうかの論理判定（TRUE/FALSEやインデックスのリスト）を返す</p></li>
<li><p><code>st_intersection()</code>: 交差部分のジオメトリそのものを<strong>新しい</strong>オブジェクトとして返します。</p></li>
</ol>
<p>何やら難しいので、わかんなくて困ったら後者を使っておけばよいのではないでしょうか<sup>3</sup>。</p>
<p>コードは以下のようになります。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">sta_07_a <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sta_tohoku_c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(</span>
<span id="cb11-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> </span>
<span id="cb11-4">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_intersects</span>(fukushima, sta_tohoku_c) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb11-5">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>()</span>
<span id="cb11-6">  )</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">sta_07_b <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_intersection</span>(fukushima, sta_tohoku_c)</span></code></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1つ目の方法について
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>1つ目は大変複雑ですね。プロセスを紐解くと次のようになります。</p>
<ol type="1">
<li><p><code>sta_tohoku_c</code> から抽出するので、<code>sta_tohoku_c</code> からスタート</p></li>
<li><p>抽出するので <code>dplyr::filter()</code> を使用</p></li>
<li><p><code>sf::st_intersects()</code> で、<code>fukushima</code> と重なる <code>sta_tohoku_c</code>を抽出</p></li>
<li><p><code>sf::st_intersects()</code> はリスト形式で結果を返すので、<code>unlist()</code> を用いてリスト形式を解除</p></li>
<li><p><code>sta_tohoku_c</code> の行番号と照らし合わせ、返ってきた結果と同じもののみ抽出</p></li>
</ol>
</div>
</div>
</div>
<p>結果は次のようになります。</p>
<div class="cell">
<div id="tbl-sta_07_a" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-sta_07_a-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表&nbsp;2: st_intersects() を用いた場合
</figcaption>
<div aria-describedby="tbl-sta_07_a-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="cmltdahqes" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#cmltdahqes table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#cmltdahqes thead, #cmltdahqes tbody, #cmltdahqes tfoot, #cmltdahqes tr, #cmltdahqes td, #cmltdahqes th {
  border-style: none;
}

#cmltdahqes p {
  margin: 0;
  padding: 0;
}

#cmltdahqes .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cmltdahqes .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#cmltdahqes .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#cmltdahqes .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#cmltdahqes .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cmltdahqes .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cmltdahqes .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cmltdahqes .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cmltdahqes .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cmltdahqes .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cmltdahqes .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cmltdahqes .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cmltdahqes .gt_spanner_row {
  border-bottom-style: hidden;
}

#cmltdahqes .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#cmltdahqes .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cmltdahqes .gt_from_md > :first-child {
  margin-top: 0;
}

#cmltdahqes .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cmltdahqes .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cmltdahqes .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#cmltdahqes .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#cmltdahqes .gt_row_group_first td {
  border-top-width: 2px;
}

#cmltdahqes .gt_row_group_first th {
  border-top-width: 2px;
}

#cmltdahqes .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmltdahqes .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#cmltdahqes .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#cmltdahqes .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cmltdahqes .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmltdahqes .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cmltdahqes .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#cmltdahqes .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cmltdahqes .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cmltdahqes .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cmltdahqes .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmltdahqes .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cmltdahqes .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmltdahqes .gt_left {
  text-align: left;
}

#cmltdahqes .gt_center {
  text-align: center;
}

#cmltdahqes .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cmltdahqes .gt_font_normal {
  font-weight: normal;
}

#cmltdahqes .gt_font_bold {
  font-weight: bold;
}

#cmltdahqes .gt_font_italic {
  font-style: italic;
}

#cmltdahqes .gt_super {
  font-size: 65%;
}

#cmltdahqes .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#cmltdahqes .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#cmltdahqes .gt_indent_1 {
  text-indent: 5px;
}

#cmltdahqes .gt_indent_2 {
  text-indent: 10px;
}

#cmltdahqes .gt_indent_3 {
  text-indent: 15px;
}

#cmltdahqes .gt_indent_4 {
  text-indent: 20px;
}

#cmltdahqes .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="路線名" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">路線名</th>
<th id="駅名" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">駅名</th>
<th id="geometry" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">geometry</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="路線名">東北新幹線</td>
<td class="gt_row gt_left" headers="駅名">福島</td>
<td class="gt_row gt_center" headers="geometry">c(140.458612067603, 37.7540599673619)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="路線名">東北新幹線</td>
<td class="gt_row gt_left" headers="駅名">郡山</td>
<td class="gt_row gt_center" headers="geometry">c(140.388619989856, 37.3986200007428)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="路線名">東北新幹線</td>
<td class="gt_row gt_left" headers="駅名">新白河</td>
<td class="gt_row gt_center" headers="geometry">c(140.188827537169, 37.1233084742238)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<div id="tbl-sta_07_b" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-sta_07_b-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表&nbsp;3: st_intersection() を用いた場合
</figcaption>
<div aria-describedby="tbl-sta_07_b-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="gygtplwvdh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gygtplwvdh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gygtplwvdh thead, #gygtplwvdh tbody, #gygtplwvdh tfoot, #gygtplwvdh tr, #gygtplwvdh td, #gygtplwvdh th {
  border-style: none;
}

#gygtplwvdh p {
  margin: 0;
  padding: 0;
}

#gygtplwvdh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gygtplwvdh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gygtplwvdh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gygtplwvdh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gygtplwvdh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gygtplwvdh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gygtplwvdh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gygtplwvdh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gygtplwvdh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gygtplwvdh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gygtplwvdh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gygtplwvdh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gygtplwvdh .gt_spanner_row {
  border-bottom-style: hidden;
}

#gygtplwvdh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gygtplwvdh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gygtplwvdh .gt_from_md > :first-child {
  margin-top: 0;
}

#gygtplwvdh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gygtplwvdh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gygtplwvdh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gygtplwvdh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gygtplwvdh .gt_row_group_first td {
  border-top-width: 2px;
}

#gygtplwvdh .gt_row_group_first th {
  border-top-width: 2px;
}

#gygtplwvdh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gygtplwvdh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gygtplwvdh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gygtplwvdh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gygtplwvdh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gygtplwvdh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gygtplwvdh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gygtplwvdh .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gygtplwvdh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gygtplwvdh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gygtplwvdh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gygtplwvdh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gygtplwvdh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gygtplwvdh .gt_left {
  text-align: left;
}

#gygtplwvdh .gt_center {
  text-align: center;
}

#gygtplwvdh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gygtplwvdh .gt_font_normal {
  font-weight: normal;
}

#gygtplwvdh .gt_font_bold {
  font-weight: bold;
}

#gygtplwvdh .gt_font_italic {
  font-style: italic;
}

#gygtplwvdh .gt_super {
  font-size: 65%;
}

#gygtplwvdh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gygtplwvdh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gygtplwvdh .gt_indent_1 {
  text-indent: 5px;
}

#gygtplwvdh .gt_indent_2 {
  text-indent: 10px;
}

#gygtplwvdh .gt_indent_3 {
  text-indent: 15px;
}

#gygtplwvdh .gt_indent_4 {
  text-indent: 20px;
}

#gygtplwvdh .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="N03_001" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">N03_001</th>
<th id="N03_002" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">N03_002</th>
<th id="N03_003" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">N03_003</th>
<th id="N03_004" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">N03_004</th>
<th id="N03_005" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">N03_005</th>
<th id="N03_007" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">N03_007</th>
<th id="路線名" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">路線名</th>
<th id="駅名" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">駅名</th>
<th id="geometry" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">geometry</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="N03_001">福島県</td>
<td class="gt_row gt_left" headers="N03_002">NA</td>
<td class="gt_row gt_left" headers="N03_003">NA</td>
<td class="gt_row gt_left" headers="N03_004">福島市</td>
<td class="gt_row gt_left" headers="N03_005">NA</td>
<td class="gt_row gt_right" headers="N03_007">07201</td>
<td class="gt_row gt_left" headers="路線名">東北新幹線</td>
<td class="gt_row gt_left" headers="駅名">福島</td>
<td class="gt_row gt_center" headers="geometry">c(140.458612067603, 37.7540599673619)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="N03_001">福島県</td>
<td class="gt_row gt_left" headers="N03_002">NA</td>
<td class="gt_row gt_left" headers="N03_003">NA</td>
<td class="gt_row gt_left" headers="N03_004">郡山市</td>
<td class="gt_row gt_left" headers="N03_005">NA</td>
<td class="gt_row gt_right" headers="N03_007">07203</td>
<td class="gt_row gt_left" headers="路線名">東北新幹線</td>
<td class="gt_row gt_left" headers="駅名">郡山</td>
<td class="gt_row gt_center" headers="geometry">c(140.388619989856, 37.3986200007428)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="N03_001">福島県</td>
<td class="gt_row gt_left" headers="N03_002">NA</td>
<td class="gt_row gt_left" headers="N03_003">西白河郡</td>
<td class="gt_row gt_left" headers="N03_004">西郷村</td>
<td class="gt_row gt_left" headers="N03_005">NA</td>
<td class="gt_row gt_right" headers="N03_007">07461</td>
<td class="gt_row gt_left" headers="路線名">東北新幹線</td>
<td class="gt_row gt_left" headers="駅名">新白河</td>
<td class="gt_row gt_center" headers="geometry">c(140.188827537169, 37.1233084742238)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>2つ目のやり方の方が少しごちゃっとしたデータとして返ってきました。</p>
<p>めんどくさいけどクリーンな方か、簡単だけど煩雑な方か、お好みで使ってみてください。</p>
</section>
</section>
<section id="おわりに" class="level1">
<h1>おわりに</h1>
<p>今回は GIS を R で動かす基礎的な内容をご紹介しました。</p>
<p>交差する地物の抽出にも触れましたが、これだけではまだ分析に使える内容ではないので、距離計算などはまた別記事で書こうと思います。</p>
<p>間違いや効率的なコーディング等ございましたら、コメントにご記入ください。</p>
</section>
<section id="参考文献" class="level1">
<h1>参考文献</h1>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://www.kokon.co.jp/book/b610691.html">事例で学ぶ経済・政策分析のためのGIS入門</a></p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://rpubs.com/k_takano/r_de_gis">その無茶振り，（Rで）GISが解決します</a></p>
</div>
</div>
</div>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>あまりなじみのない方に向けて言っておくと、<code>tidyverse</code> パッケージの中に <code>ggplot2</code> も含まれています。↩︎</p></li>
<li id="fn2"><p>正直この程度であればこんなことするまでもないですが、例ということで悪しからず。いろいろ応用は利きますよ！↩︎</p></li>
<li id="fn3"><p>しかし後者の方が時間はかかりますし、2つのデータをもとに新しいデータを作るので、できたデータは2つのデータフレームの情報を含みます。つまり、ちょっと煩雑なデータが出来上がります。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>R</category>
  <category>GIS</category>
  <guid>https://yo5uke.github.io/tips/240506_gis_on_r/</guid>
  <pubDate>Sun, 05 May 2024 15:00:00 GMT</pubDate>
</item>
<item>
  <title>開発コンテナを使って R 環境を構築！</title>
  <link>https://yo5uke.github.io/tips/240504_container/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>Docker と VSCode を使って R の環境を構築する方法を説明します。</p>
<p>基本的な内容は次のページを参考にしており、個人的に使いやすいように修正を加えています。</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://zenn.dev/nicetak/articles/vscode-docker-2023">VSCode + Dockerでよりミニマルでポータブルな研究環境を</a></p>
</div>
</div>
</div>
<p>開発コンテナを使うメリットは、環境を簡単に共有でき、他の環境に影響を受けずに作業ができることです。</p>
<p>また、最初は設定の際に結構待ち時間が生じますので、ご了承ください。</p>
</section>
<section id="事前準備" class="level1">
<h1>事前準備</h1>
<p>まず、WSL2, Ubuntu, Homebrew, VSCode, Docker, Git, そして GitHub の準備をします。Windows と Mac での設定が異なるため、それぞれについて説明します。</p>
<p>ホスト側、共同作業者ともに事前準備が必要です。</p>
<section id="sec-wsl2-setting" class="level2">
<h2 class="anchored" data-anchor-id="sec-wsl2-setting">WSL2（Windows ユーザーのみ）</h2>
<ol type="1">
<li>PowerShell または Windows コマンドプロンプトを管理者権限で開く
<ul>
<li>右クリックで管理者権限を使えます。</li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240504_container/image/powershell.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
<ol start="2" type="1">
<li>以下のコマンドを入力して実行
<ul>
<li>これでインストールはできるはずですが、詳しくは<a href="https://learn.microsoft.com/ja-jp/windows/wsl/install">こちらのサイト</a>を参照してください。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>PowerShell</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="PowerShell" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">wsl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--install</span></span></code></pre></div>
</div>
<ol start="3" type="1">
<li>ユーザー名とパスワードを設定
<ul>
<li>インストールが終わると、Linux ディストリビューションのユーザー名とパスワードの作成を求められます<sup>1</sup>。</li>
<li>ユーザー名は何でも大丈夫です。パスワードもめちゃくちゃ簡単で問題ありません。</li>
<li>パスワードは画面上には表示されませんが、ちゃんと入力されています。慌てて何回も入力しないようにしてください。</li>
</ul></li>
</ol>
<p>エクスプローラーから Linux に入り、<code>\Ubuntu\home\ユーザー名</code> がメインとなるディレクトリです。</p>
</section>
<section id="homebrewmac-ユーザーのみ" class="level2">
<h2 class="anchored" data-anchor-id="homebrewmac-ユーザーのみ">Homebrew（Mac ユーザーのみ）</h2>
<p>Mac ユーザーは Homebrew を使って諸々インストールしていくので、まだの方はここでインストールしてください。</p>
<ol type="1">
<li>ターミナルを開く
<ul>
<li>アプリ一覧から「ターミナル」を探してください。</li>
</ul></li>
<li>以下のコマンドを入力して実行
<ul>
<li>パスワードを求められるので、入力してください。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/bin/bash</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">curl</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div>
</div>
</section>
<section id="sec-vscode-setting" class="level2">
<h2 class="anchored" data-anchor-id="sec-vscode-setting">VSCode</h2>
<ol type="1">
<li>VSCode の<a href="https://code.visualstudio.com/">ダウンロードサイト</a>からダウンロード、インストール
<ul>
<li>Download for Windows<sup>2</sup> をクリックしてダウンロードできます。</li>
<li>インストールができたら、VSCode を開いてください。</li>
</ul></li>
<li>（任意）日本語の拡張機能をインストール
<ul>
<li>画面左側に拡張機能のアイコン <img src="https://yo5uke.github.io/tips/240504_container/image/extention.png" class="img-fluid"> があります。ここの検索ボックスに <code>MS-CEINTL.vscode-language-pack-ja</code> と入力し、1番上に出てきたものをインストールします<sup>3</sup>。</li>
<li>インストール後、VSCode を再起動すれば日本語が反映されていると思います。</li>
</ul></li>
</ol>
<p><img src="https://yo5uke.github.io/tips/240504_container/image/vscode-ja.png" class="img-fluid"></p>
<ol start="3" type="1">
<li>拡張機能のインストール
<ul>
<li>拡張機能の検索ボックスで、次の ID を入力し、インストールします。</li>
<li><code>ms-vscode-remote.remote-containers</code> (Dev Containers)</li>
<li><code>ms-vscode-remote.remote-wsl</code> (WSL, Windows ユーザーのみ)<br>
</li>
</ul></li>
<li>WSL に接続（Windows ユーザーのみ）
<ul>
<li>VSCode から先ほどインストールした WSL に接続します。</li>
<li>画面左下の <code>&gt;&lt;</code> アイコンをクリックして、「WSL への接続」をクリックします。</li>
</ul></li>
</ol>
<p><img src="https://yo5uke.github.io/tips/240504_container/image/vscode-wsl.png" class="img-fluid"></p>
</section>
<section id="docker" class="level2">
<h2 class="anchored" data-anchor-id="docker">Docker</h2>
<p>Docker をインストールします。</p>
<ol type="1">
<li>Windows の方は<a href="https://docs.docker.com/desktop/install/windows-install/">ここ</a>から Docker Desktop for Windows を、Mac の方は<a href="https://docs.docker.com/desktop/install/mac-install/">こちら</a>からダウンロード＆インストール</li>
<li>設定の確認（Windows のみ）
<ul>
<li>インストール出来たら、画面上部の設定ボタンから Resources、WSL integration と進み、チェックボックスにチェック、Ubuntu がオンになっていることを確認してください。</li>
<li>たまに、何もしていないのにここがオフになっていて、トラブることがあります。</li>
<li>詳しくは<a href="https://docs.docker.jp/docker-for-windows/install.html">こちら</a>をご覧ください。日本語で書いてあります。</li>
</ul></li>
</ol>
<p><img src="https://yo5uke.github.io/tips/240504_container/image/docker-desktop.png" class="img-fluid"></p>
<ol start="3" type="1">
<li>画面左側の Volumes に進み、Create からボリュームを作成
<ul>
<li>次の3つを作成します（大文字小文字に注意！）。</li>
<li><code>fonts</code>, <code>cache</code>, <code>TinyTeX</code></li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240504_container/image/create_volume_mac.png" class="img-fluid figure-img"></p>
<figcaption>Mac での画面</figcaption>
</figure>
</div>
</section>
<section id="git" class="level2">
<h2 class="anchored" data-anchor-id="git">Git</h2>
<section id="windows" class="level3">
<h3 class="anchored" data-anchor-id="windows">Windows</h3>
<ol type="1">
<li>Ubuntu で git をインストール
<ul>
<li>Windows のアプリ一覧から Ubuntu を探し、開いてください。開いたら、以下のコマンドを入力して実行します。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Ubuntu</strong></pre>
</div>
<div class="sourceCode" id="cb3" data-filename="Ubuntu" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> apt-get install git</span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240504_container/image/ubuntu-git.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>Ubuntu</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li>設定
<ul>
<li>以下のコマンドを入力、実行します。ユーザー名は何でも大丈夫です。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Ubuntu</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="Ubuntu" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> config <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--global</span> user.name <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">任意のユーザ名</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> config <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--global</span> user.email <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">任意のメールアドレス</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
</div>
</section>
<section id="mac" class="level3">
<h3 class="anchored" data-anchor-id="mac">Mac</h3>
<ol type="1">
<li>Homebrew で git をインストール
<ul>
<li>ターミナルを開いて、以下のコマンドを入力して実行します。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb5" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">brew</span> install git</span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240504_container/image/homebrew.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>この Mac では2回目なので git is already installed と表示されてます…。</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li>設定
<ul>
<li>以下のコマンドを入力、実行します。ユーザー名は何でも大丈夫です。</li>
<li>ここに限らずですが、<code>[]</code> ごと置き換えてくださいね。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb6" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> config <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--global</span> user.name <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">任意のユーザ名</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> config <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--global</span> user.email <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">任意のメールアドレス</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
</div>
</section>
</section>
<section id="github-アカウントの作成" class="level2">
<h2 class="anchored" data-anchor-id="github-アカウントの作成">GitHub アカウントの作成</h2>
<p>ファイルは基本的に GitHub で管理するので、<a href="https://github.com/">ここ</a>からアカウントを作成してください。</p>
<section id="ポイント" class="level3">
<h3 class="anchored" data-anchor-id="ポイント">ポイント</h3>
<p>GitHub アカウントを作成したら、VSCode にログインしておきましょう。</p>
<ol type="1">
<li>VSCode を開く</li>
<li>画面左下のアイコンをクリック
<ul>
<li>GitHub でサインインを行う</li>
</ul></li>
</ol>
<p>GitHub にログインすることで、その後の作業がスムーズに進みます。</p>
<p>事前準備は以上です！</p>
</section>
</section>
</section>
<section id="開発環境の構築" class="level1">
<h1>開発環境の構築</h1>
<p>Docker を用いて環境を構築するにあたり、<a href="https://kazuyanagimoto.com/">柳本和春さん</a>のテンプレートをベースに作成しています。詳しくは柳本さんの <a href="https://zenn.dev/nicetak/articles/vscode-docker-2023">記事</a> をご覧ください。</p>
<p>主な変更点は以下の通りです。</p>
<ul>
<li>RStudio の設定を追加（パネルの配置など）</li>
<li>それに伴う Dockerfile の加筆修正と、更なる設定の追加
<ul>
<li>Quarto のインストールを追加</li>
<li>個人的にエラーが生じた部分を修正</li>
<li>日本語のロケール設定を追加</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
RStudio で出てくる警告について
</div>
</div>
<div class="callout-body-container callout-body">
<p>RStudio でこの後作業することになりますが、コマンドを打つと以下の警告が出てくるかもしれません。</p>
<p><code>警告メッセージ: Character set is not UTF-8; please change your locale</code></p>
<p>しかし、警告は出るものの、実際の作業には特に問題ありません。これに対処しようと試みましたが、できませんでした…。</p>
<p>もし詳しくて対処できた方は、コメントから教えていただけると幸いです。</p>
</div>
</div>
<p>まずは基本設定<sup>4</sup>から説明します。</p>
<section id="基本設定" class="level2">
<h2 class="anchored" data-anchor-id="基本設定">基本設定</h2>
<section id="github-リポジトリを作成" class="level3">
<h3 class="anchored" data-anchor-id="github-リポジトリを作成">GitHub リポジトリを作成</h3>
<ol type="1">
<li>テンプレートの <a href="https://github.com/yo5uke/template-R">GitHub リポジトリ</a> にアクセス</li>
<li>画面右の「Use this template」から「Create a new repository」を選択</li>
<li>Repository name を記入</li>
<li>Private を選択
<ul>
<li>通常のプロジェクトなら Private で OK</li>
</ul></li>
<li>「Create repository」をクリック</li>
</ol>
</section>
<section id="sec-host-vscode" class="level3">
<h3 class="anchored" data-anchor-id="sec-host-vscode">リポジトリをクローン</h3>
<!--
1. GitHub 画面右上の自分のアイコンをクリックし、Your repositories を選択

2. 一覧から、上で作ったリポジトリを選択

3. 画面中央右にある `<> Code` から、`.git` で終わる URL をコピー

4. Windows なら Ubuntu、Mac なら ターミナル を開き、以下のコマンドを入力して実行^[ディレクトリを指定してクローンしたい場合、`cd [ディレクトリへのパス]` で移動してから実行してください。]。

```{.sh filename="Terminal"}
git clone [コピーしたURL]
```

5. GitHub のユーザー名と、トークンを入力

    - GitHub アカウントのユーザー名と、[先ほど](#sec-github-token)作成したトークンを入力してください。

    - アカウントのパスワードではありません。

    - コピペで大丈夫です。ここでもトークンは表示されませんが、ちゃんと入力されています。
-->
<ol type="1">
<li>VSCode を開く</li>
<li>画面左側のアイコンから「ソース管理」<sup>5</sup>を開く</li>
<li>「リポジトリの複製」を選択し、さらに「GitHub から複製」を選ぶ</li>
<li>リポジトリを選択し、クローン
<ul>
<li>リポジトリは、「ユーザー名/リポジトリ名」の形式で表示されます。</li>
<li>基本的に表示されると思いますが、表示されない場合は手入力してください。</li>
<li>クローンしたリポジトリを開くか問われるので、開いてください。</li>
</ul></li>
<li>画面右下に「コンテナーで再度開く」と出たらクリック
<ul>
<li>出ない場合、画面左下「WSL: Ubuntu」<sup>6</sup>をクリックし、「コンテナーで再度開く」を選択してください。</li>
<li>初めて環境を構築する場合、ここでかなり時間がかかるので辛抱強く待ちましょう。</li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240504_container/image/reopen.png" class="img-fluid figure-img"></p>
<figcaption>「コンテナーで再度開く」をクリック</figcaption>
</figure>
</div>
<p>エクスプローラーを開き、<code>\\wsl.localhost\Ubuntu\home\ユーザー名</code> を確認してみてください。リポジトリ名と同じフォルダができていると思います。</p>
<p>Mac の場合は、ユーザー名の下にできているはずです。</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Mac でファイルが見当たらない？
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>クローンしたフォルダを見てみると、リポジトリにはあるはずのファイルやフォルダが見当たらないかもしれません。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240504_container/image/finder_mac_after_clone.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>ファイルが見当たらない…？</figcaption>
</figure>
</div>
<p>このようなときは、Finder の隠しファイルを表示する設定を変更する必要があります。</p>
<p>以下をターミナルで実行してください。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb7" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">defaults</span> write com.apple.finder AppleShowAllFiles TRUE</span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">killall</span> Finder</span></code></pre></div>
</div>
<p>これで、隠しファイルも表示されるようになります。</p>
<p>正直なところ、この設定は隠しファイルが邪魔であればしなくてもよいと思います<sup>7</sup>。VSCode 上ではきちんと表示されますので。</p>
</div>
</div>
</div>
</section>
<section id="rstudio-で開く" class="level3">
<h3 class="anchored" data-anchor-id="rstudio-で開く">RStudio で開く</h3>
<p>ここで、ブラウザを用いて RStudio を開きます。</p>
<ol type="1">
<li>任意のブラウザで、アドレスバーに <code>localhost:8787</code> と入力して開く</li>
<li>右上の <img src="https://yo5uke.github.io/tips/240504_container/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAIsUlEQVR4Xu3XeWyT5x0HcLbuaCemtaq0Tlo1oQ5UrWJtpW4tZe1GIYybkBLYAi2EK5yDhbZchUCBEcIRDAmE3LcJTuLEcew4jhM7cZzEfm2/l4/X5+szvp3Yjh2HBLz3jZMAGbBA9+ce6atXsiL/Pv49v8d5PGvW/9cLLJoi9pO15bx3F+WxUpcXcTfsbUbeolljr8RisR9M/9v/zaLRXvqIUvfuZ7cZaYkVrXdWljQbttZ2mdfWdQweYEv16yo52MoSFjehkHVmVVnbqm9Yil9JY7EfT3+bGa+5N9g/eNN2vsLb9G3rShhlawp46jSGD3qsyIMv4U6dDRTSFFvGUY380HnHVMYrbVEkEK1V53Za9TtZ0oV66u4ijWlnLplRZwjSRXti0/z8Vef2Z1FN/mzFxU2LVhcwNy1rJiVt66yDTjABoCLYr2iVOvVNtqiaJNjBGbYR2A6UbjeHEapxkF0U4fMRTUGUZppCKaZIvAdIlTjEFxNJF/pUZ8TGdG9zRJpcjUPTKxoK19X1f6PFJrg4/Qe6ytTxTfQ+LP/XsPnp3PlvMtyUzcVDyjYnvswx3cfYnmIuEbhJucI3GCNIHWWMELDQ0SCSKVhENnIlbjKdH6k2hBEqvRBhCw+Cag0RqDJlOuH4FzIozgl1PbtYUp6Nt0ViNPypfEtSm3gv3q8HfFlAXh/scZnaHSOoBzfA5AAgCz3fZDpHIXo9gi8p0ji+dtVYeDLnG5/8uXOwF9OtEbmHKCPfXKsJZJCEfovdpj05dogXGkYgioNETIgmbKJFGCDyBWZzXBKoHGkc6HABzT/L6a6kC7Qhmr0A5pc0GLL6FQGL/TqvTmo3VJlDGAN/SNQnTUCfZEj8i84zI5+mM6OLj/DC+2rABx/utUW3F0h7V/4DTvy/kFm9Hy7UVeiGYDKtCGwlMhtpU+ZJbXjGUKd+0SHMpAlsVnylAH1QYE+OKs09vIU4IAAC3f7HgBC3xjQSaTZFkYrNB79DbnJcbFXN5gtx53ZErMls1Nv+MMhVnRXkdiZr3Ijq9k9zjyFG7kFOdGPDrMiK861B65DLuySxGI7L9L7M8W4mwK58WJtGK02PQCqzTGASmRLCxp7JkBAhO8dk/Dc9yRsR0RG1fuwQsRmoUhw785K8dghOhi4Dtu0q5kiVw7qUFLk/cYDtfLwvhrp/WtSi/Mm7DIUa4fgCsMYUGkaA6rH82A8zwfw3JO0OocBln0IYJiDQJ3BK/nwUGM0nQr4c4munOxWjmSLTaEcudWWWtg38MFBZrhQFZCVYEOyMv2w9EkAsgtPBXT/B2BsHMC2hSUMSxCoxwck83fcHd6W02kvUlilf2XwHJcBE5wlNKPzdtCj6y93uUlAmSYsjQPuPS8g3gUSICAB3knA8GOAdec4niM1gOHtgtpg0rUO53t7G8Pv7WWEr/bYkUIs9BTABGImgPEuEMXJLnBJQH8cQJ8A/G57zfDb2+4Mv3a6YnTuLlp0+Vme95LQguajflkxCdBNAEzxLXisCy8CaJkG2JYjsJcpbJJPa1tc8/fTwyQgD/bKZgQg8kSAaBqgczrAPLEFO+MAcgYSGFz7rirANHdHffRQDYSTAHIGSqdtwQwBsXHA5CA+BIwAbHt4/BSMd4AAbCeGsERlBxKa2uyXAQu8/Gybl5yDKyIrEj8FZBeGnzAHMwJMdIEEeB4CmiYAvycBuV32EswJJDAJgNRKngKE7MKKczxvAToQ34ZnDOILAa62aTTHamQ4CVj6LXNgQ77A/dvC2sgWNth/ttei2l0uNc8jEJtzeh37K2FzHhKQP20bngvQRgDIGUjJavfP23F39M2t1NHXN1eNvbGlavTNK3dG0tpVpo1MmWdZbW9o/uGm8JzU2hHyO4ECeBES8KQvpCcCegjA5CCOzwEBYDui8hvKfu1hocqxhSsbIJ62TJkVK9b4oVtqD/wZs8N1QepSZMN+5LzMrdrH11mSmZAvuRn2ftVjMuaqgvCMOxAHxACi5eBtlUt7vFfn3MNH/BkSkzVX7cFqLBGoxjwEVptC8nJjQJ6vG4AWszucmXKPIhsZRB7NGalbvVtgsCY1I/4vuWrXCbFTV6SLyh8CkMcBXwv1gwVqt+6UWO86KFT7/0X8WyaKaJiuUYjhHAXp/SNgnS0qv2uNgFRrRF5hisgLDAPQEjbfeQFyoxQ0CI9HRT5D8DUi40/VEJwB+LA0Pm5LYikGt/P1ju/kHs1JidM2BVhIb/3l3g7Uewm2Wal4SMsjbkGtRDjkbSh+IQEb+kfBcrUXpfQZsBOMPvwUW6Y/36XGPq3neC5AxOtE4fO9/ar9dRL8CEejO8bVaSlEcYoqMpVrqgjyrdSr3c7HHYksReAtmiF+IfmkWvja6gZRTwZgEjLsUZjne/AYoJkANBKps4/IyWR1YRhFZlEV4QFwCbvTmQl6FBkCo+ZrFqq/JCMxZOFHM4mIwqeIbhBbgi6li5BZp2M/nNqCFB76xqoGUdqSOoFkZwfcfRvzEMVHkTjg/mOAXKI4RWpSXYds6J8Zbe6vOEpdBt+IXYF9CEUVmlZ8CM5WhJGjYodmAxtUJjJ7apObJZ/nS2M/myr+6Dodi/0omQksWtkgoiQ19cpOSgyyanNYQQLqHXFACeZFyGtXCdGBBKIDF2Afmo34kYvEaSAzWTgTCigOCnF9YpMY+7yp71oqG14w498K5B1+T7vm14mNPbuX0TvBXR0QRFE61TXmCFiNh0ByCB8FkANIIq4Sx/E7GXkCMMPaRpFmI1t85FgvPocWi700vcaMVykee/mLFnBREqMnd31zr+p4n0GdrxtEpgDEEJJH76TYpk3lQXhKC9CR0iLdmqsOvk58kIf7/H0X+SmOCu2/IfZw30ZWX2dqm1z7cRPX90+hzpTCBkxbuVLqzlZ0KQOL/fyZv4K+7yLfnOaOzd7EkSe8Q226u6ZRdPR4l/kdZv9TBuu/rH8DYKkbNvCO3j8AAAAASUVORK5CYII=" class="img-fluid"> をクリックし、「New Project…」を選択</li>
<li>「Existing Directory」を選択</li>
<li>「Browse…」より「work」を選択して「Choose」をクリック
<ul>
<li>「Create project」をクリックするとプロジェクトが作成されます。</li>
</ul></li>
<li>コンソールに以下を入力して実行
<ul>
<li><code>renv</code> はパッケージを管理するためのパッケージです。</li>
<li>Dockerfile でインストールすることを指示しているので、コンソールでインストールせずとも既に使用可能です<sup>8</sup>。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb8" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">init</span>()</span></code></pre></div>
</div>
</section>
<section id="python-の設定" class="level3">
<h3 class="anchored" data-anchor-id="python-の設定">Python の設定</h3>
<p>Python を使う場合、以下のパッケージをインストールしておきます。使わない場合はスキップしてください。</p>
<p>使い方としては、Quarto 上で Python のコードを書くことを想定しています。そのために必要なパッケージですが、その他のパッケージを使用する場合も同様の方法でインストールしてください。</p>
<ol type="1">
<li>VSCode に戻る</li>
<li>画面上部「ターミナル」より「新しいターミナル」を選択</li>
<li>以下のコマンドを入力して実行</li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb9" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install ipykernel jupyter</span></code></pre></div>
</div>
<p>パッケージは cache にキャッシュがあるので、1回インストールすれば、2回目以降の環境構築では不要です。</p>
</section>
<section id="sec-dvc-setting" class="level3">
<h3 class="anchored" data-anchor-id="sec-dvc-setting">DVC の設定</h3>
<p>DVC はデータを管理するためのツールです。</p>
<p>事前準備として、自分の Google ドライブの任意の場所で、データを入れる用のフォルダを作成しておいてください。</p>
<p>また、共同プロジェクトの場合は、フォルダの共有も設定してください。</p>
<ol type="1">
<li>VSCode に戻る</li>
<li>画面上部「ターミナル」より「新しいターミナル」を選択
<ul>
<li>既に画面下部にターミナルが表示されている場合はスキップして大丈夫です。</li>
</ul></li>
<li>以下のコマンドを入力して実行
<ul>
<li>初めて環境構築するときに1回実行しておけば、2回目以降の環境構築では不要です。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb10" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install dvc dvc-gdrive</span></code></pre></div>
</div>
<ol start="4" type="1">
<li>Google ドライブで作成したフォルダの ID をコピー
<ul>
<li>ID は、ドライブでフォルダを開いたときの URL で、最後のスラッシュ（~/folders/）より右側の部分です。</li>
</ul></li>
<li>次のコマンドを入力して実行
<ul>
<li>最後の部分（四角括弧ごと）をコピーした ID に変更してください。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb11" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> init <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> remote add <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-d</span> myremote gdrive://[Google DriveのフォルダID]</span></code></pre></div>
</div>
</section>
<section id="latex-の設定" class="level3">
<h3 class="anchored" data-anchor-id="latex-の設定">LaTeX の設定</h3>
<p>R Markdown などで <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> を使用するために、TinyTeX をインストールします。</p>
<p>RStudio のコンソールに以下のコマンドを入力して実行してください。</p>
<p>また、TinyTeX もキャッシュされるので、1回インストールすれば、2回目以降の環境構築では実行不要です。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb12" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tinytex"</span>)</span>
<span id="cb12-2">tinytex<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_tinytex</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dir =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/home/rstudio/.TinyTeX"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">force =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
</div>
<p>TinyTeX は、<img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> コードをコンパイルする際に必要なパッケージを自動でダウンロードしてくれるので、ローカルに面倒な設定をしなくて良いのが魅力です。</p>
<p>R Markdown や Quarto での PDF 出力の仕方については、<a href="https://yo5uke.github.io/tips/240329_rmarkdown_pdf/">こちらの記事</a>もご覧ください。</p>
</section>
<section id="sec-julia-setting" class="level3">
<h3 class="anchored" data-anchor-id="sec-julia-setting">Julia の設定</h3>
<p><a href="https://zenn.dev/nicetak/articles/vscode-docker-2023">参考記事</a>の設定に基づき、Julia が使えるようになっているため、その始め方についても書いておきます。特に使う予定がなければ、スキップしてください。</p>
<ol type="1">
<li>VSCode に戻り、ワーキングディレクトリに <code>Project.toml</code> というファイルを作成</li>
</ol>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
VSCode上でのファイル等の作成
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>VSCode 上でファイルやフォルダを作成するためには、左側のアイコン一番上の「エクスプローラー」をクリックし、その中の上部にあるアイコンの「新しいファイル…」や「新しいファイル…」を選択することでできます。</p>
<p>ここで注意点ですが、状況によっては意図せずフォルダの中に作ってしまうことがあります。</p>
<p>ワーキングディレクトリにファイルを作成したい場合は、まずエクスプローラーの空き部分をクリックします。すると、枠全体が青い線で囲まれると思います。</p>
<p>この状態であれば、親フォルダにファイルやフォルダが新規作成されます。下の画像の左側に注目してください。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240504_container/image/vscode-explorer1.png" class="img-fluid figure-img"></p>
<figcaption>エクスプローラーの空いている部分をクリックすると、全体が青枠で囲まれます。</figcaption>
</figure>
</div>
<p>一方、特定のフォルダの中に作成したい場合は、そのフォルダをクリックしてから新規作成を行ってください。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240504_container/image/vscode-explorer2.png" class="img-fluid figure-img"></p>
<figcaption>特定のフォルダをクリックすると、そのフォルダが青枠で囲まれます。</figcaption>
</figure>
</div>
</div>
</div>
</div>
<ol start="2" type="1">
<li>キーボードで <code>Ctrl</code> + <code>Shift</code> + <code>P</code> を入力<sup>9</sup></li>
<li>「Julia: Start REPL」を選択
<ul>
<li>少し下の方にあると思います。検索をかけると楽かもしれません。1度使ったものは上に表示される仕組みなので、2回目以降は探しやすいと思います。</li>
<li>少し時間がかかります。</li>
</ul></li>
<li>ターミナルで、以下のコマンドを入力して実行</li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Julia</strong></pre>
</div>
<div class="sourceCode" id="cb13" data-filename="Julia" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb13-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">using</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Pkg</span></span>
<span id="cb13-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Pkg</span>.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">activate</span>()</span></code></pre></div>
</div>
<p>以上で Julia の事前準備ができました。</p>
</section>
<section id="共同プロジェクトの場合" class="level3">
<h3 class="anchored" data-anchor-id="共同プロジェクトの場合">共同プロジェクトの場合</h3>
<p>共同プロジェクトの場合は、GitHub で共有するため、以下の手順を踏んでおいてください。</p>
<ul>
<li>GitHub リポジトリでコラボレーターを追加
<ul>
<li>リポジトリの Settings から Collaborators に進み、コラボレーターを追加してください。</li>
<li>Add people から招待できます。</li>
</ul></li>
</ul>
<p>また、ホスト側の環境構築もここで一区切りです！</p>
</section>
</section>
<section id="共同作業者の設定" class="level2">
<h2 class="anchored" data-anchor-id="共同作業者の設定">共同作業者の設定</h2>
<p>共同作業者も事前準備は終わらせておいてください。</p>
<ol type="1">
<li>GitHub で招待を受ける
<ul>
<li>メールが届いているはずですので、そこから GitHub にログインしてください。</li>
<li>リポジトリにアクセスできるようになります。</li>
</ul></li>
<li>リポジトリをクローン
<ul>
<li>ホスト側が作成したリポジトリをクローンします。</li>
<li><span id="sec-host-vscode">ホスト側の設定</span>と同様にしてクローンし、開いてください。</li>
</ul></li>
</ol>
<p>一旦ここまでで、共同作業者の設定は終わりです。</p>
</section>
</section>
<section id="作業" class="level1">
<h1>作業</h1>
<p>ワークフローについて説明します。</p>
<p>ワークフロー、特に GitHub 関連については<a href="https://yo5uke.github.io/tips/240525_vscode_github/">こちらの記事</a>で詳しめに解説しましたので、そちらも参考にしてください。</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
単独プロジェクトの場合
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>単独研究の場合でも、GitHubでブランチを作成することは非常に有用です。以下の理由から、ブランチの作成を推奨します。</p>
<ol type="1">
<li>機能の分離
<ul>
<li>新しい機能や実験的な変更を行う際に、メインの作業を妨げることなく独立して作業ができます。</li>
<li>例えば、新しい分析手法を試す場合、その作業を独立したブランチで行うことで、問題があってもメインのコードに影響を与えません。</li>
</ul></li>
<li>バージョン管理
<ul>
<li>ブランチを使うことで、異なるバージョンの作業を分離して管理できます。以前の状態に簡単に戻すことができます。</li>
</ul></li>
<li>安全な実験環境
<ul>
<li>実験的な変更や新しいアイデアの試行錯誤を安全に行える環境が確保できます。メインのコードベースが壊れる心配がありません。</li>
</ul></li>
<li>バックアップとリカバリ
<ul>
<li>作業が進行中の状態をこまめにコミットし、ブランチを使って管理することで、失敗した場合でも簡単に元の状態に戻れます。</li>
</ul></li>
</ol>
<p>以上、ChatGPT さんの解説でした。</p>
</div>
</div>
</div>
<section id="作業開始時" class="level2">
<h2 class="anchored" data-anchor-id="作業開始時">作業開始時</h2>
<p>作業を開始する際は、以下の手順で作業を開始してください。</p>
<ol type="1">
<li>VSCode で開く
<ul>
<li>ホスト側、共同作業者ともに、VSCode の開発コンテナで開いてください。</li>
</ul></li>
<li>作業ブランチを作成
<ul>
<li>画面左下、<code>main</code> と書かれているところをクリックし、「＋新しいブランチの作成…」を選択してください。</li>
<li>ブランチ名は、作業内容がわかるようにしてください。</li>
<li>例えば、<code>feature/作業内容</code> など。</li>
</ul></li>
<li>作業ブランチに切り替え
<ul>
<li>再び <code>main</code> と書かれているところをクリックし、作成したブランチを選択してください。</li>
</ul></li>
<li>作業を開始</li>
</ol>
</section>
<section id="作業終了時" class="level2">
<h2 class="anchored" data-anchor-id="作業終了時">作業終了時</h2>
<p>先に作業終了時について説明します。ここで想定しているのは共同作業を行っている場合です。</p>
<p>単独での業務の場合は、ブランチを作成する必要はないと思います。コミットとプッシュを繰り返す流れで十分です。</p>
<ol type="1">
<li>作業内容をコミット
<ul>
<li>画面左側の「ソース管理」をクリックします。</li>
<li>ファイルにカーソルを当てると、右側に「+」が表示されます。これをクリックしてステージングします<sup>10</sup>。</li>
<li>画面上部の「メッセージを入力」にコミットメッセージ<sup>11</sup>を入力し、「✓コミット」をクリックしてください。</li>
</ul></li>
<li>プッシュ
<ul>
<li>「ソース管理」の右側にある「…」をクリックし、「プッシュ」を選択してください。</li>
<li>これで、作業内容が GitHub にアップロードされます。</li>
<li>ブランチを公開しますか？と聞かれたら「OK」を選択してください。</li>
</ul></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://yo5uke.github.io/tips/240504_container/image/no-branch-message.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>ところで、現在は作業中のブランチが先ほど作成したブランチになっていると思います。</p>
<p>これを <code>main</code> にマージするために、プルリクエストを作成します。要は、自分が作成したブランチをホスト側に <code>main</code> へ取り込んでもらうための手続きです。</p>
<p>このステップを挟む理由は、例えば正常に作動しないコードが <code>main</code> に勝手にマージされることを防ぐためです。</p>
<ol start="3" type="1">
<li>プルリクエスト（GitHub）
<ul>
<li>GitHub にアクセスし、作業中のリポジトリを開いてください。</li>
<li>画面上部の「Pull requests」をクリックし、「New pull request」をクリックしてください。</li>
<li>作業中のブランチと <code>main</code> を比較して、プルリクエストを作成します。</li>
<li>作業内容を説明し、ホスト側にマージしてもらうようにリクエストします。</li>
<li>承認されれば、無事 <code>main</code> にマージされます。</li>
</ul></li>
<li>プル（VSCode）
<ul>
<li>ホスト側で、プルリクエストが承認されたら、<code>main</code> にマージされた内容を取り込むためにプルします<sup>12</sup>。</li>
<li>画面下部のブランチ名をクリックし、<code>main</code> を選択してください。これで再び <code>main</code> に切り替わります。</li>
<li>再び画面左からの「ソース管理」から、「ソース管理」の右側にある「…」をクリックし、「プル」を選択してください。</li>
<li>これで、ローカルの <code>main</code> が最新の状態になります。</li>
</ul></li>
</ol>
<p>この流れを繰り返すことで作業のサイクルを回していきます。</p>
<p>繰り返しになりますが、GitHub については<a href="https://yo5uke.github.io/tips/240525_vscode_github/">こちらの記事</a>も参考にしてください。</p>
</section>
<section id="r-のパッケージ" class="level2">
<h2 class="anchored" data-anchor-id="r-のパッケージ">R のパッケージ</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
パッケージの記録
</div>
</div>
<div class="callout-body-container callout-body">
<p>ここからの作業で重要なことですが、これから説明する <code>renv</code> 等で記録したら、コミット、プッシュ、プルを通じてファイルを共有することを忘れないでください。</p>
</div>
</div>
<p>作業中新たにパッケージを使用した場合、それを <code>renv.lock</code> ファイルに記録することで、必要なパッケージを共同作業者と共有することができます。</p>
<p>バージョンごと記録できるので、全く同じ環境を再現することが可能です。</p>
<ol type="1">
<li>R のコンソールで以下を実行
<ul>
<li>新しいパッケージをインストールし、コード内で使用したら、以下のコードを実行してください<sup>13</sup>。</li>
<li><code>renv</code> がアクティベートされていない場合、アクティベートする必要がありますが、おそらく実行した際に「renv をアクティベートして lock ファイルに記録する」というような選択肢が提示されますので、それを選んでください。</li>
<li>以下のコードでアクティベートすることも可能です。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb14" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">snapshot</span>()</span></code></pre></div>
</div>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb15" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">activate</span>()</span></code></pre></div>
</div>
<ol start="2" type="1">
<li>（共同作業者）パッケージをインストール
<ul>
<li>使用したパッケージは <code>renv.lock</code> に記録されているため、そこから（バージョンもホスト側に揃えて）インストールが可能です。</li>
<li>作業者は lock ファイルをアップデートしたら、コミットとプッシュを行ってください。</li>
<li>共同作業者はその lock ファイルをプルしておいてください。</li>
<li>バージョンの違いにより実行できないようなことを防げます。</li>
<li>以下のコードを実行してください。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>R</strong></pre>
</div>
<div class="sourceCode" id="cb16" data-filename="R" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">renv<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">restore</span>()</span></code></pre></div>
</div>
<p>これで R の開発環境を揃えることができます。</p>
<p>また、新しいパッケージを使ったら、その作業が終わるごとに <code>renv::snapshot()</code> 記録し、共同作業者は <code>renv::restore()</code> でインストールしてください。</p>
</section>
<section id="python-のパッケージ" class="level2">
<h2 class="anchored" data-anchor-id="python-のパッケージ">Python のパッケージ</h2>
<p>設定では Python の設定も加えていますので、必要に応じて Python も使用できます。</p>
<p>また、そもそも DVC が Python のパッケージなので、それも <code>renv</code> と同様に記録して共有します。</p>
<ol type="1">
<li>Python のパッケージを追加
<ul>
<li>先ほどと同様に、新しいターミナルを開いて、以下のコードでパッケージをインストールします。</li>
<li>DVC 以外特に使うものがなければ、ここはスキップしてください。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb17" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">パッケージ名</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
</div>
<ol start="2" type="1">
<li>パッケージを記録
<ul>
<li>R と同様に、作業が終わったら以下のコードでパッケージを記録します。</li>
<li>特に何もインストールしていなくても、DVC を使っていますので、これは実行してください。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb18" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> freeze <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> requirements.txt</span></code></pre></div>
</div>
<ol start="3" type="1">
<li>（共同作業者）パッケージをインストール
<ul>
<li>ここでも事前に <code>.txt</code> ファイルを共有しておいてください。</li>
<li>共同作業者は、次のコードで Python パッケージをインストールします。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb19" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span></code></pre></div>
</div>
</section>
<section id="データの管理" class="level2">
<h2 class="anchored" data-anchor-id="データの管理">データの管理</h2>
<p>データは DVC で管理します。データは Google Drive 上で保管されます。</p>
<ol type="1">
<li>ワーキングディレクトリに、<code>data</code> というフォルダを作成</li>
<li>データが入ったら、以下のコードを実行
<ul>
<li><code>data</code> フォルダごとドライブに追加します。</li>
<li><code>data</code> フォルダは <code>.gitignore</code> に記載されているため、GitHub にはアップロードされません。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb20" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> add data/</span></code></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
データの入れ方
</div>
</div>
<div class="callout-body-container callout-body">
<p>データは、Windows のエクスプローラーや Mac の Finder から直接フォルダに入れて大丈夫です（通常の Windows や Mac での作業のように）。</p>
<p>データをプッシュした後に Google Drive を見てもらえれば分かりますが、よくわからない形で保存されています。DVC の仕組みがそうなっているからなので、決してファイルが破損しているわけではありません。</p>
<p>ちなみに Windows ユーザーの方で、一回ローカルに落としてから Linux にデータ等を入れたら <code>Zone.Identifier</code> というファイルができることがありますが、これは無視して大丈夫です。邪魔であればまとめて消してください。</p>
</div>
</div>
<ol start="3" type="1">
<li>データをアップロード
<ul>
<li>以下のコードでデータをプッシュします。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb21" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> push</span></code></pre></div>
</div>
<p>最初は add と push をする過程でアカウントの認証が必要になりますが、表示に従って認証を進めてください<sup>14</sup>。</p>
<ol start="4" type="1">
<li>（共同作業者）データのダウンロード
<ul>
<li>以下のコードでデータをダウンロードします。</li>
</ul></li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Terminal</strong></pre>
</div>
<div class="sourceCode" id="cb22" data-filename="Terminal" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dvc</span> pull</span></code></pre></div>
</div>
</section>
<section id="julia-のパッケージ" class="level2">
<h2 class="anchored" data-anchor-id="julia-のパッケージ">Julia のパッケージ</h2>
<p>Julia はパッケージが自動で <code>Project.toml</code> に保存されるため、共同作業者がインストールするだけで大丈夫です。</p>
<ol type="1">
<li>先ほどと同じ手順で環境をアクティベートする</li>
<li>以下のコードでパッケージをインストール</li>
</ol>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Julia</strong></pre>
</div>
<div class="sourceCode" id="cb23" data-filename="Julia" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb23-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Pkg</span>.<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">instantiate</span>()</span></code></pre></div>
</div>
</section>
<section id="まとめ" class="level2">
<h2 class="anchored" data-anchor-id="まとめ">まとめ</h2>
<p>これらの作業を通じて、共同作業者もホスト側と同じ環境を揃えることができます。</p>
<p>環境を揃えるためには、コミット、プッシュ、プルを行い、記録したファイルを共有することが重要です。</p>
<p>単独での場合は、ブランチを作成する必要はないですが、コミット、プッシュで管理を行いましょう。</p>
<p>以上がワークフローです。お疲れ様でした！</p>
</section>
</section>
<section id="環境構築まとめ" class="level1">
<h1>環境構築まとめ</h1>
<p>作業フローは、<del>超適当にまとめると</del>次のようになります。</p>
<section id="ホスト" class="level2">
<h2 class="anchored" data-anchor-id="ホスト">ホスト</h2>
<ol start="0" type="1">
<li>必要なソフト等をインストールし、事前準備を行う。
<ul>
<li>WSL2, Ubuntu, Homebrew, VSCode, Docker, Git, GitHub</li>
</ul></li>
<li>GitHub でリポジトリをインポート、クローン</li>
<li>RStudio Server でプロジェクトを作成
<ul>
<li><code>renv::init()</code> で renv を開始</li>
<li><code>renv::snapshot()</code> で適宜パッケージを記録</li>
</ul></li>
<li><code>data</code> フォルダを作成し、DVC で管理
<ul>
<li>データは <code>data</code> 内に追加</li>
<li><code>dvc add data/</code> と<code>dvc push</code> を使用</li>
</ul></li>
<li>VSCode 上でコミット、プッシュ</li>
</ol>
</section>
<section id="共同作業者" class="level2">
<h2 class="anchored" data-anchor-id="共同作業者">共同作業者</h2>
<ol start="0" type="1">
<li>必要なソフト等をインストールし、事前準備を行う。
<ul>
<li>WSL2, Ubuntu, Homebrew, VSCode, Docker, Git, GitHub</li>
</ul></li>
<li>GitHub でリポジトリをクローン</li>
<li>RStudio Server でプロジェクトを開く
<ul>
<li><code>renv::restore()</code> でパッケージをインストール</li>
</ul></li>
<li><code>dvc pull</code> でデータをダウンロード</li>
<li>VSCode 上でコミット、プッシュ</li>
</ol>
</section>
<section id="作業中" class="level2">
<h2 class="anchored" data-anchor-id="作業中">作業中</h2>
<ul>
<li>GitHub にコミット、プッシュ、プルを繰り返す。</li>
<li>データも新たに追加した場合、DVC で add, push, pull を行う。</li>
</ul>
</section>
</section>
<section id="おわりに" class="level1">
<h1>おわりに</h1>
<p>今回は Docker &amp; VSCode を用いた開発環境を説明しました。</p>
<p>個人的な経験として、環境構築はエラーとの戦いです。できるだけエラーに遭遇しないよう丁寧に書いたつもりですが、まだまだ把握していないエラーがたくさんあると思います。</p>
<p>何かエラー等ありましたら、コメントしていただけると幸いです。</p>
</section>
<section id="参考文献" class="level1">
<h1>参考文献</h1>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://zenn.dev/nicetak/articles/vscode-docker-2023">VSCode + Dockerでよりミニマルでポータブルな研究環境を</a></p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://qiita.com/tommy_g/items/771ac45b89b02e8a5d64">UbuntuにGitをインストールする</a></p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><a href="https://qiita.com/future_kame/items/9fa256aea09faa28b357">githubを使った共同作業の手順</a></p>
</div>
</div>
</div>
</section>
<section id="追記" class="level1">
<h1>追記</h1>
<p>2024/5/11：リポジトリ作成の手順を変更</p>
<p>2024/5/22：Mac への対応と、内容の刷新</p>
<p>2024/5/25：リポジトリのクローン方法を変更</p>
<p>2024/6/10：テンプレートのキャッシュに関する設定を変更</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>求められない場合は、続けて <code>wsl</code> とだけ入力してください。↩︎</p></li>
<li id="fn2"><p>もしくは Mac↩︎</p></li>
<li id="fn3"><p>単に Japanese でも出てきます。笑↩︎</p></li>
<li id="fn4"><p>単独研究ならここのみで OK、共同研究ならホストが行う設定。↩︎</p></li>
<li id="fn5"><p>上から3番目↩︎</p></li>
<li id="fn6"><p>Mac なら <code>&gt;&lt;</code>↩︎</p></li>
<li id="fn7"><p>TRUE のところを FALSE にして再度実行すれば消せます。↩︎</p></li>
<li id="fn8"><p>余談ですが、<code>renv::init()</code> のように <code>パッケージ名::関数</code> のような書き方をすれば、<code>library(パッケージ名)</code> をせずとも関数を使えます。1度だけ使いたいようなときに便利です。↩︎</p></li>
<li id="fn9"><p><code>Ctrl</code> は Mac だと <code>command</code>↩︎</p></li>
<li id="fn10"><p>ステージしていないとコミットできません。↩︎</p></li>
<li id="fn11"><p>どのような作業をしたのか↩︎</p></li>
<li id="fn12"><p>現段階ではまだローカルには <code>main</code> が反映されていません。↩︎</p></li>
<li id="fn13"><p>インストールしただけでコード内で使用していない場合は記録できません。↩︎</p></li>
<li id="fn14"><p>私の場合認証の読み込みが終わらない問題によく直面するので、その際にはターミナルを消し、再度新しいターミナルで実行するようにしています。↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>R</category>
  <category>Docker</category>
  <category>Windows</category>
  <category>Mac</category>
  <category>Ubuntu</category>
  <category>VSCode</category>
  <category>GitHub</category>
  <guid>https://yo5uke.github.io/tips/240504_container/</guid>
  <pubDate>Fri, 03 May 2024 15:00:00 GMT</pubDate>
  <media:content url="https://yo5uke.github.io/tips/240504_container/image/Rlogo.png" medium="image" type="image/png" height="112" width="144"/>
</item>
<item>
  <title>政令指定都市・中核市の整理</title>
  <link>https://yo5uke.github.io/tips/240414_benri_seirei/</link>
  <description><![CDATA[ 




<section id="はじめに" class="level1">
<h1>はじめに</h1>
<p>これを作ったきっかけは、政令指定都市ダミーや中核市ダミーをサクサクッと作りたかったからです。</p>
<p>また、データによっては</p>
<div class="cell">
<div class="cell-output-display">
<div id="ahhoqnipfv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ahhoqnipfv table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ahhoqnipfv thead, #ahhoqnipfv tbody, #ahhoqnipfv tfoot, #ahhoqnipfv tr, #ahhoqnipfv td, #ahhoqnipfv th {
  border-style: none;
}

#ahhoqnipfv p {
  margin: 0;
  padding: 0;
}

#ahhoqnipfv .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ahhoqnipfv .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ahhoqnipfv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ahhoqnipfv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ahhoqnipfv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ahhoqnipfv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ahhoqnipfv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ahhoqnipfv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ahhoqnipfv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ahhoqnipfv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ahhoqnipfv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ahhoqnipfv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ahhoqnipfv .gt_spanner_row {
  border-bottom-style: hidden;
}

#ahhoqnipfv .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ahhoqnipfv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ahhoqnipfv .gt_from_md > :first-child {
  margin-top: 0;
}

#ahhoqnipfv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ahhoqnipfv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ahhoqnipfv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ahhoqnipfv .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ahhoqnipfv .gt_row_group_first td {
  border-top-width: 2px;
}

#ahhoqnipfv .gt_row_group_first th {
  border-top-width: 2px;
}

#ahhoqnipfv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahhoqnipfv .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ahhoqnipfv .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ahhoqnipfv .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ahhoqnipfv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahhoqnipfv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ahhoqnipfv .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ahhoqnipfv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ahhoqnipfv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ahhoqnipfv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ahhoqnipfv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahhoqnipfv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ahhoqnipfv .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahhoqnipfv .gt_left {
  text-align: left;
}

#ahhoqnipfv .gt_center {
  text-align: center;
}

#ahhoqnipfv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ahhoqnipfv .gt_font_normal {
  font-weight: normal;
}

#ahhoqnipfv .gt_font_bold {
  font-weight: bold;
}

#ahhoqnipfv .gt_font_italic {
  font-style: italic;
}

#ahhoqnipfv .gt_super {
  font-size: 65%;
}

#ahhoqnipfv .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ahhoqnipfv .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ahhoqnipfv .gt_indent_1 {
  text-indent: 5px;
}

#ahhoqnipfv .gt_indent_2 {
  text-indent: 10px;
}

#ahhoqnipfv .gt_indent_3 {
  text-indent: 15px;
}

#ahhoqnipfv .gt_indent_4 {
  text-indent: 20px;
}

#ahhoqnipfv .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="都道府県" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">都道府県</th>
<th id="市区町村" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">市区町村</th>
<th id="ID" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ID</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="都道府県">北海道</td>
<td class="gt_row gt_left" headers="市区町村">札幌市中央区</td>
<td class="gt_row gt_right" headers="ID">01101</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="都道府県">北海道</td>
<td class="gt_row gt_left" headers="市区町村">札幌市北区</td>
<td class="gt_row gt_right" headers="ID">01102</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="都道府県">北海道</td>
<td class="gt_row gt_left" headers="市区町村">札幌市東区</td>
<td class="gt_row gt_right" headers="ID">01103</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>と、政令指定都市が市単位ではなく区単位でしかなかったりします。要は、「札幌市」だけのような行が欲しいということです。</p>
<p>データによってはもう少しいじらなければならないものの、<code>dplyr::bind_rows()</code>を使って市のデータを追加できたりします。</p>
</section>
<section id="コード" class="level1">
<h1>コード</h1>
<p>まとめたコードは以下です<sup>1</sup>。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 政令指定都市一覧</span></span>
<span id="cb1-2">name_seirei <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"札幌市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"仙台市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"さいたま市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"千葉市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"横浜市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"川崎市"</span>, </span>
<span id="cb1-3">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"相模原市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"新潟市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"静岡市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"浜松市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"名古屋市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"京都市"</span>, </span>
<span id="cb1-4">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"大阪市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"堺市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"神戸市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"岡山市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"広島市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"北九州市"</span>, </span>
<span id="cb1-5">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"福岡市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"熊本市"</span>)</span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 政令指定都市（特別区含む）の市町村コード</span></span>
<span id="cb1-8">seirei_city <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tibble<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb1-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name_pref =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"北海道"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"宮城県"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"埼玉県"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"千葉県"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"東京都"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"神奈川"</span>, </span>
<span id="cb1-10">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"神奈川"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"神奈川"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"新潟県"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"静岡県"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"静岡県"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"愛知県"</span>, </span>
<span id="cb1-11">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"京都府"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"大阪府"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"大阪府"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"兵庫県"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"岡山県"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"広島県"</span>, </span>
<span id="cb1-12">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"福岡県"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"福岡県"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"熊本県"</span>), </span>
<span id="cb1-13">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name_mun  =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"札幌市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"仙台市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"さいたま市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"千葉市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"特別区"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"横浜市"</span>, </span>
<span id="cb1-14">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"川崎市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"相模原市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"新潟市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"静岡市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"浜松市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"名古屋市"</span>, </span>
<span id="cb1-15">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"京都市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"大阪市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"堺市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"神戸市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"岡山市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"広島市"</span>, </span>
<span id="cb1-16">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"北九州市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"福岡市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"熊本市"</span>), </span>
<span id="cb1-17">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id_mun    =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"01100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"04100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"11100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"12100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"13100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"14100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"14130"</span>, </span>
<span id="cb1-18">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"14150"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"15100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"22100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"22130"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"23100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"26100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"27100"</span>, </span>
<span id="cb1-19">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"27140"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"28100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"33100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"34100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"40100"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"40130"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"43100"</span>)</span>
<span id="cb1-20">)</span>
<span id="cb1-21"></span>
<span id="cb1-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 中核市一覧</span></span>
<span id="cb1-23">chukaku <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"宇都宮市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"金沢市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"岐阜市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"姫路市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"鹿児島市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"秋田市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"郡山市"</span>, </span>
<span id="cb1-24">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"和歌山市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"長崎市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"大分市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"豊田市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"福山市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"高知市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"宮崎市"</span>, </span>
<span id="cb1-25">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"いわき市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"長野市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"豊橋市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"高松市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"旭川市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"松山市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"横須賀市"</span>, </span>
<span id="cb1-26">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"奈良市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"倉敷市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"川越市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"船橋市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"岡崎市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"高槻市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"東大阪市"</span>, </span>
<span id="cb1-27">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"富山市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"函館市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"下関市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"青森市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"盛岡市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"柏市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"西宮市"</span>, </span>
<span id="cb1-28">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"久留米市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"前橋市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"大津市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"尼崎市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"高崎市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"豊中市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"那覇市"</span>, </span>
<span id="cb1-29">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"枚方市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"八王子市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"越谷市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"呉市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"佐世保市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"八戸市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"福島市"</span>, </span>
<span id="cb1-30">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"川口市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"八尾市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"明石市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"鳥取市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"松江市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"山形市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"福井市"</span>, </span>
<span id="cb1-31">             <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"甲府市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"寝屋川市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"水戸市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"吹田市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"松本市"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"一宮市"</span>)</span></code></pre></div>
</div>
<p><code>市区町村</code> という列に市区町村名が入っているとして、<code>dplyr::filter(市区町村 %in% name_seirei)</code> のようにすれば、政令指定都市だけをとりだすことができます。</p>
<p>また、<code>dplyr::if_else(市区町村 %in% name_seirei, 1, 0)</code> のようにすれば、ダミーも簡単に作れます。</p>
<p><code>dplyr::bind_rows() |&gt; dplyr::arrange()</code> をすれば、市レベルのデータを追加できます（ついでに昇順に並べ替えもしています）。</p>
<p>こんな感じになります。</p>
<div class="cell">
<div class="cell-output-display">
<div id="hhvszesfib" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hhvszesfib table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hhvszesfib thead, #hhvszesfib tbody, #hhvszesfib tfoot, #hhvszesfib tr, #hhvszesfib td, #hhvszesfib th {
  border-style: none;
}

#hhvszesfib p {
  margin: 0;
  padding: 0;
}

#hhvszesfib .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hhvszesfib .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hhvszesfib .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hhvszesfib .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hhvszesfib .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hhvszesfib .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hhvszesfib .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hhvszesfib .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hhvszesfib .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hhvszesfib .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hhvszesfib .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hhvszesfib .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hhvszesfib .gt_spanner_row {
  border-bottom-style: hidden;
}

#hhvszesfib .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hhvszesfib .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hhvszesfib .gt_from_md > :first-child {
  margin-top: 0;
}

#hhvszesfib .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hhvszesfib .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hhvszesfib .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hhvszesfib .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hhvszesfib .gt_row_group_first td {
  border-top-width: 2px;
}

#hhvszesfib .gt_row_group_first th {
  border-top-width: 2px;
}

#hhvszesfib .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hhvszesfib .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hhvszesfib .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hhvszesfib .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hhvszesfib .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hhvszesfib .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hhvszesfib .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hhvszesfib .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hhvszesfib .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hhvszesfib .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hhvszesfib .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hhvszesfib .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hhvszesfib .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hhvszesfib .gt_left {
  text-align: left;
}

#hhvszesfib .gt_center {
  text-align: center;
}

#hhvszesfib .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hhvszesfib .gt_font_normal {
  font-weight: normal;
}

#hhvszesfib .gt_font_bold {
  font-weight: bold;
}

#hhvszesfib .gt_font_italic {
  font-style: italic;
}

#hhvszesfib .gt_super {
  font-size: 65%;
}

#hhvszesfib .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hhvszesfib .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hhvszesfib .gt_indent_1 {
  text-indent: 5px;
}

#hhvszesfib .gt_indent_2 {
  text-indent: 10px;
}

#hhvszesfib .gt_indent_3 {
  text-indent: 15px;
}

#hhvszesfib .gt_indent_4 {
  text-indent: 20px;
}

#hhvszesfib .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="都道府県" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">都道府県</th>
<th id="市区町村" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">市区町村</th>
<th id="ID" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ID</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="都道府県">北海道</td>
<td class="gt_row gt_left" headers="市区町村">札幌市</td>
<td class="gt_row gt_right" headers="ID">01100</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="都道府県">北海道</td>
<td class="gt_row gt_left" headers="市区町村">札幌市中央区</td>
<td class="gt_row gt_right" headers="ID">01101</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="都道府県">北海道</td>
<td class="gt_row gt_left" headers="市区町村">札幌市北区</td>
<td class="gt_row gt_right" headers="ID">01102</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="都道府県">北海道</td>
<td class="gt_row gt_left" headers="市区町村">札幌市東区</td>
<td class="gt_row gt_right" headers="ID">01103</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="まとめ" class="level1">
<h1>まとめ</h1>
<p>持ってて損は無し！また何かあれば更新します。</p>
</section>
<section id="追記" class="level1">
<h1>追記</h1>
<p>2024年5月3日：コード微修正</p>


<!-- -->

</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">注</h2>

<ol>
<li id="fn1"><p>2024年4月現在↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>R</category>
  <category>備忘録</category>
  <guid>https://yo5uke.github.io/tips/240414_benri_seirei/</guid>
  <pubDate>Sat, 13 Apr 2024 15:00:00 GMT</pubDate>
</item>
</channel>
</rss>
