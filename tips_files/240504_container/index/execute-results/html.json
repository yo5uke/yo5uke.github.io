{
  "hash": "adb63660a9b9197035f1b31c516ee007",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"【Windows】開発コンテナを使って R 環境を構築！\"\ndate: 2024-05-05\ndate-modified: last-modified\nformat: html\ncategories: \n  - R\n  - Docker\n  - Ubuntu\n  - VSCode\n---\n\n\nローカル環境から卒業！\n\n# はじめに\n\nWSL2 と VSCode の開発コンテナを使って R の環境を構築する方法を説明します。\n\n基本的な内容は[こちらのページ](https://zenn.dev/nicetak/articles/vscode-docker-2023)を参考にしており、個人的に使いやすいように修正を加えています。\n\n開発コンテナを使うメリット等はそちらを参照してください。\n\n# 事前準備\n\nまず、WSL2 と Ubuntu、そして VSCode の準備をします。\n\n## WSL2\n\n1. PowerShell または Windows コマンドプロンプトを管理者権限で開きます。\n\n    - 右クリックで管理者権限を使えます。\n\n![](powershell.png)\n\n2. 以下のコマンドを入力して実行する。\n\n```{.markdown filename=\"bash\"}\nwsl --install\n```\n\nこれでインストールはできているはずですが、詳しくは[こちらのサイト](https://learn.microsoft.com/ja-jp/windows/wsl/install)を参照してください。\n\n## Ubuntu\n\n1. Microsoft Store を開く。\n\n2. 「Ubuntu」と検索する。\n\n3. インストールする。\n\n![](ubuntu.png)\n\nエクスプローラーから Linux に入り、`\\Ubuntu\\home\\ユーザー名` がメインとなるディレクトリです。 \n\n## VSCode {#sec-vscode-setting}\n\n1. VSCode の[ダウンロードサイト](https://code.visualstudio.com/)からダウンロードする。\n\n    - Download for Windows をクリックしてダウンロードできます。\n\n2. （任意）日本語の拡張機能をインストールする。\n\n    - 画面左側に拡張機能のアイコンがあります（デフォルトでは上から5番目）。ここの検索ボックスに `MS-CEINTL.vscode-language-pack-ja` と入力し、1番上に出てきたものをインストールします（単に Japanese でも出てきます）。\n    \n    - インストール後、VSCode を再起動すれば日本語が反映されていると思います。\n\n![](vscode-ja.png)\n\n3. 拡張機能のインストール\n\n    - 拡張機能の検索ボックスで、次の ID を入力し、インストールします。\n    \n    - `ms-vscode-remote.remote-containers` (Dev Containers)\n    \n    - `ms-vscode-remote.remote-wsl` (WSL)\n    \n4. WSL に接続する。\n\n    - VSCode から先ほどインストールした WSL に接続します。\n    \n    - 画面左下の `><` アイコンをクリックして、「WSL への接続」をクリックします。\n\n![](vscode-wsl.png)\n    \n## Docker\n\nDocker をインストールします。\n\n1. [ここ](https://docs.docker.com/desktop/install/windows-install/)から Docker Desktop for Windows をクリックしてダウンロード＆インストール\n\n2. 設定の確認\n\n    - インストール出来たら、画面上部の設定から Resources、WSL integration と進み、チェックボックスにチェック、Ubuntu がオンになっていることを確認してください。\n    \n    - たまに、何もしていないのにここがオフになっていて、トラブることがあります。\n    \n![](docker-desktop.png)\n\n詳しくは[こちら](https://docs.docker.jp/docker-for-windows/install.html)をご覧ください。日本語で書いてあります。\n\n3. 画面左側の Volumes に進み、Create からボリュームを作成\n\n    - 次の5つを作成します（大文字小文字に注意！）。\n    \n    - `fonts`, `julia`, `pip`, `renv`, `TinyTeX`\n\n## Git\n\n1. gitのインストール\n\n    - Windows のアプリ一覧から Ubuntu を探し、開いてください。開いたら、以下のコマンドを入力して実行します。\n\n```{.markdown filename=\"Ubuntu\"}\nsudo apt-get install git\n```\n\n![](ubuntu-git.png)\n\n2. 設定\n\n    - 以下のコマンドを入力、実行します。ユーザー名は何でも大丈夫です。\n\n```{.markdown filename=\"Ubuntu\"}\ngit config --global user.name [任意のユーザ名]\ngit config --global user.email [任意のメールアドレス]\n```\n\n## GitHub アカウントの作成\n\nファイルは基本的に GitHub で管理するので、[ここ](https://github.com/)からアカウントを作成してください。\n\n事前準備は以上です！\n\n# 開発環境の構築\n\nDocker を用いて環境を構築するにあたり、[柳本和春さん](https://kazuyanagimoto.com/)のテンプレートをベースに作成しています。詳しくは柳本さんの [記事](https://zenn.dev/nicetak/articles/vscode-docker-2023) をご覧ください。\n\n主な変更点は以下の通りです。\n\n- RStudio の設定を追加（パネルの配置など）\n\n- それに伴う Dockerfile の加筆修正\n\n- 日本語のロケール設定を追加\n\n## GitHub レポジトリを作成\n\n1. GitHub を開き、右上の + ボタンから Import repository を選択\n\n2. The URL for your source repository に、`https://github.com/yo5uke/template-R.git` と入力\n\n3. Repository name に任意のプロジェクト名を記入\n\n4. Public を Private に変更\n\n5. Begin import をクリック\n\n## テンプレートをクローン\n\n1. GitHub 画面右上の自分のアイコンをクリックし、Your repositories を選択\n\n2. 一覧から、上で作ったレポジトリを選択\n\n3. 画面中央右にある `<> Code` から、`.git`で終わる URL をコピー\n\n4. Ubuntu を開き、以下のコマンドを入力して実行\n\n```{.markdown filename=\"Ubuntu\"}\ngit clone [コピーした URL]\n```\n\nエクスプローラーを開き、`\\\\wsl.localhost\\Ubuntu\\home\\ユーザー名` を確認してみてください。レポジトリ名と同じフォルダができていると思います。\n\n## VSCode で開く\n\n1. VSCode を開く\n\n2. [上](#sec-vscode-setting)と同様にして「WSL への接続」を選択\n\n3. 画面左上の「ファイル」から「フォルダーを開く」をクリックし、作ったフォルダを選択\n\n4. 画面右下に「コンテナーで再度開く」と出たらクリック\n\n    - 出ない場合、画面左下「WSL: Ubuntu」をクリックし、「コンテナーで再度開く」を選択してください。\n    \n    - 初めて環境を構築する場合、ここでかなり時間がかかるので辛抱強く待ちましょう。\n\n![](reopen.png)\n\n## RStudio で開く\n\nここで、ブラウザを用いて RStudio を開きます。\n\n1. 任意のブラウザで、アドレスバーに `localhost:8787` と入力して開く\n\n2. 右上の![](data:image/png;base64,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)をクリックし、「New Project...」を選択\n\n3. 「Existing Directory」を選択\n\n4. 「Browse...」より work を選択して Choose をクリック\n\n    - ここでプロジェクトが作成されます。\n\n5. コンソールに以下を入力して実行\n\n````{.markdown filename=\"R\"}\n::: {.cell}\n\n```{.r .cell-code}\nrenv::init()\n```\n:::\n````\n\n# 参考文献\n\n- [VSCode + Dockerでよりミニマルでポータブルな研究環境を](https://zenn.dev/nicetak/articles/vscode-docker-2023)\n\n- [UbuntuにGitをインストールする](https://qiita.com/tommy_g/items/771ac45b89b02e8a5d64)",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}