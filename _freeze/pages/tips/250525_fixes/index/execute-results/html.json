{
  "hash": "4bac9976afad7741a96ed627e48bd096",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–‹ç™ºã€‘[fixes]{.fira-code}ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¿ãƒ‡ã‚£ã‚’åŠ¹ç‡åŒ–\"\ndescription: |\n  Staggered DiDã«ã‚‚å¯¾å¿œã—ã¾ã—ãŸã€‚\ndate: 2025-05-25\ncategories:\n  - R\n---\n\n## ã¯ã˜ã‚ã«\n\næœ¬ãƒšãƒ¼ã‚¸ã§ã¯ã€two-way fixed effectsãƒ¢ãƒ‡ãƒ«ã®DiDã«ãŠã‘ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¿ãƒ‡ã‚£ã‚’è¡Œã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€`fixes`ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚\n\nåƒ•ãŒä»Šå¹´ã®å¹´å§‹ã‹ã‚‰åœ°é“ã«ä½œæˆã—ã¦ããŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã€ä¸€åº¦tipsã«æ›¸ã„ãŸã“ã¨ãŒã‚ã‚‹ã®ã§ã™ãŒã€æœ€è¿‘ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚‚é‡ãªã£ã¦ããŸã®ã§å†åº¦æ›¸ãç›´ã™ã“ã¨ã«ã—ã¾ã—ãŸã€‚\n\n:::{.callout-note}\n## ã”æ„è¦‹å¾…ã£ã¦ã¾ã™\n\nå®Ÿæˆ¦çµŒé¨“ãŒè¶³ã‚Šãªã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã®ã§ã€æŒ™å‹•ãŒãŠã‹ã—ã‹ã£ãŸã‚Šã€ã“ã†ã„ã†æ©Ÿèƒ½ã«ã‚‚å¯¾å¿œã—ã¦ã»ã—ã„ã¨ã„ã†ã“ã¨ãŒã‚ã‚Œã°ã€ãƒšãƒ¼ã‚¸ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‹ã‚‰ã©ã—ã©ã—ãŠå¯„ã›ãã ã•ã„ã€‚ã“ã¢ã‚“ã¾ã‚Šã—ãŸãƒšãƒ¼ã‚¸ãªã®ã§ã€ã„ãŸã ã„ãŸã‚‚ã®ã¯ä½™è£•ã§å…¨éƒ¨å¯¾å¿œã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚\n:::\n\nã“ã‚Œã¾ã§ã¯å‡¦ç½®å€‹ä½“ã«ãŠã„ã¦å‡¦ç½®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒåŒä¸€ã®DiDã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã—ãŸãŒã€ç›´è¿‘ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§**å„å€‹ä½“ã§å‡¦ç½®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒç•°ãªã‚‹ã€ã„ã‚ã‚†ã‚‹Staggered DiDã«ã‚‚å¯¾å¿œã—ã¾ã—ãŸ**ã€‚\n\næœãŸã—ã¦ã‚ã‚‰ã‚†ã‚‹ã‚±ãƒ¼ã‚¹ã«å¯¾å¿œã§ãã¦ã„ã‚‹ã‹ã€å€‹äººé–‹ç™ºã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã¯ä¸å®‰ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ã„ãã¤ã‹ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ãƒ†ã‚¹ãƒˆã—ãŸåˆ†ã«ã¯å•é¡Œãªã‹ã£ãŸã®ã§ã€ãã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¨ä½µã›ã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚\n\n## ä½¿ç”¨ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸\n\nä½¿ç”¨ã™ã‚‹ã®ã¯`fixes`ã§ã™ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã§ãã¾ã™ã€‚\n\n``` r\npak::pak(\"fixes\")\n```\n\nã‚‚ã—ãã¯\n\n``` r\ninstall.packages(\"fixes\")\n```\n\nã§ã™ã€‚é–‹ç™ºç‰ˆã¯GitHubã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚\n\n``` r\npak::pak(\"yo5uke/fixes\")\n```\n\n## æº–å‚™\n\nãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã‚“ã§ã€ãƒ‡ãƒ¢ã«ä½¿ã†ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ã—ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(fixes)\nlibrary(tidyverse)\n```\n:::\n\n\nãƒ‡ãƒ¼ã‚¿ã¯`fixest`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨ã€Mixtapeã®Staggered DiDã®ç« ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’ä½¿ã„ã¾ã™ã€‚\n\nã¾ãŸã€ä¸è¶³ã—ã¦ã„ã‚‹å¤‰æ•°ã‚’è¿½åŠ ã—ã€ä½¿ã‚ãªã„å¤‰æ•°ã‚‚ã‚ã‚‹ã®ã§ã‚ã‚‰ã‹ã˜ã‚é™¤ã„ã¦ãŠãã¾ã™ã€‚\n\n`df_stagg`ã¯æœªå‡¦ç½®ã®å€‹ä½“ã®å‡¦ç½®å¹´ã€å‡¦ç½®ã‹ã‚‰ã®ç›¸å¯¾å¹´ã‚’NAã«å¤‰æ›´ã—ã€`df_castle`ã«é–¢ã—ã¦ã¯Mixtapeå†…ã§è¡Œã‚ã‚Œã¦ã„ã‚‹å‡¦ç†ã‚’ã—ã¦ãŠãã¾ã™^[å‚è€ƒï¼š[Mixtape](https://mixtape.scunning.com/09-difference_in_differences#replicating-cheng2013-sort-of)]\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_base <- fixest::base_did\ndf_stagg <- fixest::base_stagg\ncastle <- haven::read_dta(\"https://github.com/scunning1975/mixtape/raw/master/castle.dta\")\n\n\ndf_stagg <- df_stagg |> \n  mutate(\n    year_treated = if_else(year_treated == 10000, NA_real_, year_treated), \n    time_to_treatment = if_else(time_to_treatment == -1000, NA_real_, time_to_treatment)\n  )\n\n# ä»¥ä¸‹Mixtapeå‚è€ƒ\ndropped_vars <- c(\"r20004\", \"r20014\",\n                  \"r20024\", \"r20034\",\n                  \"r20044\", \"r20054\",\n                  \"r20064\", \"r20074\",\n                  \"r20084\", \"r20094\",\n                  \"r20101\", \"r20102\", \"r20103\",\n                  \"r20104\", \"trend_9\", \"trend_46\",\n                  \"trend_49\", \"trend_50\", \"trend_51\"\n)\n\nregion <- castle |> \n  select(starts_with(\"r20\")) |> \n  names() |> \n  setdiff(dropped_vars)\n\ndf_castle <- castle |> \n  select(state, sid, year, treatment_date, l_homicide, all_of(region), popwt) |> \n  mutate(is_treated = if_else(!is.na(treatment_date), 1, 0), .after = treatment_date)\n```\n:::\n\n\nå„ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã«ãªã£ã¦ã„ã¾ã™ã€‚\n\n::: {.panel-tabset}\n\n## df_base\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script>\n\n      function styleCell_9qz2sxbxur9dm7zr6q49(i, j, css_id) {\n          var table = document.getElementById(\"tinytable_9qz2sxbxur9dm7zr6q49\");\n          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors\n          if (cell) {\n              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);\n              cell.classList.add(css_id);\n          } else {\n              console.warn(`Cell at (${i}, ${j}) not found.`);\n          }\n      }\n      function insertSpanRow(i, colspan, content) {\n        var table = document.getElementById('tinytable_9qz2sxbxur9dm7zr6q49');\n        var newRow = table.insertRow(i);\n        var newCell = newRow.insertCell(0);\n        newCell.setAttribute(\"colspan\", colspan);\n        // newCell.innerText = content;\n        // this may be unsafe, but innerText does not interpret <br>\n        newCell.innerHTML = content;\n      }\n      function spanCell_9qz2sxbxur9dm7zr6q49(i, j, rowspan, colspan) {\n        var table = document.getElementById(\"tinytable_9qz2sxbxur9dm7zr6q49\");\n        const targetRow = table.rows[i];\n        const targetCell = targetRow.cells[j];\n        for (let r = 0; r < rowspan; r++) {\n          // Only start deleting cells to the right for the first row (r == 0)\n          if (r === 0) {\n            // Delete cells to the right of the target cell in the first row\n            for (let c = colspan - 1; c > 0; c--) {\n              if (table.rows[i + r].cells[j + c]) {\n                table.rows[i + r].deleteCell(j + c);\n              }\n            }\n          }\n          // For rows below the first, delete starting from the target column\n          if (r > 0) {\n            for (let c = colspan - 1; c >= 0; c--) {\n              if (table.rows[i + r] && table.rows[i + r].cells[j]) {\n                table.rows[i + r].deleteCell(j);\n              }\n            }\n          }\n        }\n        // Set rowspan and colspan of the target cell\n        targetCell.rowSpan = rowspan;\n        targetCell.colSpan = colspan;\n      }\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: 6, j: 0 }, { i: 6, j: 1 }, { i: 6, j: 2 }, { i: 6, j: 3 }, { i: 6, j: 4 }, { i: 6, j: 5 },  ], css_id: 'tinytable_css_qriv0adgen4vfzn7ew9y',}, \n          { positions: [ { i: 0, j: 0 }, { i: 0, j: 1 }, { i: 0, j: 2 }, { i: 0, j: 3 }, { i: 0, j: 4 }, { i: 0, j: 5 },  ], css_id: 'tinytable_css_q2a73dc544680i5gaaro',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  styleCell_9qz2sxbxur9dm7zr6q49(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <style>\n      /* tinytable css entries after */\n      .table td.tinytable_css_qriv0adgen4vfzn7ew9y, .table th.tinytable_css_qriv0adgen4vfzn7ew9y { border-bottom: solid #d3d8dc 0.1em; }\n      .table td.tinytable_css_q2a73dc544680i5gaaro, .table th.tinytable_css_q2a73dc544680i5gaaro { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }\n    </style>\n    <div class=\"container\">\n      <table class=\"table table-borderless\" id=\"tinytable_9qz2sxbxur9dm7zr6q49\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        <thead>\n        \n              <tr>\n                <th scope=\"col\">y</th>\n                <th scope=\"col\">x1</th>\n                <th scope=\"col\">id</th>\n                <th scope=\"col\">period</th>\n                <th scope=\"col\">post</th>\n                <th scope=\"col\">treat</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td>2.87530627</td>\n                  <td>0.5365377</td>\n                  <td>1</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>1</td>\n                </tr>\n                <tr>\n                  <td>1.86065272</td>\n                  <td>-3.0431894</td>\n                  <td>1</td>\n                  <td>2</td>\n                  <td>0</td>\n                  <td>1</td>\n                </tr>\n                <tr>\n                  <td>0.09416524</td>\n                  <td>5.5768439</td>\n                  <td>1</td>\n                  <td>3</td>\n                  <td>0</td>\n                  <td>1</td>\n                </tr>\n                <tr>\n                  <td>3.78147485</td>\n                  <td>-2.8300587</td>\n                  <td>1</td>\n                  <td>4</td>\n                  <td>0</td>\n                  <td>1</td>\n                </tr>\n                <tr>\n                  <td>-2.55819959</td>\n                  <td>-5.0443544</td>\n                  <td>1</td>\n                  <td>5</td>\n                  <td>0</td>\n                  <td>1</td>\n                </tr>\n                <tr>\n                  <td>1.72873240</td>\n                  <td>-0.6363849</td>\n                  <td>1</td>\n                  <td>6</td>\n                  <td>1</td>\n                  <td>1</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n## df_stagg\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script>\n\n      function styleCell_be78uxgq7a2b9pns9lk0(i, j, css_id) {\n          var table = document.getElementById(\"tinytable_be78uxgq7a2b9pns9lk0\");\n          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors\n          if (cell) {\n              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);\n              cell.classList.add(css_id);\n          } else {\n              console.warn(`Cell at (${i}, ${j}) not found.`);\n          }\n      }\n      function insertSpanRow(i, colspan, content) {\n        var table = document.getElementById('tinytable_be78uxgq7a2b9pns9lk0');\n        var newRow = table.insertRow(i);\n        var newCell = newRow.insertCell(0);\n        newCell.setAttribute(\"colspan\", colspan);\n        // newCell.innerText = content;\n        // this may be unsafe, but innerText does not interpret <br>\n        newCell.innerHTML = content;\n      }\n      function spanCell_be78uxgq7a2b9pns9lk0(i, j, rowspan, colspan) {\n        var table = document.getElementById(\"tinytable_be78uxgq7a2b9pns9lk0\");\n        const targetRow = table.rows[i];\n        const targetCell = targetRow.cells[j];\n        for (let r = 0; r < rowspan; r++) {\n          // Only start deleting cells to the right for the first row (r == 0)\n          if (r === 0) {\n            // Delete cells to the right of the target cell in the first row\n            for (let c = colspan - 1; c > 0; c--) {\n              if (table.rows[i + r].cells[j + c]) {\n                table.rows[i + r].deleteCell(j + c);\n              }\n            }\n          }\n          // For rows below the first, delete starting from the target column\n          if (r > 0) {\n            for (let c = colspan - 1; c >= 0; c--) {\n              if (table.rows[i + r] && table.rows[i + r].cells[j]) {\n                table.rows[i + r].deleteCell(j);\n              }\n            }\n          }\n        }\n        // Set rowspan and colspan of the target cell\n        targetCell.rowSpan = rowspan;\n        targetCell.colSpan = colspan;\n      }\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: 6, j: 0 }, { i: 6, j: 1 }, { i: 6, j: 2 }, { i: 6, j: 3 }, { i: 6, j: 4 }, { i: 6, j: 5 }, { i: 6, j: 6 }, { i: 6, j: 7 },  ], css_id: 'tinytable_css_q5tg22zw5hm4bpfvlsde',}, \n          { positions: [ { i: 0, j: 0 }, { i: 0, j: 1 }, { i: 0, j: 2 }, { i: 0, j: 3 }, { i: 0, j: 4 }, { i: 0, j: 5 }, { i: 0, j: 6 }, { i: 0, j: 7 },  ], css_id: 'tinytable_css_y200jfsdqpa1cv65ifon',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  styleCell_be78uxgq7a2b9pns9lk0(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <style>\n      /* tinytable css entries after */\n      .table td.tinytable_css_q5tg22zw5hm4bpfvlsde, .table th.tinytable_css_q5tg22zw5hm4bpfvlsde { border-bottom: solid #d3d8dc 0.1em; }\n      .table td.tinytable_css_y200jfsdqpa1cv65ifon, .table th.tinytable_css_y200jfsdqpa1cv65ifon { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }\n    </style>\n    <div class=\"container\">\n      <table class=\"table table-borderless\" id=\"tinytable_be78uxgq7a2b9pns9lk0\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        <thead>\n        \n              <tr>\n                <th scope=\"col\">id</th>\n                <th scope=\"col\">year</th>\n                <th scope=\"col\">year_treated</th>\n                <th scope=\"col\">time_to_treatment</th>\n                <th scope=\"col\">treated</th>\n                <th scope=\"col\">treatment_effect_true</th>\n                <th scope=\"col\">x1</th>\n                <th scope=\"col\">y</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td>90</td>\n                  <td>1</td>\n                  <td>2</td>\n                  <td>-1</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>-1.0947021</td>\n                  <td>0.01722971</td>\n                </tr>\n                <tr>\n                  <td>89</td>\n                  <td>1</td>\n                  <td>3</td>\n                  <td>-2</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>-3.7100676</td>\n                  <td>-4.58084528</td>\n                </tr>\n                <tr>\n                  <td>88</td>\n                  <td>1</td>\n                  <td>4</td>\n                  <td>-3</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>2.5274402</td>\n                  <td>2.73817174</td>\n                </tr>\n                <tr>\n                  <td>87</td>\n                  <td>1</td>\n                  <td>5</td>\n                  <td>-4</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>-0.7204263</td>\n                  <td>-0.65103066</td>\n                </tr>\n                <tr>\n                  <td>86</td>\n                  <td>1</td>\n                  <td>6</td>\n                  <td>-5</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>-3.6711678</td>\n                  <td>-5.33381664</td>\n                </tr>\n                <tr>\n                  <td>85</td>\n                  <td>1</td>\n                  <td>7</td>\n                  <td>-6</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>-0.3152137</td>\n                  <td>0.49562631</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n## df_castle\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script>\n\n      function styleCell_4izgg7utwi96mp1q4ief(i, j, css_id) {\n          var table = document.getElementById(\"tinytable_4izgg7utwi96mp1q4ief\");\n          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors\n          if (cell) {\n              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);\n              cell.classList.add(css_id);\n          } else {\n              console.warn(`Cell at (${i}, ${j}) not found.`);\n          }\n      }\n      function insertSpanRow(i, colspan, content) {\n        var table = document.getElementById('tinytable_4izgg7utwi96mp1q4ief');\n        var newRow = table.insertRow(i);\n        var newCell = newRow.insertCell(0);\n        newCell.setAttribute(\"colspan\", colspan);\n        // newCell.innerText = content;\n        // this may be unsafe, but innerText does not interpret <br>\n        newCell.innerHTML = content;\n      }\n      function spanCell_4izgg7utwi96mp1q4ief(i, j, rowspan, colspan) {\n        var table = document.getElementById(\"tinytable_4izgg7utwi96mp1q4ief\");\n        const targetRow = table.rows[i];\n        const targetCell = targetRow.cells[j];\n        for (let r = 0; r < rowspan; r++) {\n          // Only start deleting cells to the right for the first row (r == 0)\n          if (r === 0) {\n            // Delete cells to the right of the target cell in the first row\n            for (let c = colspan - 1; c > 0; c--) {\n              if (table.rows[i + r].cells[j + c]) {\n                table.rows[i + r].deleteCell(j + c);\n              }\n            }\n          }\n          // For rows below the first, delete starting from the target column\n          if (r > 0) {\n            for (let c = colspan - 1; c >= 0; c--) {\n              if (table.rows[i + r] && table.rows[i + r].cells[j]) {\n                table.rows[i + r].deleteCell(j);\n              }\n            }\n          }\n        }\n        // Set rowspan and colspan of the target cell\n        targetCell.rowSpan = rowspan;\n        targetCell.colSpan = colspan;\n      }\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: 6, j: 4 }, { i: 6, j: 5 }, { i: 6, j: 6 }, { i: 6, j: 0 }, { i: 6, j: 7 }, { i: 6, j: 1 }, { i: 6, j: 8 }, { i: 6, j: 2 }, { i: 6, j: 9 }, { i: 6, j: 3 }, { i: 6, j: 10 }, { i: 6, j: 17 }, { i: 6, j: 11 }, { i: 6, j: 18 }, { i: 6, j: 12 }, { i: 6, j: 19 }, { i: 6, j: 13 }, { i: 6, j: 20 }, { i: 6, j: 14 }, { i: 6, j: 21 }, { i: 6, j: 15 }, { i: 6, j: 22 }, { i: 6, j: 16 }, { i: 6, j: 23 }, { i: 6, j: 30 }, { i: 6, j: 24 }, { i: 6, j: 31 }, { i: 6, j: 25 }, { i: 6, j: 32 }, { i: 6, j: 26 }, { i: 6, j: 33 }, { i: 6, j: 27 }, { i: 6, j: 34 }, { i: 6, j: 28 }, { i: 6, j: 35 }, { i: 6, j: 29 }, { i: 6, j: 36 },  ], css_id: 'tinytable_css_79fjewf5syt6fzd0hxou',}, \n          { positions: [ { i: 0, j: 0 }, { i: 0, j: 7 }, { i: 0, j: 1 }, { i: 0, j: 8 }, { i: 0, j: 2 }, { i: 0, j: 9 }, { i: 0, j: 3 }, { i: 0, j: 10 }, { i: 0, j: 4 }, { i: 0, j: 11 }, { i: 0, j: 5 }, { i: 0, j: 12 }, { i: 0, j: 6 }, { i: 0, j: 13 }, { i: 0, j: 20 }, { i: 0, j: 14 }, { i: 0, j: 21 }, { i: 0, j: 15 }, { i: 0, j: 22 }, { i: 0, j: 16 }, { i: 0, j: 23 }, { i: 0, j: 17 }, { i: 0, j: 24 }, { i: 0, j: 18 }, { i: 0, j: 25 }, { i: 0, j: 19 }, { i: 0, j: 26 }, { i: 0, j: 33 }, { i: 0, j: 27 }, { i: 0, j: 34 }, { i: 0, j: 28 }, { i: 0, j: 35 }, { i: 0, j: 29 }, { i: 0, j: 36 }, { i: 0, j: 30 }, { i: 0, j: 31 }, { i: 0, j: 32 },  ], css_id: 'tinytable_css_guxzm9l1g4ocwrpt5vo2',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  styleCell_4izgg7utwi96mp1q4ief(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <style>\n      /* tinytable css entries after */\n      .table td.tinytable_css_79fjewf5syt6fzd0hxou, .table th.tinytable_css_79fjewf5syt6fzd0hxou { border-bottom: solid #d3d8dc 0.1em; }\n      .table td.tinytable_css_guxzm9l1g4ocwrpt5vo2, .table th.tinytable_css_guxzm9l1g4ocwrpt5vo2 { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }\n    </style>\n    <div class=\"container\">\n      <table class=\"table table-borderless\" id=\"tinytable_4izgg7utwi96mp1q4ief\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        <thead>\n        \n              <tr>\n                <th scope=\"col\">state</th>\n                <th scope=\"col\">sid</th>\n                <th scope=\"col\">year</th>\n                <th scope=\"col\">treatment_date</th>\n                <th scope=\"col\">is_treated</th>\n                <th scope=\"col\">l_homicide</th>\n                <th scope=\"col\">r20001</th>\n                <th scope=\"col\">r20002</th>\n                <th scope=\"col\">r20003</th>\n                <th scope=\"col\">r20011</th>\n                <th scope=\"col\">r20012</th>\n                <th scope=\"col\">r20013</th>\n                <th scope=\"col\">r20021</th>\n                <th scope=\"col\">r20022</th>\n                <th scope=\"col\">r20023</th>\n                <th scope=\"col\">r20031</th>\n                <th scope=\"col\">r20032</th>\n                <th scope=\"col\">r20033</th>\n                <th scope=\"col\">r20041</th>\n                <th scope=\"col\">r20042</th>\n                <th scope=\"col\">r20043</th>\n                <th scope=\"col\">r20051</th>\n                <th scope=\"col\">r20052</th>\n                <th scope=\"col\">r20053</th>\n                <th scope=\"col\">r20061</th>\n                <th scope=\"col\">r20062</th>\n                <th scope=\"col\">r20063</th>\n                <th scope=\"col\">r20071</th>\n                <th scope=\"col\">r20072</th>\n                <th scope=\"col\">r20073</th>\n                <th scope=\"col\">r20081</th>\n                <th scope=\"col\">r20082</th>\n                <th scope=\"col\">r20083</th>\n                <th scope=\"col\">r20091</th>\n                <th scope=\"col\">r20092</th>\n                <th scope=\"col\">r20093</th>\n                <th scope=\"col\">popwt</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td>Alabama</td>\n                  <td>1</td>\n                  <td>2000</td>\n                  <td>2006</td>\n                  <td>1</td>\n                  <td>2.027356</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>4499293</td>\n                </tr>\n                <tr>\n                  <td>Alabama</td>\n                  <td>1</td>\n                  <td>2001</td>\n                  <td>2006</td>\n                  <td>1</td>\n                  <td>2.164867</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>4499293</td>\n                </tr>\n                <tr>\n                  <td>Alabama</td>\n                  <td>1</td>\n                  <td>2002</td>\n                  <td>2006</td>\n                  <td>1</td>\n                  <td>1.936334</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>4499293</td>\n                </tr>\n                <tr>\n                  <td>Alabama</td>\n                  <td>1</td>\n                  <td>2003</td>\n                  <td>2006</td>\n                  <td>1</td>\n                  <td>1.919567</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>4499293</td>\n                </tr>\n                <tr>\n                  <td>Alabama</td>\n                  <td>1</td>\n                  <td>2004</td>\n                  <td>2006</td>\n                  <td>1</td>\n                  <td>1.749841</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>4499293</td>\n                </tr>\n                <tr>\n                  <td>Alabama</td>\n                  <td>1</td>\n                  <td>2005</td>\n                  <td>2006</td>\n                  <td>1</td>\n                  <td>2.130440</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>1</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>0</td>\n                  <td>4499293</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n:::\n\n## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®èª¬æ˜\n\nåŸºæœ¬çš„ãªä½¿ã„æ–¹ã¨ä¸€ç·’ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚é–¢æ•°ã¯ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¿ãƒ‡ã‚£ã‚’å®Ÿè¡Œã™ã‚‹`run_es()`é–¢æ•°ã¨ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¿ãƒ‡ã‚£ã‚’ggplotãƒ™ãƒ¼ã‚¹ã§ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹`plot_es()`ã§ã™ã€‚\n\n### `run_es()`\n\nã²ã¨ã¾ãšã€`run_es()`ã®åŸºæœ¬çš„ãªå¼•æ•°ã‚’èª¬æ˜ã—ã¾ã™ã€‚\n\n``` r\nrun_es(\n  data,\n  outcome,\n  treatment,\n  time,\n  staggered = FALSE,\n  timing,\n  lead_range = NULL,\n  lag_range = NULL,\n  covariates = NULL,\n  fe,\n  cluster = NULL,\n  weights = NULL,\n  baseline = -1,\n  interval = 1,\n  time_transform = FALSE,\n  unit = NULL\n)\n```\n\n- `data`ï¼šä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ \n- `outcome`ï¼šã‚¢ã‚¦ãƒˆã‚«ãƒ å¤‰æ•°\n- `treatment`ï¼šå‡¦ç½®ã•ã‚Œã¦ã„ã‚Œã°ï¼ˆæ™‚é–“ã«ã‚ˆã‚‰ãšï¼‰1ã‚’ã¨ã‚‹ãƒ€ãƒŸãƒ¼å¤‰æ•°^[TRUE/FALSEã§ã‚‚å¯]\n- `time`ï¼šæ™‚é–“ã‚’ç¤ºã™å¤‰æ•°ï¼ˆ`year`ãªã©ï¼‰\n- `staggered`ï¼šå‡¦ç½®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒå€‹ä½“ã”ã¨ã«ç•°ãªã‚‹ãƒ¢ãƒ‡ãƒ«ã®å ´åˆã¯TRUEï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯FALSEï¼‰\n- `timing`ï¼šå‡¦ç½®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¡¨ã™å¤‰æ•°ï¼ˆ`staggered`ãŒFALSEã®å ´åˆã¯æ•°å€¤ã€TRUEã®å ´åˆã¯å‡¦ç½®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ç¤ºã™å¤‰æ•°ï¼‰\n- `lead_range`ï¼šå‡¦ç½®å‰ã®æœŸé–“ï¼ˆå‡¦ç½®å¹´ã¯å«ã¾ãšã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯æœ€å¤§ã®æœŸé–“ã‚’ã¨ã‚‹ï¼‰\n- `lag_range`ï¼šå‡¦ç½®å¾Œã®æœŸé–“ï¼ˆå‡¦ç½®å¹´ã¯å«ã¾ãšã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯æœ€å¤§ã®æœŸé–“ã‚’ã¨ã‚‹ï¼‰\n- `covariates`ï¼šå…±å¤‰é‡ï¼ˆ`~ cov1 + cov2`ã®ã‚ˆã†ã«æ›¸ãï¼‰\n- `fe`ï¼šå›ºå®šåŠ¹æœï¼ˆ`~ id + year`ã®ã‚ˆã†ã«æ›¸ãï¼‰\n- `cluster`ï¼šã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã®å˜ä½ï¼ˆ`~ id`ã®ã‚ˆã†ã«æ›¸ãï¼‰\n- `weights`ï¼šã‚¦ã‚§ã‚¤ãƒˆï¼ˆ`~ weight`ã®ã‚ˆã†ã«æ›¸ãï¼‰\n- `baseline`ï¼šåŸºæº–ã¨ãªã‚‹ç›¸å¯¾å¹´ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‡¦ç½®ã®1æœŸå‰ï¼‰\n- `interval`ï¼šæ™‚é–“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯1ï¼ˆ1å¹´ã”ã¨ã®ãƒ‡ãƒ¼ã‚¿ï¼‰ã€5ã«ã™ã‚Œã°å›½å‹¢èª¿æŸ»ã«å¯¾å¿œï¼ˆ5å¹´ã”ã¨ï¼‰ï¼‰\n- `time_transform`ï¼šTRUEã§æ™‚é–“å¤‰æ•°ã«é€šã—ç•ªå·ã‚’æŒ¯ã£ã¦å‡¦ç†ã€‚æ™‚é–“å¤‰æ•°ãŒæ–‡å­—åˆ—ã ã£ãŸã‚Šã‚¤ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ãªé–“éš”ã®å ´åˆã«å¯¾å¿œï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯FALSEï¼‰\n- `unit`ï¼š`time_transform`ãŒTRUEã®å ´åˆã«å€‹ä½“ã®å˜ä½ã‚’æŒ‡å®šï¼ˆ`id`ãªã©ï¼‰\n\n---\n\næ–‡å­—ã§è¦‹ã¦ã‚‚ã‚ã‹ã‚Šã«ãã„ã¨æ€ã†ã®ã§ã€èª­ã¿è¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦é–¢æ•°ã‚’å›ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n\n#### é€šå¸¸ã®DiDã«ãŠã‘ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¿ãƒ‡ã‚£ {#sec-basic-es}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nes <- run_es(\n  data = df_base, \n  outcome = y, \n  treatment = treat, \n  time = period, \n  timing = 6, \n  fe = ~ id + period, \n  cluster = ~ id\n)\n```\n:::\n\n\nåŸºæœ¬çš„ãªã‚±ãƒ¼ã‚¹ã§ã‚ã‚Œã°ã“ã‚Œãã‚‰ã„ã®æŒ‡å®šã§æ¸ˆã¿ã¾ã™ã€‚ãƒ—ãƒ­ãƒƒãƒˆã¯å¾Œã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¾ã¨ã‚ã¦è¼‰ã›ã¾ã™ã€‚\n\n#### Staggered DiD 1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nes_stagg1 <- run_es(\n  data = df_stagg, \n  outcome = y, \n  treatment = treated, \n  time = year, \n  staggered = TRUE, \n  timing = year_treated, \n  fe = ~ id + year, \n  cluster = ~ id\n)\n```\n:::\n\n\n[å…ˆã»ã©](#sec-basic-es)ã¨é•ã†ç‚¹ã¯ã€`staggered`ãŒTRUEã«ãªã£ã¦ãŠã‚Šã€`timing`ãŒå…·ä½“çš„ãªæ•°å€¤ã§ã¯ãªãã€å‡¦ç½®å¹´ã‚’ç¤ºã™å¤‰æ•°ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã¨ã“ã‚ã§ã™ã€‚\n\n#### Staggered DiD 2\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# å…±å¤‰é‡ã®å¤‰æ•°ã‚’å¼ã®å½¢ã«ã—ã¦ãŠã\ncovariates <- as.formula(paste(\"~\", paste(region, collapse = \"+\")))\n\nes_stagg2 <- run_es(\n  data = df_castle, \n  outcome = l_homicide, \n  treatment = is_treated, \n  time = year, \n  staggered = TRUE, \n  timing = treatment_date, \n  covariates = covariates, \n  fe = ~ state + year, \n  cluster = ~ sid, \n  weights = ~ popwt\n)\n```\n:::\n\n\nä»Šå›ã®ä¾‹ã¯å…±å¤‰é‡ãŒå¤šã„ã®ã§äº‹å‰ã«`as.formula()`ã‚’ä½¿ã£ã¦å‡¦ç†ã—ã¦ã—ã¾ã£ã¦ã„ã¾ã™ãŒã€é–¢æ•°å†…ã§`covariates = ~ cov1 + cov2`ã®ã‚ˆã†ãªæŒ‡å®šã®ä»•æ–¹ã§å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚\n\n### `plot_es()`\n\nã“ã ã‚ã‚ŠãŒãªã‘ã‚Œã°ã€`plot_es(es)`ã®ç¨‹åº¦ã®æ›¸ãæ–¹ã§ãƒ—ãƒ­ãƒƒãƒˆã‚’å‡ºåŠ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å¼•æ•°ã®èª¬æ˜ã¯å¾Œã«å›ã—ã¦ã€ä¸€æ—¦å…ˆã»ã©ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¿ãƒ‡ã‚£ã®çµæœã‚’ãƒ—ãƒ­ãƒƒãƒˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n\n#### é€šå¸¸ã®DiDã«ãŠã‘ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¿ãƒ‡ã‚£\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nå¾Œã®2ã¤ã‚‚ãã†ã§ã™ãŒã€ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ãªã®ã§ã€å‡¦ç½®å‰å¹´ï¼ˆ-1ï¼‰ãŒæŠœã‘ã¦å€¤ãŒ0ã‚’ã¨ã£ã¦ã„ã¾ã™ã€‚\n\n#### Staggered DiD 1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es_stagg1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n#### Staggered DiD 2\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es_stagg2)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nStaggeredã®æ–¹ã‚‚ã„ã„æ„Ÿã˜ã«ãƒ—ãƒ­ãƒƒãƒˆã§ãã¦ã„ã¾ã™ã€‚ã“ã®å›³ã¯Mixtapeå†…ã§leadå¤‰æ•°ã¨lagå¤‰æ•°ã‚’æ‰‹ä½œæ¥­ã§ä½œã£ã¦å®Ÿè£…ã—ãƒ—ãƒ­ãƒƒãƒˆã•ã‚Œã¦ã„ã¾ã™ãŒã€[ãã®å›³](https://mixtape.scunning.com/09-difference_in_differences#fig-event-cheng2)ã¨è¦‹æ¯”ã¹ã¦ã‚‚åŒã˜æ¨ç§»ãŒç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚\n\n#### ä½¿ã„æ–¹\n\nåŸºæœ¬çš„ã«ã¯ä¸Šã®ä½¿ã„æ–¹ã§ååˆ†ã§ã™ãŒã€ggplotãƒ™ãƒ¼ã‚¹ã§ä½œã£ãŸã“ã¨ã‚‚ã‚ã‚Šã€æŸ”è»Ÿãªå¯¾å¿œã‚‚å¯èƒ½ã§ã™ã€‚\n\n``` r\nplot_es(\n  data,\n  type = \"ribbon\",\n  vline_val = 0,\n  vline_color = \"#000\",\n  hline_val = 0,\n  hline_color = \"#000\",\n  linewidth = 1,\n  pointsize = 2,\n  alpha = 0.2,\n  barwidth = 0.2,\n  color = \"#B25D91FF\",\n  fill = \"#B25D91FF\"\n)\n```\n\n- `data`ï¼š`run_es()`ã§ä½œæˆã—ãŸçµæœã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ \n- `type`ï¼š`ribbon`ã¨`errorbar`ãŒæŒ‡å®šå¯èƒ½\n- `vline_val`ï¼šç¸¦ã®ç ´ç·šã®ä½ç½®ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯0ï¼‰\n- `vline_color`ï¼šç¸¦ã®ç ´ç·šã®è‰²ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯`#000`ï¼ˆé»’ï¼‰ï¼‰\n- `hline_val`ï¼šæ¨ªã®ç ´ç·šã®ä½ç½®ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯0ï¼‰\n- `hline_color`ï¼šç¸¦ã®ç ´ç·šã®è‰²ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯`#000`ï¼ˆé»’ï¼‰ï¼‰\n- `linewidth`ï¼šæŠ˜ã‚Œç·šã®å¤ªã•ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯1ï¼‰\n- `pointsize`ï¼šç‚¹ã®å¤§ãã•ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯2ï¼‰\n- `alpha`ï¼šãƒªãƒœãƒ³ã®é€æ˜åº¦ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯0.2ï¼‰\n- `color`ï¼šç·šã¨ç‚¹ã®è‰²ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯`#B25D91FF`ï¼ˆãƒ”ãƒ³ã‚¯ï¼‰ï¼‰\n- `fill`ãƒªãƒœãƒ³ã®è‰²ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯`#B25D91FF`ï¼ˆãƒ”ãƒ³ã‚¯ï¼‰ï¼‰\n\n---\n\n`plot_es()`é–¢æ•°å†…ã§ã‚‚ã‚ã‚‹ç¨‹åº¦è‡ªç”±åº¦ã‚’ã‚‚ã£ã¦è¨­å®šã§ãã¾ã™ã€‚  \nä¾‹ãˆã°ãƒ—ãƒ­ãƒƒãƒˆã‚’ã‚¨ãƒ©ãƒ¼ãƒãƒ¼ã®ã‚¿ã‚¤ãƒ—ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es_stagg2, type = \"errorbar\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nã•ã‚‰ã«è‰²ã‚‚å¤‰ãˆã¦ã¿ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es_stagg2, type = \"errorbar\", color = \"#000\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nãƒªãƒœãƒ³ã‚¿ã‚¤ãƒ—ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ¼ã‚¿ã‚¤ãƒ—ãŒã‚ã‚Šã€ã•ã‚‰ã«ãã“ã‹ã‚‰ã‚ã‚‹ç¨‹åº¦ã®è‡ªç”±åº¦ã‚‚ã‚ã‚‹ç‚¹ãŒä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å¯¾ã™ã‚‹å„ªä½æ€§ã«ã‚‚ãªã£ã¦ã„ã¾ã™ã€‚\n\nã¡ãªã¿ã«ã€ggplotãƒ™ãƒ¼ã‚¹ã¨ã„ã†ã“ã¨ã§ã€**ggplotã®é–¢æ•°ã‚’ã¤ãªã’ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™**ï¼\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es_stagg2, type = \"errorbar\", color = \"#000\") + \n  geom_hline(yintercept = .08, color = \"red\") + \n  annotate(\"text\", x = 3, y = -.1, label = \"DD Coefficient = 0.08\\n(s.e. = 0.03)\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nMixtapeé¢¨ã«ä¿‚æ•°ã‚’ç¤ºã™æ°´å¹³ç·šã¨æ³¨é‡ˆã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ãŸã€‚ã“ã®ã‚ˆã†ã«ã©ã‚“ã©ã‚“è¦ç´ ã‚’è¿½åŠ ã—ã¦ã„ãã“ã¨ãŒã§ãã¾ã™ã€‚\n\n## ãŠã‚ã‚Šã«\n\nã¾ã ã¾ã é–‹ç™ºé€”ä¸Šã§ã™ãŒã€staggeredã¾ã§å¯¾å¿œã§ããŸã®ã§ã€ã“ã‚Œã‹ã‚‰ã—ã°ã‚‰ãã¯ãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã‚’å¿µé ­ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚\n\nå†’é ­ã«ã‚‚æ›¸ãã¾ã—ãŸãŒã€ã‚‚ã—ä½¿ã£ã¦ã„ãŸã ã„ã¦ã€Œä½¿ã„ã«ãã„ã€ã‚„ã€Œã“ã‚“ãªæ©Ÿèƒ½ãŒæ¬²ã—ã„ã€ç­‰ã‚ã‚Šã¾ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚„GitHubã®[Issues](https://github.com/yo5uke/fixes/issues)ã¾ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚\n\n## ğŸ”— ãƒ‡ãƒ¼ã‚¿å‡ºå…¸\n\nãƒ‡ãƒ¼ã‚¿å‡ºå…¸ï¼š[Causal Inference: The Mixtape](https://mixtape.scunning.com/)ï¼ˆScott Cunnningham, 2021ï¼‰  \nãƒ‡ãƒ¼ã‚¿ã¯GitHubä¸Šã§å…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å…¥æ‰‹å¯èƒ½ã§ã™ï¼š\n\n> https://github.com/scunning1975/mixtape\n\nã¾ãŸã€ãƒ‡ãƒ¼ã‚¿ã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ã‚‚ã¨ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚\n\n\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}