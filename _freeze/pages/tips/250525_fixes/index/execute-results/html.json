{
  "hash": "6149fdb0541d73728031e6367d2d2dfe",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"【パッケージ開発】[fixes]{.fira-code}でイベントスタディを効率化\"\ndescription: |\n  バージョン0.7：バグを大幅に修正し、[plot_es_interactive()]{.fira-code}関数を追加しました。\ndate: 2025-05-25\ndate-modified: 2025-11-02\ncategories:\n  - R\n---\n\n## はじめに\n\n本ページでは、two-way fixed effects (TWFE)モデルのDifference-in-Differences (DiD)におけるイベントスタディを行うパッケージ、`fixes`について説明します。\n\n僕が今年（2025年）の年始から地道に作成してきたパッケージで、初のパッケージ作成で試行錯誤、紆余曲折を経ながらアップデートを重ねてきました。\n\n:::{.callout-note}\n## ご意見待ってます\n\n実戦経験が足りないパッケージなので、挙動がおかしかったり、こういう機能にも対応してほしいということがあれば、ページ下のコメントからどしどしお寄せください。こぢんまりしたページなので、いただいたものは余裕で全部対応できると思います。\n:::\n\nこれまでは処置個体において処置タイミングが同一のベーシックなイベントスタディにのみ対応していましたが、アップデートを経て**各個体で処置タイミングが異なる、いわゆるStaggered DiDにおけるイベントスタディにも対応しました**。\n\n果たしてあらゆるケースに対応できているか、個人で開発しているパッケージとしては不安ではありますが、いくつかのデータセットでテストした分には問題なかったので、そのテストコードと併せて解説していきます。\n\n## 使用するパッケージ\n\n使用するのは`fixes`です。インストールは以下のコマンドでできます。\n\n``` r\ninstall.packages(\"fixes\")\n\n# or\n# pak::pak(\"fixes\")\n```\n\nです。開発版はGitHubからインストールできます。\n\n``` r\n# install.packages(\"pak\")\npak::pak(\"yo5uke/fixes\")\n```\n\n## 準備\n\nパッケージを読み込んで、デモに使うデータを準備します。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(fixes)\nlibrary(tidyverse)\n```\n:::\n\n\nデータは`fixest`パッケージで用意されている`base_did`および`base_stagg`と、Mixtapeの[Staggered DiDの章](https://mixtape.scunning.com/09-difference_in_differences#replicating-cheng2013-sort-of)で使用されている`castle`を使います。\n\n`df_castle`に関しては、Mixtape内で行われている処理をし、変数を使用するものに絞っておきます^[参考：[Mixtape](https://mixtape.scunning.com/09-difference_in_differences#replicating-cheng2013-sort-of)]。\n\nまた、少し後で述べる通り、never-treatedユニットの扱いに注意しながら、`year_treated`と`time_to_treatment`を作成しておきます。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(fixest)\n\ncastle <- haven::read_dta(\n  \"https://github.com/scunning1975/mixtape/raw/master/castle.dta\"\n)\n\n# 以下Mixtape参考\n# fmt: skip\ndropped_vars <- c(\n  \"r20004\", \"r20014\", \"r20024\", \"r20034\", \"r20044\", \"r20054\", \"r20064\",\n  \"r20074\", \"r20084\", \"r20094\", \"r20101\", \"r20102\", \"r20103\", \"r20104\",\n  \"trend_9\", \"trend_46\", \"trend_49\", \"trend_50\", \"trend_51\"\n)\n\nregion <- castle |>\n  select(starts_with(\"r20\")) |>\n  names() |>\n  setdiff(dropped_vars)\n\ndf_castle <- castle |>\n  select(state, sid, year, treatment_date, l_homicide, all_of(region), popwt) |>\n  mutate(\n    is_treated = if_else(!is.na(treatment_date), 1, 0),\n    year_treated = if_else(is_treated == 1, treatment_date, 10000L),\n    time_to_treatment = if_else(is_treated == 1, year - treatment_date, -1000L)\n  )\n```\n:::\n\n\n各データフレームは以下のような感じになっています。先頭の15行を見てみましょう。\n\n::: {.panel-tabset}\n## base_did\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_6xfbj5ymx3kirljwbgjc = TinyTable.createTableFunctions(\"tinytable_6xfbj5ymx3kirljwbgjc\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '15', j: 1 }, { i: '15', j: 2 }, { i: '15', j: 3 }, { i: '15', j: 4 }, { i: '15', j: 5 }, { i: '15', j: 6 } ], css_id: 'tinytable_css_xcija7ge4zqd5wy9o3j5',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 } ], css_id: 'tinytable_css_a3apqm0v10juozuienn5',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_6xfbj5ymx3kirljwbgjc.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_6xfbj5ymx3kirljwbgjc td.tinytable_css_xcija7ge4zqd5wy9o3j5, #tinytable_6xfbj5ymx3kirljwbgjc th.tinytable_css_xcija7ge4zqd5wy9o3j5 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: black; --line-color-left: black; --line-color-right: black; --line-color-top: black; --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_6xfbj5ymx3kirljwbgjc td.tinytable_css_a3apqm0v10juozuienn5, #tinytable_6xfbj5ymx3kirljwbgjc th.tinytable_css_a3apqm0v10juozuienn5 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: black; --line-color-left: black; --line-color-right: black; --line-color-top: black; --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_6xfbj5ymx3kirljwbgjc\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">y</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">x1</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">id</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">period</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">post</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">treat</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">2.87530627</td>\n                  <td data-row=\"1\" data-col=\"2\">0.53653768</td>\n                  <td data-row=\"1\" data-col=\"3\">1</td>\n                  <td data-row=\"1\" data-col=\"4\">1</td>\n                  <td data-row=\"1\" data-col=\"5\">0</td>\n                  <td data-row=\"1\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"2\" data-col=\"1\">1.86065272</td>\n                  <td data-row=\"2\" data-col=\"2\">-3.04318942</td>\n                  <td data-row=\"2\" data-col=\"3\">1</td>\n                  <td data-row=\"2\" data-col=\"4\">2</td>\n                  <td data-row=\"2\" data-col=\"5\">0</td>\n                  <td data-row=\"2\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"3\" data-col=\"1\">0.09416524</td>\n                  <td data-row=\"3\" data-col=\"2\">5.57684387</td>\n                  <td data-row=\"3\" data-col=\"3\">1</td>\n                  <td data-row=\"3\" data-col=\"4\">3</td>\n                  <td data-row=\"3\" data-col=\"5\">0</td>\n                  <td data-row=\"3\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"4\" data-col=\"1\">3.78147485</td>\n                  <td data-row=\"4\" data-col=\"2\">-2.83005866</td>\n                  <td data-row=\"4\" data-col=\"3\">1</td>\n                  <td data-row=\"4\" data-col=\"4\">4</td>\n                  <td data-row=\"4\" data-col=\"5\">0</td>\n                  <td data-row=\"4\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"5\" data-col=\"1\">-2.55819959</td>\n                  <td data-row=\"5\" data-col=\"2\">-5.04435440</td>\n                  <td data-row=\"5\" data-col=\"3\">1</td>\n                  <td data-row=\"5\" data-col=\"4\">5</td>\n                  <td data-row=\"5\" data-col=\"5\">0</td>\n                  <td data-row=\"5\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"6\" data-col=\"1\">1.72873240</td>\n                  <td data-row=\"6\" data-col=\"2\">-0.63638485</td>\n                  <td data-row=\"6\" data-col=\"3\">1</td>\n                  <td data-row=\"6\" data-col=\"4\">6</td>\n                  <td data-row=\"6\" data-col=\"5\">1</td>\n                  <td data-row=\"6\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"7\" data-col=\"1\">6.28423629</td>\n                  <td data-row=\"7\" data-col=\"2\">-2.12988365</td>\n                  <td data-row=\"7\" data-col=\"3\">1</td>\n                  <td data-row=\"7\" data-col=\"4\">7</td>\n                  <td data-row=\"7\" data-col=\"5\">1</td>\n                  <td data-row=\"7\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"8\" data-col=\"1\">4.76688778</td>\n                  <td data-row=\"8\" data-col=\"2\">3.49185577</td>\n                  <td data-row=\"8\" data-col=\"3\">1</td>\n                  <td data-row=\"8\" data-col=\"4\">8</td>\n                  <td data-row=\"8\" data-col=\"5\">1</td>\n                  <td data-row=\"8\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"9\" data-col=\"1\">5.34753392</td>\n                  <td data-row=\"9\" data-col=\"2\">0.83798615</td>\n                  <td data-row=\"9\" data-col=\"3\">1</td>\n                  <td data-row=\"9\" data-col=\"4\">9</td>\n                  <td data-row=\"9\" data-col=\"5\">1</td>\n                  <td data-row=\"9\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"10\" data-col=\"1\">4.95146934</td>\n                  <td data-row=\"10\" data-col=\"2\">0.63388904</td>\n                  <td data-row=\"10\" data-col=\"3\">1</td>\n                  <td data-row=\"10\" data-col=\"4\">10</td>\n                  <td data-row=\"10\" data-col=\"5\">1</td>\n                  <td data-row=\"10\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"11\" data-col=\"1\">-4.25798295</td>\n                  <td data-row=\"11\" data-col=\"2\">-5.26462514</td>\n                  <td data-row=\"11\" data-col=\"3\">2</td>\n                  <td data-row=\"11\" data-col=\"4\">1</td>\n                  <td data-row=\"11\" data-col=\"5\">0</td>\n                  <td data-row=\"11\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"12\" data-col=\"1\">0.60611067</td>\n                  <td data-row=\"12\" data-col=\"2\">-3.70483485</td>\n                  <td data-row=\"12\" data-col=\"3\">2</td>\n                  <td data-row=\"12\" data-col=\"4\">2</td>\n                  <td data-row=\"12\" data-col=\"5\">0</td>\n                  <td data-row=\"12\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"13\" data-col=\"1\">5.61637038</td>\n                  <td data-row=\"13\" data-col=\"2\">-0.21742509</td>\n                  <td data-row=\"13\" data-col=\"3\">2</td>\n                  <td data-row=\"13\" data-col=\"4\">3</td>\n                  <td data-row=\"13\" data-col=\"5\">0</td>\n                  <td data-row=\"13\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"14\" data-col=\"1\">-6.16941931</td>\n                  <td data-row=\"14\" data-col=\"2\">-2.02699419</td>\n                  <td data-row=\"14\" data-col=\"3\">2</td>\n                  <td data-row=\"14\" data-col=\"4\">4</td>\n                  <td data-row=\"14\" data-col=\"5\">0</td>\n                  <td data-row=\"14\" data-col=\"6\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"15\" data-col=\"1\">0.71186875</td>\n                  <td data-row=\"15\" data-col=\"2\">0.01140001</td>\n                  <td data-row=\"15\" data-col=\"3\">2</td>\n                  <td data-row=\"15\" data-col=\"4\">5</td>\n                  <td data-row=\"15\" data-col=\"5\">0</td>\n                  <td data-row=\"15\" data-col=\"6\">1</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n## base_stagg\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_f4kis31tnppsdq6ttgpm = TinyTable.createTableFunctions(\"tinytable_f4kis31tnppsdq6ttgpm\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '15', j: 1 }, { i: '15', j: 2 }, { i: '15', j: 3 }, { i: '15', j: 4 }, { i: '15', j: 5 }, { i: '15', j: 6 }, { i: '15', j: 7 }, { i: '15', j: 8 } ], css_id: 'tinytable_css_vqke2ec532vbywrp7mau',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 }, { i: '0', j: 8 } ], css_id: 'tinytable_css_2cwz1j2erh83emdlo7dw',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_f4kis31tnppsdq6ttgpm.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_f4kis31tnppsdq6ttgpm td.tinytable_css_vqke2ec532vbywrp7mau, #tinytable_f4kis31tnppsdq6ttgpm th.tinytable_css_vqke2ec532vbywrp7mau {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: black; --line-color-left: black; --line-color-right: black; --line-color-top: black; --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_f4kis31tnppsdq6ttgpm td.tinytable_css_2cwz1j2erh83emdlo7dw, #tinytable_f4kis31tnppsdq6ttgpm th.tinytable_css_2cwz1j2erh83emdlo7dw {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: black; --line-color-left: black; --line-color-right: black; --line-color-top: black; --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_f4kis31tnppsdq6ttgpm\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">id</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">year</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">year_treated</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">time_to_treatment</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">treated</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">treatment_effect_true</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">x1</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"8\">y</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">90</td>\n                  <td data-row=\"1\" data-col=\"2\">1</td>\n                  <td data-row=\"1\" data-col=\"3\">2</td>\n                  <td data-row=\"1\" data-col=\"4\">-1</td>\n                  <td data-row=\"1\" data-col=\"5\">1</td>\n                  <td data-row=\"1\" data-col=\"6\">0</td>\n                  <td data-row=\"1\" data-col=\"7\">-1.09470213</td>\n                  <td data-row=\"1\" data-col=\"8\">0.01722971</td>\n                </tr>\n                <tr>\n                  <td data-row=\"2\" data-col=\"1\">89</td>\n                  <td data-row=\"2\" data-col=\"2\">1</td>\n                  <td data-row=\"2\" data-col=\"3\">3</td>\n                  <td data-row=\"2\" data-col=\"4\">-2</td>\n                  <td data-row=\"2\" data-col=\"5\">1</td>\n                  <td data-row=\"2\" data-col=\"6\">0</td>\n                  <td data-row=\"2\" data-col=\"7\">-3.71006765</td>\n                  <td data-row=\"2\" data-col=\"8\">-4.58084528</td>\n                </tr>\n                <tr>\n                  <td data-row=\"3\" data-col=\"1\">88</td>\n                  <td data-row=\"3\" data-col=\"2\">1</td>\n                  <td data-row=\"3\" data-col=\"3\">4</td>\n                  <td data-row=\"3\" data-col=\"4\">-3</td>\n                  <td data-row=\"3\" data-col=\"5\">1</td>\n                  <td data-row=\"3\" data-col=\"6\">0</td>\n                  <td data-row=\"3\" data-col=\"7\">2.52744015</td>\n                  <td data-row=\"3\" data-col=\"8\">2.73817174</td>\n                </tr>\n                <tr>\n                  <td data-row=\"4\" data-col=\"1\">87</td>\n                  <td data-row=\"4\" data-col=\"2\">1</td>\n                  <td data-row=\"4\" data-col=\"3\">5</td>\n                  <td data-row=\"4\" data-col=\"4\">-4</td>\n                  <td data-row=\"4\" data-col=\"5\">1</td>\n                  <td data-row=\"4\" data-col=\"6\">0</td>\n                  <td data-row=\"4\" data-col=\"7\">-0.72042631</td>\n                  <td data-row=\"4\" data-col=\"8\">-0.65103066</td>\n                </tr>\n                <tr>\n                  <td data-row=\"5\" data-col=\"1\">86</td>\n                  <td data-row=\"5\" data-col=\"2\">1</td>\n                  <td data-row=\"5\" data-col=\"3\">6</td>\n                  <td data-row=\"5\" data-col=\"4\">-5</td>\n                  <td data-row=\"5\" data-col=\"5\">1</td>\n                  <td data-row=\"5\" data-col=\"6\">0</td>\n                  <td data-row=\"5\" data-col=\"7\">-3.67116779</td>\n                  <td data-row=\"5\" data-col=\"8\">-5.33381664</td>\n                </tr>\n                <tr>\n                  <td data-row=\"6\" data-col=\"1\">85</td>\n                  <td data-row=\"6\" data-col=\"2\">1</td>\n                  <td data-row=\"6\" data-col=\"3\">7</td>\n                  <td data-row=\"6\" data-col=\"4\">-6</td>\n                  <td data-row=\"6\" data-col=\"5\">1</td>\n                  <td data-row=\"6\" data-col=\"6\">0</td>\n                  <td data-row=\"6\" data-col=\"7\">-0.31521367</td>\n                  <td data-row=\"6\" data-col=\"8\">0.49562631</td>\n                </tr>\n                <tr>\n                  <td data-row=\"7\" data-col=\"1\">84</td>\n                  <td data-row=\"7\" data-col=\"2\">1</td>\n                  <td data-row=\"7\" data-col=\"3\">8</td>\n                  <td data-row=\"7\" data-col=\"4\">-7</td>\n                  <td data-row=\"7\" data-col=\"5\">1</td>\n                  <td data-row=\"7\" data-col=\"6\">0</td>\n                  <td data-row=\"7\" data-col=\"7\">0.32856334</td>\n                  <td data-row=\"7\" data-col=\"8\">-1.58378245</td>\n                </tr>\n                <tr>\n                  <td data-row=\"8\" data-col=\"1\">83</td>\n                  <td data-row=\"8\" data-col=\"2\">1</td>\n                  <td data-row=\"8\" data-col=\"3\">9</td>\n                  <td data-row=\"8\" data-col=\"4\">-8</td>\n                  <td data-row=\"8\" data-col=\"5\">1</td>\n                  <td data-row=\"8\" data-col=\"6\">0</td>\n                  <td data-row=\"8\" data-col=\"7\">-0.08850915</td>\n                  <td data-row=\"8\" data-col=\"8\">-1.33526257</td>\n                </tr>\n                <tr>\n                  <td data-row=\"9\" data-col=\"1\">82</td>\n                  <td data-row=\"9\" data-col=\"2\">1</td>\n                  <td data-row=\"9\" data-col=\"3\">10</td>\n                  <td data-row=\"9\" data-col=\"4\">-9</td>\n                  <td data-row=\"9\" data-col=\"5\">1</td>\n                  <td data-row=\"9\" data-col=\"6\">0</td>\n                  <td data-row=\"9\" data-col=\"7\">-2.34951611</td>\n                  <td data-row=\"9\" data-col=\"8\">-1.35136167</td>\n                </tr>\n                <tr>\n                  <td data-row=\"10\" data-col=\"1\">81</td>\n                  <td data-row=\"10\" data-col=\"2\">1</td>\n                  <td data-row=\"10\" data-col=\"3\">10000</td>\n                  <td data-row=\"10\" data-col=\"4\">-1000</td>\n                  <td data-row=\"10\" data-col=\"5\">0</td>\n                  <td data-row=\"10\" data-col=\"6\">0</td>\n                  <td data-row=\"10\" data-col=\"7\">2.31318716</td>\n                  <td data-row=\"10\" data-col=\"8\">1.77231442</td>\n                </tr>\n                <tr>\n                  <td data-row=\"11\" data-col=\"1\">80</td>\n                  <td data-row=\"11\" data-col=\"2\">1</td>\n                  <td data-row=\"11\" data-col=\"3\">10000</td>\n                  <td data-row=\"11\" data-col=\"4\">-1000</td>\n                  <td data-row=\"11\" data-col=\"5\">0</td>\n                  <td data-row=\"11\" data-col=\"6\">0</td>\n                  <td data-row=\"11\" data-col=\"7\">-0.56561061</td>\n                  <td data-row=\"11\" data-col=\"8\">-0.78198640</td>\n                </tr>\n                <tr>\n                  <td data-row=\"12\" data-col=\"1\">79</td>\n                  <td data-row=\"12\" data-col=\"2\">1</td>\n                  <td data-row=\"12\" data-col=\"3\">10000</td>\n                  <td data-row=\"12\" data-col=\"4\">-1000</td>\n                  <td data-row=\"12\" data-col=\"5\">0</td>\n                  <td data-row=\"12\" data-col=\"6\">0</td>\n                  <td data-row=\"12\" data-col=\"7\">-3.15996610</td>\n                  <td data-row=\"12\" data-col=\"8\">-4.78190340</td>\n                </tr>\n                <tr>\n                  <td data-row=\"13\" data-col=\"1\">78</td>\n                  <td data-row=\"13\" data-col=\"2\">1</td>\n                  <td data-row=\"13\" data-col=\"3\">10000</td>\n                  <td data-row=\"13\" data-col=\"4\">-1000</td>\n                  <td data-row=\"13\" data-col=\"5\">0</td>\n                  <td data-row=\"13\" data-col=\"6\">0</td>\n                  <td data-row=\"13\" data-col=\"7\">-7.24864781</td>\n                  <td data-row=\"13\" data-col=\"8\">-8.69961178</td>\n                </tr>\n                <tr>\n                  <td data-row=\"14\" data-col=\"1\">77</td>\n                  <td data-row=\"14\" data-col=\"2\">1</td>\n                  <td data-row=\"14\" data-col=\"3\">10000</td>\n                  <td data-row=\"14\" data-col=\"4\">-1000</td>\n                  <td data-row=\"14\" data-col=\"5\">0</td>\n                  <td data-row=\"14\" data-col=\"6\">0</td>\n                  <td data-row=\"14\" data-col=\"7\">1.32056216</td>\n                  <td data-row=\"14\" data-col=\"8\">1.67147189</td>\n                </tr>\n                <tr>\n                  <td data-row=\"15\" data-col=\"1\">76</td>\n                  <td data-row=\"15\" data-col=\"2\">1</td>\n                  <td data-row=\"15\" data-col=\"3\">10000</td>\n                  <td data-row=\"15\" data-col=\"4\">-1000</td>\n                  <td data-row=\"15\" data-col=\"5\">0</td>\n                  <td data-row=\"15\" data-col=\"6\">0</td>\n                  <td data-row=\"15\" data-col=\"7\">-1.68121120</td>\n                  <td data-row=\"15\" data-col=\"8\">-1.85575812</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n## df_castle\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.js\"></script>\n\n    <script>\n      // Create table-specific functions using external factory\n      const tableFns_d8nxmlnbsi90or597d6p = TinyTable.createTableFunctions(\"tinytable_d8nxmlnbsi90or597d6p\");\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '15', j: 1 }, { i: '15', j: 2 }, { i: '15', j: 3 }, { i: '15', j: 4 }, { i: '15', j: 5 }, { i: '15', j: 6 }, { i: '15', j: 7 }, { i: '15', j: 8 }, { i: '15', j: 9 }, { i: '15', j: 10 }, { i: '15', j: 11 }, { i: '15', j: 12 }, { i: '15', j: 13 }, { i: '15', j: 14 }, { i: '15', j: 15 }, { i: '15', j: 16 }, { i: '15', j: 17 }, { i: '15', j: 18 }, { i: '15', j: 19 }, { i: '15', j: 20 }, { i: '15', j: 21 }, { i: '15', j: 22 }, { i: '15', j: 23 }, { i: '15', j: 24 }, { i: '15', j: 25 }, { i: '15', j: 26 }, { i: '15', j: 27 }, { i: '15', j: 28 }, { i: '15', j: 29 }, { i: '15', j: 30 }, { i: '15', j: 31 }, { i: '15', j: 32 }, { i: '15', j: 33 }, { i: '15', j: 34 }, { i: '15', j: 35 }, { i: '15', j: 36 }, { i: '15', j: 37 }, { i: '15', j: 38 }, { i: '15', j: 39 } ], css_id: 'tinytable_css_pmp7tir06kh5ztxpvk69',}, \n          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 }, { i: '0', j: 6 }, { i: '0', j: 7 }, { i: '0', j: 8 }, { i: '0', j: 9 }, { i: '0', j: 10 }, { i: '0', j: 11 }, { i: '0', j: 12 }, { i: '0', j: 13 }, { i: '0', j: 14 }, { i: '0', j: 15 }, { i: '0', j: 16 }, { i: '0', j: 17 }, { i: '0', j: 18 }, { i: '0', j: 19 }, { i: '0', j: 20 }, { i: '0', j: 21 }, { i: '0', j: 22 }, { i: '0', j: 23 }, { i: '0', j: 24 }, { i: '0', j: 25 }, { i: '0', j: 26 }, { i: '0', j: 27 }, { i: '0', j: 28 }, { i: '0', j: 29 }, { i: '0', j: 30 }, { i: '0', j: 31 }, { i: '0', j: 32 }, { i: '0', j: 33 }, { i: '0', j: 34 }, { i: '0', j: 35 }, { i: '0', j: 36 }, { i: '0', j: 37 }, { i: '0', j: 38 }, { i: '0', j: 39 } ], css_id: 'tinytable_css_30rj3sgabnkns2q6ucq4',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  tableFns_d8nxmlnbsi90or597d6p.styleCell(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/vincentarelbundock/tinytable@main/inst/tinytable.css\">\n    <style>\n    /* tinytable css entries after */\n    #tinytable_d8nxmlnbsi90or597d6p td.tinytable_css_pmp7tir06kh5ztxpvk69, #tinytable_d8nxmlnbsi90or597d6p th.tinytable_css_pmp7tir06kh5ztxpvk69 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 0; --line-color-bottom: black; --line-color-left: black; --line-color-right: black; --line-color-top: black; --line-width-bottom: 0.1em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    #tinytable_d8nxmlnbsi90or597d6p td.tinytable_css_30rj3sgabnkns2q6ucq4, #tinytable_d8nxmlnbsi90or597d6p th.tinytable_css_30rj3sgabnkns2q6ucq4 {  position: relative; --border-bottom: 1; --border-left: 0; --border-right: 0; --border-top: 1; --line-color-bottom: black; --line-color-left: black; --line-color-right: black; --line-color-top: black; --line-width-bottom: 0.05em; --line-width-left: 0.1em; --line-width-right: 0.1em; --line-width-top: 0.1em; --trim-bottom-left: 0%; --trim-bottom-right: 0%; --trim-left-bottom: 0%; --trim-left-top: 0%; --trim-right-bottom: 0%; --trim-right-top: 0%; --trim-top-left: 0%; --trim-top-right: 0%;  }\n    </style>\n    <div class=\"container\">\n      <table class=\"tinytable\" id=\"tinytable_d8nxmlnbsi90or597d6p\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        \n        <thead>\n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">state</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">sid</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">year</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">treatment_date</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">l_homicide</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"6\">r20001</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"7\">r20002</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"8\">r20003</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"9\">r20011</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"10\">r20012</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"11\">r20013</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"12\">r20021</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"13\">r20022</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"14\">r20023</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"15\">r20031</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"16\">r20032</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"17\">r20033</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"18\">r20041</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"19\">r20042</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"20\">r20043</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"21\">r20051</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"22\">r20052</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"23\">r20053</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"24\">r20061</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"25\">r20062</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"26\">r20063</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"27\">r20071</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"28\">r20072</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"29\">r20073</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"30\">r20081</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"31\">r20082</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"32\">r20083</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"33\">r20091</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"34\">r20092</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"35\">r20093</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"36\">popwt</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"37\">is_treated</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"38\">year_treated</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"39\">time_to_treatment</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"1\">Alabama</td>\n                  <td data-row=\"1\" data-col=\"2\">1</td>\n                  <td data-row=\"1\" data-col=\"3\">2000</td>\n                  <td data-row=\"1\" data-col=\"4\">2006</td>\n                  <td data-row=\"1\" data-col=\"5\">2.027356</td>\n                  <td data-row=\"1\" data-col=\"6\">0</td>\n                  <td data-row=\"1\" data-col=\"7\">0</td>\n                  <td data-row=\"1\" data-col=\"8\">1</td>\n                  <td data-row=\"1\" data-col=\"9\">0</td>\n                  <td data-row=\"1\" data-col=\"10\">0</td>\n                  <td data-row=\"1\" data-col=\"11\">0</td>\n                  <td data-row=\"1\" data-col=\"12\">0</td>\n                  <td data-row=\"1\" data-col=\"13\">0</td>\n                  <td data-row=\"1\" data-col=\"14\">0</td>\n                  <td data-row=\"1\" data-col=\"15\">0</td>\n                  <td data-row=\"1\" data-col=\"16\">0</td>\n                  <td data-row=\"1\" data-col=\"17\">0</td>\n                  <td data-row=\"1\" data-col=\"18\">0</td>\n                  <td data-row=\"1\" data-col=\"19\">0</td>\n                  <td data-row=\"1\" data-col=\"20\">0</td>\n                  <td data-row=\"1\" data-col=\"21\">0</td>\n                  <td data-row=\"1\" data-col=\"22\">0</td>\n                  <td data-row=\"1\" data-col=\"23\">0</td>\n                  <td data-row=\"1\" data-col=\"24\">0</td>\n                  <td data-row=\"1\" data-col=\"25\">0</td>\n                  <td data-row=\"1\" data-col=\"26\">0</td>\n                  <td data-row=\"1\" data-col=\"27\">0</td>\n                  <td data-row=\"1\" data-col=\"28\">0</td>\n                  <td data-row=\"1\" data-col=\"29\">0</td>\n                  <td data-row=\"1\" data-col=\"30\">0</td>\n                  <td data-row=\"1\" data-col=\"31\">0</td>\n                  <td data-row=\"1\" data-col=\"32\">0</td>\n                  <td data-row=\"1\" data-col=\"33\">0</td>\n                  <td data-row=\"1\" data-col=\"34\">0</td>\n                  <td data-row=\"1\" data-col=\"35\">0</td>\n                  <td data-row=\"1\" data-col=\"36\">4499293.0</td>\n                  <td data-row=\"1\" data-col=\"37\">1</td>\n                  <td data-row=\"1\" data-col=\"38\">2006</td>\n                  <td data-row=\"1\" data-col=\"39\">-6</td>\n                </tr>\n                <tr>\n                  <td data-row=\"2\" data-col=\"1\">Alabama</td>\n                  <td data-row=\"2\" data-col=\"2\">1</td>\n                  <td data-row=\"2\" data-col=\"3\">2001</td>\n                  <td data-row=\"2\" data-col=\"4\">2006</td>\n                  <td data-row=\"2\" data-col=\"5\">2.164867</td>\n                  <td data-row=\"2\" data-col=\"6\">0</td>\n                  <td data-row=\"2\" data-col=\"7\">0</td>\n                  <td data-row=\"2\" data-col=\"8\">0</td>\n                  <td data-row=\"2\" data-col=\"9\">0</td>\n                  <td data-row=\"2\" data-col=\"10\">0</td>\n                  <td data-row=\"2\" data-col=\"11\">1</td>\n                  <td data-row=\"2\" data-col=\"12\">0</td>\n                  <td data-row=\"2\" data-col=\"13\">0</td>\n                  <td data-row=\"2\" data-col=\"14\">0</td>\n                  <td data-row=\"2\" data-col=\"15\">0</td>\n                  <td data-row=\"2\" data-col=\"16\">0</td>\n                  <td data-row=\"2\" data-col=\"17\">0</td>\n                  <td data-row=\"2\" data-col=\"18\">0</td>\n                  <td data-row=\"2\" data-col=\"19\">0</td>\n                  <td data-row=\"2\" data-col=\"20\">0</td>\n                  <td data-row=\"2\" data-col=\"21\">0</td>\n                  <td data-row=\"2\" data-col=\"22\">0</td>\n                  <td data-row=\"2\" data-col=\"23\">0</td>\n                  <td data-row=\"2\" data-col=\"24\">0</td>\n                  <td data-row=\"2\" data-col=\"25\">0</td>\n                  <td data-row=\"2\" data-col=\"26\">0</td>\n                  <td data-row=\"2\" data-col=\"27\">0</td>\n                  <td data-row=\"2\" data-col=\"28\">0</td>\n                  <td data-row=\"2\" data-col=\"29\">0</td>\n                  <td data-row=\"2\" data-col=\"30\">0</td>\n                  <td data-row=\"2\" data-col=\"31\">0</td>\n                  <td data-row=\"2\" data-col=\"32\">0</td>\n                  <td data-row=\"2\" data-col=\"33\">0</td>\n                  <td data-row=\"2\" data-col=\"34\">0</td>\n                  <td data-row=\"2\" data-col=\"35\">0</td>\n                  <td data-row=\"2\" data-col=\"36\">4499293.0</td>\n                  <td data-row=\"2\" data-col=\"37\">1</td>\n                  <td data-row=\"2\" data-col=\"38\">2006</td>\n                  <td data-row=\"2\" data-col=\"39\">-5</td>\n                </tr>\n                <tr>\n                  <td data-row=\"3\" data-col=\"1\">Alabama</td>\n                  <td data-row=\"3\" data-col=\"2\">1</td>\n                  <td data-row=\"3\" data-col=\"3\">2002</td>\n                  <td data-row=\"3\" data-col=\"4\">2006</td>\n                  <td data-row=\"3\" data-col=\"5\">1.936334</td>\n                  <td data-row=\"3\" data-col=\"6\">0</td>\n                  <td data-row=\"3\" data-col=\"7\">0</td>\n                  <td data-row=\"3\" data-col=\"8\">0</td>\n                  <td data-row=\"3\" data-col=\"9\">0</td>\n                  <td data-row=\"3\" data-col=\"10\">0</td>\n                  <td data-row=\"3\" data-col=\"11\">0</td>\n                  <td data-row=\"3\" data-col=\"12\">0</td>\n                  <td data-row=\"3\" data-col=\"13\">0</td>\n                  <td data-row=\"3\" data-col=\"14\">1</td>\n                  <td data-row=\"3\" data-col=\"15\">0</td>\n                  <td data-row=\"3\" data-col=\"16\">0</td>\n                  <td data-row=\"3\" data-col=\"17\">0</td>\n                  <td data-row=\"3\" data-col=\"18\">0</td>\n                  <td data-row=\"3\" data-col=\"19\">0</td>\n                  <td data-row=\"3\" data-col=\"20\">0</td>\n                  <td data-row=\"3\" data-col=\"21\">0</td>\n                  <td data-row=\"3\" data-col=\"22\">0</td>\n                  <td data-row=\"3\" data-col=\"23\">0</td>\n                  <td data-row=\"3\" data-col=\"24\">0</td>\n                  <td data-row=\"3\" data-col=\"25\">0</td>\n                  <td data-row=\"3\" data-col=\"26\">0</td>\n                  <td data-row=\"3\" data-col=\"27\">0</td>\n                  <td data-row=\"3\" data-col=\"28\">0</td>\n                  <td data-row=\"3\" data-col=\"29\">0</td>\n                  <td data-row=\"3\" data-col=\"30\">0</td>\n                  <td data-row=\"3\" data-col=\"31\">0</td>\n                  <td data-row=\"3\" data-col=\"32\">0</td>\n                  <td data-row=\"3\" data-col=\"33\">0</td>\n                  <td data-row=\"3\" data-col=\"34\">0</td>\n                  <td data-row=\"3\" data-col=\"35\">0</td>\n                  <td data-row=\"3\" data-col=\"36\">4499293.0</td>\n                  <td data-row=\"3\" data-col=\"37\">1</td>\n                  <td data-row=\"3\" data-col=\"38\">2006</td>\n                  <td data-row=\"3\" data-col=\"39\">-4</td>\n                </tr>\n                <tr>\n                  <td data-row=\"4\" data-col=\"1\">Alabama</td>\n                  <td data-row=\"4\" data-col=\"2\">1</td>\n                  <td data-row=\"4\" data-col=\"3\">2003</td>\n                  <td data-row=\"4\" data-col=\"4\">2006</td>\n                  <td data-row=\"4\" data-col=\"5\">1.919567</td>\n                  <td data-row=\"4\" data-col=\"6\">0</td>\n                  <td data-row=\"4\" data-col=\"7\">0</td>\n                  <td data-row=\"4\" data-col=\"8\">0</td>\n                  <td data-row=\"4\" data-col=\"9\">0</td>\n                  <td data-row=\"4\" data-col=\"10\">0</td>\n                  <td data-row=\"4\" data-col=\"11\">0</td>\n                  <td data-row=\"4\" data-col=\"12\">0</td>\n                  <td data-row=\"4\" data-col=\"13\">0</td>\n                  <td data-row=\"4\" data-col=\"14\">0</td>\n                  <td data-row=\"4\" data-col=\"15\">0</td>\n                  <td data-row=\"4\" data-col=\"16\">0</td>\n                  <td data-row=\"4\" data-col=\"17\">1</td>\n                  <td data-row=\"4\" data-col=\"18\">0</td>\n                  <td data-row=\"4\" data-col=\"19\">0</td>\n                  <td data-row=\"4\" data-col=\"20\">0</td>\n                  <td data-row=\"4\" data-col=\"21\">0</td>\n                  <td data-row=\"4\" data-col=\"22\">0</td>\n                  <td data-row=\"4\" data-col=\"23\">0</td>\n                  <td data-row=\"4\" data-col=\"24\">0</td>\n                  <td data-row=\"4\" data-col=\"25\">0</td>\n                  <td data-row=\"4\" data-col=\"26\">0</td>\n                  <td data-row=\"4\" data-col=\"27\">0</td>\n                  <td data-row=\"4\" data-col=\"28\">0</td>\n                  <td data-row=\"4\" data-col=\"29\">0</td>\n                  <td data-row=\"4\" data-col=\"30\">0</td>\n                  <td data-row=\"4\" data-col=\"31\">0</td>\n                  <td data-row=\"4\" data-col=\"32\">0</td>\n                  <td data-row=\"4\" data-col=\"33\">0</td>\n                  <td data-row=\"4\" data-col=\"34\">0</td>\n                  <td data-row=\"4\" data-col=\"35\">0</td>\n                  <td data-row=\"4\" data-col=\"36\">4499293.0</td>\n                  <td data-row=\"4\" data-col=\"37\">1</td>\n                  <td data-row=\"4\" data-col=\"38\">2006</td>\n                  <td data-row=\"4\" data-col=\"39\">-3</td>\n                </tr>\n                <tr>\n                  <td data-row=\"5\" data-col=\"1\">Alabama</td>\n                  <td data-row=\"5\" data-col=\"2\">1</td>\n                  <td data-row=\"5\" data-col=\"3\">2004</td>\n                  <td data-row=\"5\" data-col=\"4\">2006</td>\n                  <td data-row=\"5\" data-col=\"5\">1.749841</td>\n                  <td data-row=\"5\" data-col=\"6\">0</td>\n                  <td data-row=\"5\" data-col=\"7\">0</td>\n                  <td data-row=\"5\" data-col=\"8\">0</td>\n                  <td data-row=\"5\" data-col=\"9\">0</td>\n                  <td data-row=\"5\" data-col=\"10\">0</td>\n                  <td data-row=\"5\" data-col=\"11\">0</td>\n                  <td data-row=\"5\" data-col=\"12\">0</td>\n                  <td data-row=\"5\" data-col=\"13\">0</td>\n                  <td data-row=\"5\" data-col=\"14\">0</td>\n                  <td data-row=\"5\" data-col=\"15\">0</td>\n                  <td data-row=\"5\" data-col=\"16\">0</td>\n                  <td data-row=\"5\" data-col=\"17\">0</td>\n                  <td data-row=\"5\" data-col=\"18\">0</td>\n                  <td data-row=\"5\" data-col=\"19\">0</td>\n                  <td data-row=\"5\" data-col=\"20\">1</td>\n                  <td data-row=\"5\" data-col=\"21\">0</td>\n                  <td data-row=\"5\" data-col=\"22\">0</td>\n                  <td data-row=\"5\" data-col=\"23\">0</td>\n                  <td data-row=\"5\" data-col=\"24\">0</td>\n                  <td data-row=\"5\" data-col=\"25\">0</td>\n                  <td data-row=\"5\" data-col=\"26\">0</td>\n                  <td data-row=\"5\" data-col=\"27\">0</td>\n                  <td data-row=\"5\" data-col=\"28\">0</td>\n                  <td data-row=\"5\" data-col=\"29\">0</td>\n                  <td data-row=\"5\" data-col=\"30\">0</td>\n                  <td data-row=\"5\" data-col=\"31\">0</td>\n                  <td data-row=\"5\" data-col=\"32\">0</td>\n                  <td data-row=\"5\" data-col=\"33\">0</td>\n                  <td data-row=\"5\" data-col=\"34\">0</td>\n                  <td data-row=\"5\" data-col=\"35\">0</td>\n                  <td data-row=\"5\" data-col=\"36\">4499293.0</td>\n                  <td data-row=\"5\" data-col=\"37\">1</td>\n                  <td data-row=\"5\" data-col=\"38\">2006</td>\n                  <td data-row=\"5\" data-col=\"39\">-2</td>\n                </tr>\n                <tr>\n                  <td data-row=\"6\" data-col=\"1\">Alabama</td>\n                  <td data-row=\"6\" data-col=\"2\">1</td>\n                  <td data-row=\"6\" data-col=\"3\">2005</td>\n                  <td data-row=\"6\" data-col=\"4\">2006</td>\n                  <td data-row=\"6\" data-col=\"5\">2.130440</td>\n                  <td data-row=\"6\" data-col=\"6\">0</td>\n                  <td data-row=\"6\" data-col=\"7\">0</td>\n                  <td data-row=\"6\" data-col=\"8\">0</td>\n                  <td data-row=\"6\" data-col=\"9\">0</td>\n                  <td data-row=\"6\" data-col=\"10\">0</td>\n                  <td data-row=\"6\" data-col=\"11\">0</td>\n                  <td data-row=\"6\" data-col=\"12\">0</td>\n                  <td data-row=\"6\" data-col=\"13\">0</td>\n                  <td data-row=\"6\" data-col=\"14\">0</td>\n                  <td data-row=\"6\" data-col=\"15\">0</td>\n                  <td data-row=\"6\" data-col=\"16\">0</td>\n                  <td data-row=\"6\" data-col=\"17\">0</td>\n                  <td data-row=\"6\" data-col=\"18\">0</td>\n                  <td data-row=\"6\" data-col=\"19\">0</td>\n                  <td data-row=\"6\" data-col=\"20\">0</td>\n                  <td data-row=\"6\" data-col=\"21\">0</td>\n                  <td data-row=\"6\" data-col=\"22\">0</td>\n                  <td data-row=\"6\" data-col=\"23\">1</td>\n                  <td data-row=\"6\" data-col=\"24\">0</td>\n                  <td data-row=\"6\" data-col=\"25\">0</td>\n                  <td data-row=\"6\" data-col=\"26\">0</td>\n                  <td data-row=\"6\" data-col=\"27\">0</td>\n                  <td data-row=\"6\" data-col=\"28\">0</td>\n                  <td data-row=\"6\" data-col=\"29\">0</td>\n                  <td data-row=\"6\" data-col=\"30\">0</td>\n                  <td data-row=\"6\" data-col=\"31\">0</td>\n                  <td data-row=\"6\" data-col=\"32\">0</td>\n                  <td data-row=\"6\" data-col=\"33\">0</td>\n                  <td data-row=\"6\" data-col=\"34\">0</td>\n                  <td data-row=\"6\" data-col=\"35\">0</td>\n                  <td data-row=\"6\" data-col=\"36\">4499293.0</td>\n                  <td data-row=\"6\" data-col=\"37\">1</td>\n                  <td data-row=\"6\" data-col=\"38\">2006</td>\n                  <td data-row=\"6\" data-col=\"39\">-1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"7\" data-col=\"1\">Alabama</td>\n                  <td data-row=\"7\" data-col=\"2\">1</td>\n                  <td data-row=\"7\" data-col=\"3\">2006</td>\n                  <td data-row=\"7\" data-col=\"4\">2006</td>\n                  <td data-row=\"7\" data-col=\"5\">2.079652</td>\n                  <td data-row=\"7\" data-col=\"6\">0</td>\n                  <td data-row=\"7\" data-col=\"7\">0</td>\n                  <td data-row=\"7\" data-col=\"8\">0</td>\n                  <td data-row=\"7\" data-col=\"9\">0</td>\n                  <td data-row=\"7\" data-col=\"10\">0</td>\n                  <td data-row=\"7\" data-col=\"11\">0</td>\n                  <td data-row=\"7\" data-col=\"12\">0</td>\n                  <td data-row=\"7\" data-col=\"13\">0</td>\n                  <td data-row=\"7\" data-col=\"14\">0</td>\n                  <td data-row=\"7\" data-col=\"15\">0</td>\n                  <td data-row=\"7\" data-col=\"16\">0</td>\n                  <td data-row=\"7\" data-col=\"17\">0</td>\n                  <td data-row=\"7\" data-col=\"18\">0</td>\n                  <td data-row=\"7\" data-col=\"19\">0</td>\n                  <td data-row=\"7\" data-col=\"20\">0</td>\n                  <td data-row=\"7\" data-col=\"21\">0</td>\n                  <td data-row=\"7\" data-col=\"22\">0</td>\n                  <td data-row=\"7\" data-col=\"23\">0</td>\n                  <td data-row=\"7\" data-col=\"24\">0</td>\n                  <td data-row=\"7\" data-col=\"25\">0</td>\n                  <td data-row=\"7\" data-col=\"26\">1</td>\n                  <td data-row=\"7\" data-col=\"27\">0</td>\n                  <td data-row=\"7\" data-col=\"28\">0</td>\n                  <td data-row=\"7\" data-col=\"29\">0</td>\n                  <td data-row=\"7\" data-col=\"30\">0</td>\n                  <td data-row=\"7\" data-col=\"31\">0</td>\n                  <td data-row=\"7\" data-col=\"32\">0</td>\n                  <td data-row=\"7\" data-col=\"33\">0</td>\n                  <td data-row=\"7\" data-col=\"34\">0</td>\n                  <td data-row=\"7\" data-col=\"35\">0</td>\n                  <td data-row=\"7\" data-col=\"36\">4499293.0</td>\n                  <td data-row=\"7\" data-col=\"37\">1</td>\n                  <td data-row=\"7\" data-col=\"38\">2006</td>\n                  <td data-row=\"7\" data-col=\"39\">0</td>\n                </tr>\n                <tr>\n                  <td data-row=\"8\" data-col=\"1\">Alabama</td>\n                  <td data-row=\"8\" data-col=\"2\">1</td>\n                  <td data-row=\"8\" data-col=\"3\">2007</td>\n                  <td data-row=\"8\" data-col=\"4\">2006</td>\n                  <td data-row=\"8\" data-col=\"5\">2.145690</td>\n                  <td data-row=\"8\" data-col=\"6\">0</td>\n                  <td data-row=\"8\" data-col=\"7\">0</td>\n                  <td data-row=\"8\" data-col=\"8\">0</td>\n                  <td data-row=\"8\" data-col=\"9\">0</td>\n                  <td data-row=\"8\" data-col=\"10\">0</td>\n                  <td data-row=\"8\" data-col=\"11\">0</td>\n                  <td data-row=\"8\" data-col=\"12\">0</td>\n                  <td data-row=\"8\" data-col=\"13\">0</td>\n                  <td data-row=\"8\" data-col=\"14\">0</td>\n                  <td data-row=\"8\" data-col=\"15\">0</td>\n                  <td data-row=\"8\" data-col=\"16\">0</td>\n                  <td data-row=\"8\" data-col=\"17\">0</td>\n                  <td data-row=\"8\" data-col=\"18\">0</td>\n                  <td data-row=\"8\" data-col=\"19\">0</td>\n                  <td data-row=\"8\" data-col=\"20\">0</td>\n                  <td data-row=\"8\" data-col=\"21\">0</td>\n                  <td data-row=\"8\" data-col=\"22\">0</td>\n                  <td data-row=\"8\" data-col=\"23\">0</td>\n                  <td data-row=\"8\" data-col=\"24\">0</td>\n                  <td data-row=\"8\" data-col=\"25\">0</td>\n                  <td data-row=\"8\" data-col=\"26\">0</td>\n                  <td data-row=\"8\" data-col=\"27\">0</td>\n                  <td data-row=\"8\" data-col=\"28\">0</td>\n                  <td data-row=\"8\" data-col=\"29\">1</td>\n                  <td data-row=\"8\" data-col=\"30\">0</td>\n                  <td data-row=\"8\" data-col=\"31\">0</td>\n                  <td data-row=\"8\" data-col=\"32\">0</td>\n                  <td data-row=\"8\" data-col=\"33\">0</td>\n                  <td data-row=\"8\" data-col=\"34\">0</td>\n                  <td data-row=\"8\" data-col=\"35\">0</td>\n                  <td data-row=\"8\" data-col=\"36\">4499293.0</td>\n                  <td data-row=\"8\" data-col=\"37\">1</td>\n                  <td data-row=\"8\" data-col=\"38\">2006</td>\n                  <td data-row=\"8\" data-col=\"39\">1</td>\n                </tr>\n                <tr>\n                  <td data-row=\"9\" data-col=\"1\">Alabama</td>\n                  <td data-row=\"9\" data-col=\"2\">1</td>\n                  <td data-row=\"9\" data-col=\"3\">2008</td>\n                  <td data-row=\"9\" data-col=\"4\">2006</td>\n                  <td data-row=\"9\" data-col=\"5\">2.043598</td>\n                  <td data-row=\"9\" data-col=\"6\">0</td>\n                  <td data-row=\"9\" data-col=\"7\">0</td>\n                  <td data-row=\"9\" data-col=\"8\">0</td>\n                  <td data-row=\"9\" data-col=\"9\">0</td>\n                  <td data-row=\"9\" data-col=\"10\">0</td>\n                  <td data-row=\"9\" data-col=\"11\">0</td>\n                  <td data-row=\"9\" data-col=\"12\">0</td>\n                  <td data-row=\"9\" data-col=\"13\">0</td>\n                  <td data-row=\"9\" data-col=\"14\">0</td>\n                  <td data-row=\"9\" data-col=\"15\">0</td>\n                  <td data-row=\"9\" data-col=\"16\">0</td>\n                  <td data-row=\"9\" data-col=\"17\">0</td>\n                  <td data-row=\"9\" data-col=\"18\">0</td>\n                  <td data-row=\"9\" data-col=\"19\">0</td>\n                  <td data-row=\"9\" data-col=\"20\">0</td>\n                  <td data-row=\"9\" data-col=\"21\">0</td>\n                  <td data-row=\"9\" data-col=\"22\">0</td>\n                  <td data-row=\"9\" data-col=\"23\">0</td>\n                  <td data-row=\"9\" data-col=\"24\">0</td>\n                  <td data-row=\"9\" data-col=\"25\">0</td>\n                  <td data-row=\"9\" data-col=\"26\">0</td>\n                  <td data-row=\"9\" data-col=\"27\">0</td>\n                  <td data-row=\"9\" data-col=\"28\">0</td>\n                  <td data-row=\"9\" data-col=\"29\">0</td>\n                  <td data-row=\"9\" data-col=\"30\">0</td>\n                  <td data-row=\"9\" data-col=\"31\">0</td>\n                  <td data-row=\"9\" data-col=\"32\">1</td>\n                  <td data-row=\"9\" data-col=\"33\">0</td>\n                  <td data-row=\"9\" data-col=\"34\">0</td>\n                  <td data-row=\"9\" data-col=\"35\">0</td>\n                  <td data-row=\"9\" data-col=\"36\">4499293.0</td>\n                  <td data-row=\"9\" data-col=\"37\">1</td>\n                  <td data-row=\"9\" data-col=\"38\">2006</td>\n                  <td data-row=\"9\" data-col=\"39\">2</td>\n                </tr>\n                <tr>\n                  <td data-row=\"10\" data-col=\"1\">Alabama</td>\n                  <td data-row=\"10\" data-col=\"2\">1</td>\n                  <td data-row=\"10\" data-col=\"3\">2009</td>\n                  <td data-row=\"10\" data-col=\"4\">2006</td>\n                  <td data-row=\"10\" data-col=\"5\">1.938684</td>\n                  <td data-row=\"10\" data-col=\"6\">0</td>\n                  <td data-row=\"10\" data-col=\"7\">0</td>\n                  <td data-row=\"10\" data-col=\"8\">0</td>\n                  <td data-row=\"10\" data-col=\"9\">0</td>\n                  <td data-row=\"10\" data-col=\"10\">0</td>\n                  <td data-row=\"10\" data-col=\"11\">0</td>\n                  <td data-row=\"10\" data-col=\"12\">0</td>\n                  <td data-row=\"10\" data-col=\"13\">0</td>\n                  <td data-row=\"10\" data-col=\"14\">0</td>\n                  <td data-row=\"10\" data-col=\"15\">0</td>\n                  <td data-row=\"10\" data-col=\"16\">0</td>\n                  <td data-row=\"10\" data-col=\"17\">0</td>\n                  <td data-row=\"10\" data-col=\"18\">0</td>\n                  <td data-row=\"10\" data-col=\"19\">0</td>\n                  <td data-row=\"10\" data-col=\"20\">0</td>\n                  <td data-row=\"10\" data-col=\"21\">0</td>\n                  <td data-row=\"10\" data-col=\"22\">0</td>\n                  <td data-row=\"10\" data-col=\"23\">0</td>\n                  <td data-row=\"10\" data-col=\"24\">0</td>\n                  <td data-row=\"10\" data-col=\"25\">0</td>\n                  <td data-row=\"10\" data-col=\"26\">0</td>\n                  <td data-row=\"10\" data-col=\"27\">0</td>\n                  <td data-row=\"10\" data-col=\"28\">0</td>\n                  <td data-row=\"10\" data-col=\"29\">0</td>\n                  <td data-row=\"10\" data-col=\"30\">0</td>\n                  <td data-row=\"10\" data-col=\"31\">0</td>\n                  <td data-row=\"10\" data-col=\"32\">0</td>\n                  <td data-row=\"10\" data-col=\"33\">0</td>\n                  <td data-row=\"10\" data-col=\"34\">0</td>\n                  <td data-row=\"10\" data-col=\"35\">1</td>\n                  <td data-row=\"10\" data-col=\"36\">4499293.0</td>\n                  <td data-row=\"10\" data-col=\"37\">1</td>\n                  <td data-row=\"10\" data-col=\"38\">2006</td>\n                  <td data-row=\"10\" data-col=\"39\">3</td>\n                </tr>\n                <tr>\n                  <td data-row=\"11\" data-col=\"1\">Alabama</td>\n                  <td data-row=\"11\" data-col=\"2\">1</td>\n                  <td data-row=\"11\" data-col=\"3\">2010</td>\n                  <td data-row=\"11\" data-col=\"4\">2006</td>\n                  <td data-row=\"11\" data-col=\"5\">1.747940</td>\n                  <td data-row=\"11\" data-col=\"6\">0</td>\n                  <td data-row=\"11\" data-col=\"7\">0</td>\n                  <td data-row=\"11\" data-col=\"8\">0</td>\n                  <td data-row=\"11\" data-col=\"9\">0</td>\n                  <td data-row=\"11\" data-col=\"10\">0</td>\n                  <td data-row=\"11\" data-col=\"11\">0</td>\n                  <td data-row=\"11\" data-col=\"12\">0</td>\n                  <td data-row=\"11\" data-col=\"13\">0</td>\n                  <td data-row=\"11\" data-col=\"14\">0</td>\n                  <td data-row=\"11\" data-col=\"15\">0</td>\n                  <td data-row=\"11\" data-col=\"16\">0</td>\n                  <td data-row=\"11\" data-col=\"17\">0</td>\n                  <td data-row=\"11\" data-col=\"18\">0</td>\n                  <td data-row=\"11\" data-col=\"19\">0</td>\n                  <td data-row=\"11\" data-col=\"20\">0</td>\n                  <td data-row=\"11\" data-col=\"21\">0</td>\n                  <td data-row=\"11\" data-col=\"22\">0</td>\n                  <td data-row=\"11\" data-col=\"23\">0</td>\n                  <td data-row=\"11\" data-col=\"24\">0</td>\n                  <td data-row=\"11\" data-col=\"25\">0</td>\n                  <td data-row=\"11\" data-col=\"26\">0</td>\n                  <td data-row=\"11\" data-col=\"27\">0</td>\n                  <td data-row=\"11\" data-col=\"28\">0</td>\n                  <td data-row=\"11\" data-col=\"29\">0</td>\n                  <td data-row=\"11\" data-col=\"30\">0</td>\n                  <td data-row=\"11\" data-col=\"31\">0</td>\n                  <td data-row=\"11\" data-col=\"32\">0</td>\n                  <td data-row=\"11\" data-col=\"33\">0</td>\n                  <td data-row=\"11\" data-col=\"34\">0</td>\n                  <td data-row=\"11\" data-col=\"35\">0</td>\n                  <td data-row=\"11\" data-col=\"36\">4499293.0</td>\n                  <td data-row=\"11\" data-col=\"37\">1</td>\n                  <td data-row=\"11\" data-col=\"38\">2006</td>\n                  <td data-row=\"11\" data-col=\"39\">4</td>\n                </tr>\n                <tr>\n                  <td data-row=\"12\" data-col=\"1\">Alaska</td>\n                  <td data-row=\"12\" data-col=\"2\">2</td>\n                  <td data-row=\"12\" data-col=\"3\">2000</td>\n                  <td data-row=\"12\" data-col=\"4\">2005</td>\n                  <td data-row=\"12\" data-col=\"5\">1.491518</td>\n                  <td data-row=\"12\" data-col=\"6\">0</td>\n                  <td data-row=\"12\" data-col=\"7\">0</td>\n                  <td data-row=\"12\" data-col=\"8\">0</td>\n                  <td data-row=\"12\" data-col=\"9\">0</td>\n                  <td data-row=\"12\" data-col=\"10\">0</td>\n                  <td data-row=\"12\" data-col=\"11\">0</td>\n                  <td data-row=\"12\" data-col=\"12\">0</td>\n                  <td data-row=\"12\" data-col=\"13\">0</td>\n                  <td data-row=\"12\" data-col=\"14\">0</td>\n                  <td data-row=\"12\" data-col=\"15\">0</td>\n                  <td data-row=\"12\" data-col=\"16\">0</td>\n                  <td data-row=\"12\" data-col=\"17\">0</td>\n                  <td data-row=\"12\" data-col=\"18\">0</td>\n                  <td data-row=\"12\" data-col=\"19\">0</td>\n                  <td data-row=\"12\" data-col=\"20\">0</td>\n                  <td data-row=\"12\" data-col=\"21\">0</td>\n                  <td data-row=\"12\" data-col=\"22\">0</td>\n                  <td data-row=\"12\" data-col=\"23\">0</td>\n                  <td data-row=\"12\" data-col=\"24\">0</td>\n                  <td data-row=\"12\" data-col=\"25\">0</td>\n                  <td data-row=\"12\" data-col=\"26\">0</td>\n                  <td data-row=\"12\" data-col=\"27\">0</td>\n                  <td data-row=\"12\" data-col=\"28\">0</td>\n                  <td data-row=\"12\" data-col=\"29\">0</td>\n                  <td data-row=\"12\" data-col=\"30\">0</td>\n                  <td data-row=\"12\" data-col=\"31\">0</td>\n                  <td data-row=\"12\" data-col=\"32\">0</td>\n                  <td data-row=\"12\" data-col=\"33\">0</td>\n                  <td data-row=\"12\" data-col=\"34\">0</td>\n                  <td data-row=\"12\" data-col=\"35\">0</td>\n                  <td data-row=\"12\" data-col=\"36\">651473.2</td>\n                  <td data-row=\"12\" data-col=\"37\">1</td>\n                  <td data-row=\"12\" data-col=\"38\">2005</td>\n                  <td data-row=\"12\" data-col=\"39\">-5</td>\n                </tr>\n                <tr>\n                  <td data-row=\"13\" data-col=\"1\">Alaska</td>\n                  <td data-row=\"13\" data-col=\"2\">2</td>\n                  <td data-row=\"13\" data-col=\"3\">2001</td>\n                  <td data-row=\"13\" data-col=\"4\">2005</td>\n                  <td data-row=\"13\" data-col=\"5\">1.846246</td>\n                  <td data-row=\"13\" data-col=\"6\">0</td>\n                  <td data-row=\"13\" data-col=\"7\">0</td>\n                  <td data-row=\"13\" data-col=\"8\">0</td>\n                  <td data-row=\"13\" data-col=\"9\">0</td>\n                  <td data-row=\"13\" data-col=\"10\">0</td>\n                  <td data-row=\"13\" data-col=\"11\">0</td>\n                  <td data-row=\"13\" data-col=\"12\">0</td>\n                  <td data-row=\"13\" data-col=\"13\">0</td>\n                  <td data-row=\"13\" data-col=\"14\">0</td>\n                  <td data-row=\"13\" data-col=\"15\">0</td>\n                  <td data-row=\"13\" data-col=\"16\">0</td>\n                  <td data-row=\"13\" data-col=\"17\">0</td>\n                  <td data-row=\"13\" data-col=\"18\">0</td>\n                  <td data-row=\"13\" data-col=\"19\">0</td>\n                  <td data-row=\"13\" data-col=\"20\">0</td>\n                  <td data-row=\"13\" data-col=\"21\">0</td>\n                  <td data-row=\"13\" data-col=\"22\">0</td>\n                  <td data-row=\"13\" data-col=\"23\">0</td>\n                  <td data-row=\"13\" data-col=\"24\">0</td>\n                  <td data-row=\"13\" data-col=\"25\">0</td>\n                  <td data-row=\"13\" data-col=\"26\">0</td>\n                  <td data-row=\"13\" data-col=\"27\">0</td>\n                  <td data-row=\"13\" data-col=\"28\">0</td>\n                  <td data-row=\"13\" data-col=\"29\">0</td>\n                  <td data-row=\"13\" data-col=\"30\">0</td>\n                  <td data-row=\"13\" data-col=\"31\">0</td>\n                  <td data-row=\"13\" data-col=\"32\">0</td>\n                  <td data-row=\"13\" data-col=\"33\">0</td>\n                  <td data-row=\"13\" data-col=\"34\">0</td>\n                  <td data-row=\"13\" data-col=\"35\">0</td>\n                  <td data-row=\"13\" data-col=\"36\">651473.2</td>\n                  <td data-row=\"13\" data-col=\"37\">1</td>\n                  <td data-row=\"13\" data-col=\"38\">2005</td>\n                  <td data-row=\"13\" data-col=\"39\">-4</td>\n                </tr>\n                <tr>\n                  <td data-row=\"14\" data-col=\"1\">Alaska</td>\n                  <td data-row=\"14\" data-col=\"2\">2</td>\n                  <td data-row=\"14\" data-col=\"3\">2002</td>\n                  <td data-row=\"14\" data-col=\"4\">2005</td>\n                  <td data-row=\"14\" data-col=\"5\">1.665124</td>\n                  <td data-row=\"14\" data-col=\"6\">0</td>\n                  <td data-row=\"14\" data-col=\"7\">0</td>\n                  <td data-row=\"14\" data-col=\"8\">0</td>\n                  <td data-row=\"14\" data-col=\"9\">0</td>\n                  <td data-row=\"14\" data-col=\"10\">0</td>\n                  <td data-row=\"14\" data-col=\"11\">0</td>\n                  <td data-row=\"14\" data-col=\"12\">0</td>\n                  <td data-row=\"14\" data-col=\"13\">0</td>\n                  <td data-row=\"14\" data-col=\"14\">0</td>\n                  <td data-row=\"14\" data-col=\"15\">0</td>\n                  <td data-row=\"14\" data-col=\"16\">0</td>\n                  <td data-row=\"14\" data-col=\"17\">0</td>\n                  <td data-row=\"14\" data-col=\"18\">0</td>\n                  <td data-row=\"14\" data-col=\"19\">0</td>\n                  <td data-row=\"14\" data-col=\"20\">0</td>\n                  <td data-row=\"14\" data-col=\"21\">0</td>\n                  <td data-row=\"14\" data-col=\"22\">0</td>\n                  <td data-row=\"14\" data-col=\"23\">0</td>\n                  <td data-row=\"14\" data-col=\"24\">0</td>\n                  <td data-row=\"14\" data-col=\"25\">0</td>\n                  <td data-row=\"14\" data-col=\"26\">0</td>\n                  <td data-row=\"14\" data-col=\"27\">0</td>\n                  <td data-row=\"14\" data-col=\"28\">0</td>\n                  <td data-row=\"14\" data-col=\"29\">0</td>\n                  <td data-row=\"14\" data-col=\"30\">0</td>\n                  <td data-row=\"14\" data-col=\"31\">0</td>\n                  <td data-row=\"14\" data-col=\"32\">0</td>\n                  <td data-row=\"14\" data-col=\"33\">0</td>\n                  <td data-row=\"14\" data-col=\"34\">0</td>\n                  <td data-row=\"14\" data-col=\"35\">0</td>\n                  <td data-row=\"14\" data-col=\"36\">651473.2</td>\n                  <td data-row=\"14\" data-col=\"37\">1</td>\n                  <td data-row=\"14\" data-col=\"38\">2005</td>\n                  <td data-row=\"14\" data-col=\"39\">-3</td>\n                </tr>\n                <tr>\n                  <td data-row=\"15\" data-col=\"1\">Alaska</td>\n                  <td data-row=\"15\" data-col=\"2\">2</td>\n                  <td data-row=\"15\" data-col=\"3\">2003</td>\n                  <td data-row=\"15\" data-col=\"4\">2005</td>\n                  <td data-row=\"15\" data-col=\"5\">1.823279</td>\n                  <td data-row=\"15\" data-col=\"6\">0</td>\n                  <td data-row=\"15\" data-col=\"7\">0</td>\n                  <td data-row=\"15\" data-col=\"8\">0</td>\n                  <td data-row=\"15\" data-col=\"9\">0</td>\n                  <td data-row=\"15\" data-col=\"10\">0</td>\n                  <td data-row=\"15\" data-col=\"11\">0</td>\n                  <td data-row=\"15\" data-col=\"12\">0</td>\n                  <td data-row=\"15\" data-col=\"13\">0</td>\n                  <td data-row=\"15\" data-col=\"14\">0</td>\n                  <td data-row=\"15\" data-col=\"15\">0</td>\n                  <td data-row=\"15\" data-col=\"16\">0</td>\n                  <td data-row=\"15\" data-col=\"17\">0</td>\n                  <td data-row=\"15\" data-col=\"18\">0</td>\n                  <td data-row=\"15\" data-col=\"19\">0</td>\n                  <td data-row=\"15\" data-col=\"20\">0</td>\n                  <td data-row=\"15\" data-col=\"21\">0</td>\n                  <td data-row=\"15\" data-col=\"22\">0</td>\n                  <td data-row=\"15\" data-col=\"23\">0</td>\n                  <td data-row=\"15\" data-col=\"24\">0</td>\n                  <td data-row=\"15\" data-col=\"25\">0</td>\n                  <td data-row=\"15\" data-col=\"26\">0</td>\n                  <td data-row=\"15\" data-col=\"27\">0</td>\n                  <td data-row=\"15\" data-col=\"28\">0</td>\n                  <td data-row=\"15\" data-col=\"29\">0</td>\n                  <td data-row=\"15\" data-col=\"30\">0</td>\n                  <td data-row=\"15\" data-col=\"31\">0</td>\n                  <td data-row=\"15\" data-col=\"32\">0</td>\n                  <td data-row=\"15\" data-col=\"33\">0</td>\n                  <td data-row=\"15\" data-col=\"34\">0</td>\n                  <td data-row=\"15\" data-col=\"35\">0</td>\n                  <td data-row=\"15\" data-col=\"36\">651473.2</td>\n                  <td data-row=\"15\" data-col=\"37\">1</td>\n                  <td data-row=\"15\" data-col=\"38\">2005</td>\n                  <td data-row=\"15\" data-col=\"39\">-2</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n:::\n\n`base_stagg`に関して、`year_treated`が10000、`time_to_treatment`が-1000となっているユニットがありますが、これは**処置を受けないユニット（never-treated）**を示しています。\n\nfixesが内部的に使用している`fixest::sunab()`関数は、`year_treated`にデータの`year`の範囲外にある大きな値（ここでは10000）を設定することで、これらを自動的にnever-treatedとして認識し、**参照グループ（対照群）**として扱います。`time_to_treatment`にも同様に極端に小さい負の値（-1000）を設定しています。\n\nこれは、Staggered DIDにおいてnever-treatedのユニットの値を`NA`にしてしまうと、推定から完全に除外されてしまい、処置群と比較する対照群が失われてしまうためです。Never-treatedは処置効果を識別するための重要な比較対象なので、データに含める必要があります。\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# never-treatedの確認\nbase_stagg |> \n  filter(year_treated == 10000) |> \n  select(id, year, year_treated, time_to_treatment, treated) |> \n  head()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  id year year_treated time_to_treatment treated\n1 81    1        10000             -1000       0\n2 80    1        10000             -1000       0\n3 79    1        10000             -1000       0\n4 78    1        10000             -1000       0\n5 77    1        10000             -1000       0\n6 76    1        10000             -1000       0\n```\n\n\n:::\n:::\n\n\n:::{.callout-tip}\n## Never-treatedユニットの扱いについて\n\nStaggered DIDのデータセットをご自分で用意される場合も、never-treatedのユニットには同様の処理が必要です：\n\n``` r\n# 例：処置年がNAのユニットをnever-treatedとして設定\ndf <- df |> \n  mutate(\n    year_treated = if_else(\n      is.na(year_treated),\n      max(year, na.rm = TRUE) + 1000,  # または10000など\n      year_treated\n    ),\n    time_to_treatment = if_else(\n      year_treated > max(year),  # never-treatedの条件\n      -1000,\n      year - year_treated\n    )\n  )\n```\n\n**ポイント**：`year_treated`はデータの時間範囲外の大きな値（例：10000）、`time_to_treatment`は極端に小さい負の値（例：-1000）を設定します。これにより、fixesの内部処理（fixest）が適切にnever-treatedを認識します。\n:::\n\n## `run_es()`\n\n基本的な使い方と一緒にパッケージについて説明していきます。関数はイベントスタディを実行する`run_es()`関数とイベントスタディをggplotベースでプロットする`plot_es()`です。\n\nひとまず、`run_es()`の基本的な引数を説明します。\n\n``` r\nrun_es(\n  data,\n  outcome,\n  treatment,\n  time,\n  timing,\n  fe = NULL,\n  lead_range = NULL,\n  lag_range = NULL,\n  covariates = NULL,\n  cluster = NULL,\n  weights = NULL,\n  baseline = -1L,\n  interval = 1,\n  time_transform = FALSE,\n  unit = NULL,\n  staggered = FALSE,\n  method = c(\"classic\", \"sunab\"),\n  conf.level = 0.95,\n  vcov = \"HC1\",\n  vcov_args = list()\n)\n```\n\n| 引数 | 説明 |\n|:-----|:-----|\n| `data` | パネルデータを含むデータフレーム |\n| `outcome` | 結果変数（変数名または式、例：`log(y)`のように記述） |\n| `treatment` | 処置変数（0/1または論理値）。`method = \"classic\"`の場合のみ使用 |\n| `time` | 時間変数（数値型またはDate型） |\n| `timing` | classicの場合：処置タイミング（全ユニット共通の数値/Dateまたは`staggered = TRUE`時は変数名）。sunabの場合：処置採用時点を示す変数 |\n| `fe` | 固定効果の指定（片側式、例：`~ id + year`）。固定効果なしの場合は`NULL` |\n| `lead_range`, `lag_range` | 処置前後の期間範囲を指定する整数。`NULL`の場合は自動決定 |\n| `covariates` | 追加の共変量（片側式、例：`~ x1 + log(x2)`） |\n| `cluster` | クラスター指定（片側式`~ id + year`、列名の文字列、または`nrow(data)`の長さのベクトル） |\n| `weights` | 観測ウェイト（変数名/片側式または`nrow(data)`の長さの数値ベクトル） |\n| `baseline` | ベースライン期間（デフォルト：-1）。\"classic\"と\"sunab\"の両方で、参照期間として結果から除外される |\n| `interval` | 時間変数の間隔（デフォルト：1。Date型の場合は内部で無視される） |\n| `time_transform` | `TRUE`の場合、ユニット内で連続した整数時間を作成 |\n| `unit` | ユニット識別変数（`time_transform = TRUE`の場合は必須。指定時はメタデータにも使用） |\n| `staggered` | `TRUE`の場合、timing変数を使用（classicの場合）またはsunabで利用 |\n| `method` | `\"classic\"`または`\"sunab\"`を指定（デフォルト：`\"classic\"`） |\n| `conf.level` | 信頼水準（デフォルト：0.95）。数値ベクトルで複数指定可能 |\n| `vcov` | 分散共分散行列の種類。`fixest::vcov()`または`broom::tidy(vcov = ...)`に渡される（デフォルト：`\"HC1\"`） |\n| `vcov_args` | `fixest::vcov()`に渡す追加引数のリスト |\n: {tbl-colwidths=\"[25,75]\"}\n\n文字で見てもわかりにくいと思うので、読み込んだデータを使って関数を回してみましょう。\n\n### 通常のDiDにおけるイベントスタディ {#sec-basic-es}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nes <- run_es(\n  data = base_did,\n  outcome = y,\n  treatment = treat,\n  time = period,\n  timing = 6,\n  fe = ~ id + period\n)\n```\n:::\n\n\n基本的なケースであればこれくらいの指定で済みます。プロットは後のセクションでまとめて載せます。\n\n### Staggered DiD 1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nes_stagg1 <- run_es(\n  data = base_stagg,\n  outcome = y,\n  treatment = treated,\n  time = year,\n  timing = year_treated,\n  fe = ~ id + year,\n  staggered = TRUE,\n  method = \"sunab\"\n)\n```\n:::\n\n\n[先ほど](#sec-basic-es)と違う点は、`staggered`がTRUE、`method`が\"sunab\"、`timing`が具体的な数値ではなく、処置年を示す変数を指定しているところです。\n\n\"sunab\"は[Sun and Abraham (2021)](https://www.sciencedirect.com/science/article/abs/pii/S030440762030378X)で提唱されている方法を指し、Staggered DiDにおけるイベントスタディで有用です。裏では`fixest::sunab()`関数を使っています。\n\n### Staggered DiD 2\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 共変量の変数を式の形にしておく\ncovariates <- as.formula(paste(\"~\", paste(region, collapse = \"+\")))\n\nes_stagg2 <- run_es(\n  data = df_castle,\n  outcome = l_homicide,\n  treatment = is_treated,\n  time = year,\n  timing = year_treated,\n  fe = ~ state + year,\n  covariates = covariates,\n  cluster = ~ sid,\n  weights = ~ popwt,\n  baseline = 0,\n  staggered = TRUE,\n  vcov = \"cluster\"\n)\n```\n:::\n\n\n今回の例は共変量が多いので事前に`as.formula()`を使って処理してしまっていますが、関数内で`covariates = ~ cov1 + cov2`のような指定の仕方で問題ありません。\n\nまた、ここでは`vcov`も\"cluster\"に指定して、`sid`でクラスタリングした標準誤差を計算しています。`vcov`については、`?fixest::feols()`で詳細を確認できます。\n\n## `plot_es()`\n\nこだわりがなければ、`plot_es(es)`の程度の書き方でプロットを出力することができます。引数の説明は後に回して、一旦先ほどのイベントスタディの結果をプロットしてみましょう。\n\n### 通常のDiDにおけるイベントスタディ\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n後の2つもそうですが、ベースラインがデフォルトのままなので、処置前年（-1）が抜けて値が0をとっています。\n\n### Staggered DiD 1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es_stagg1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n### Staggered DiD 2\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es_stagg2)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nStaggeredの方もいい感じにプロットできています。この図はMixtape内でlead変数とlag変数を手作業で作って実装しプロットされていますが、[その図](https://mixtape.scunning.com/09-difference_in_differences#fig-event-cheng2)と見比べても同じ推移が示されていることがわかります。\n\n### 使い方\n\n基本的には上の使い方で十分ですが、ggplotベースで作ったこともあり、柔軟な対応も可能です。\n\n``` r\nplot_es(\n  data,\n  type = \"ribbon\",\n  vline_val = 0,\n  vline_color = \"#000\",\n  hline_val = 0,\n  hline_color = \"#000\",\n  linewidth = 1,\n  pointsize = 2,\n  alpha = 0.2,\n  barwidth = 0.2,\n  color = \"#B25D91FF\",\n  fill = \"#B25D91FF\"\n)\n```\n\n- `data`：`run_es()`で作成した結果のデータフレーム\n- `type`：`ribbon`と`errorbar`が指定可能\n- `vline_val`：縦の破線の位置（デフォルトは0）\n- `vline_color`：縦の破線の色（デフォルトは`#000`（黒））\n- `hline_val`：横の破線の位置（デフォルトは0）\n- `hline_color`：縦の破線の色（デフォルトは`#000`（黒））\n- `linewidth`：折れ線の太さ（デフォルトは1）\n- `pointsize`：点の大きさ（デフォルトは2）\n- `alpha`：リボンの透明度（デフォルトは0.2）\n- `color`：線と点の色（デフォルトは`#B25D91FF`（ピンク））\n- `fill`リボンの色（デフォルトは`#B25D91FF`（ピンク））\n\n---\n\n`plot_es()`関数内でもある程度自由度をもって設定できます。  \n例えばプロットをエラーバーのタイプにしてみましょう。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es_stagg2, type = \"errorbar\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nさらに色も変えてみます。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es_stagg2, type = \"errorbar\", color = \"#000\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nリボンタイプとエラーバータイプがあり、さらにそこからある程度の自由度もある点が他のパッケージに対する優位性にもなっています。\n\nちなみに、ggplotベースということで、**ggplotの関数をつなげることも可能です**！\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es(es_stagg2, type = \"errorbar\", color = \"#000\") +\n  geom_hline(yintercept = .08, color = \"red\") +\n  annotate(\n    \"text\",\n    x = 3,\n    y = -.1,\n    label = \"DD Coefficient = 0.08\\n(s.e. = 0.03)\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\nMixtape風に係数を示す水平線と注釈を追加してみました。このようにどんどん要素を追加していくことができます。\n\n## `plot_es_interactive()`\n\n`plot_es()`で作成したプロットをインタラクティブにする関数も用意しています。`plot_es_interactive()`です。\n\nこの関数で表示したプロットは、マウスオーバーで各点の推定値と信頼区間が表示されたり、ズームイン・ズームアウトができたりします。\n\n論文に載せるための関数ではないものの、結果の確認やコミュニケーションの際に便利かと思います。\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_es_interactive(es_stagg2)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-8b07056cfbcb77a3f2f2\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8b07056cfbcb77a3f2f2\">{\"x\":{\"visdat\":{\"78684c815f97\":[\"function () \",\"plotlyVisDat\"],\"78682ac87ec8\":[\"function () \",\"data\"],\"7868593c20f5\":[\"function () \",\"data\"]},\"cur_data\":\"7868593c20f5\",\"attrs\":{\"78682ac87ec8\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":{},\"ymin\":{},\"ymax\":{},\"type\":\"scatter\",\"mode\":\"lines\",\"hoveron\":\"points\",\"fill\":\"toself\",\"fillcolor\":\"#B25D91FF\",\"opacity\":0.20000000000000001,\"line\":{\"width\":0},\"name\":\"95% CI\",\"hoverinfo\":\"skip\",\"showlegend\":false,\"inherit\":true},\"7868593c20f5\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":{},\"y\":{},\"type\":\"scatter\",\"mode\":\"lines+markers\",\"line\":{\"color\":\"#B25D91FF\",\"width\":2},\"marker\":{\"size\":8,\"color\":\"#B25D91FF\",\"line\":{\"color\":\"#fff\",\"width\":1}},\"text\":{},\"hoverinfo\":\"text\",\"name\":\"Estimate\",\"showlegend\":false,\"inherit\":true},\"7868593c20f5.1\":{\"x\":0,\"y\":-0.50989931672728306,\"xend\":0,\"yend\":0.31039673759402214,\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#000\",\"dash\":\"dash\",\"width\":1},\"hoverinfo\":\"skip\",\"showlegend\":false,\"inherit\":false},\"7868593c20f5.2\":{\"x\":-9.5,\"y\":0,\"xend\":5.5,\"yend\":0,\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#000\",\"dash\":\"dash\",\"width\":1},\"hoverinfo\":\"skip\",\"showlegend\":false,\"inherit\":false}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"Relative Time to Treatment\",\"zeroline\":false,\"gridcolor\":\"#eee\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"Estimate and 95% CI\",\"zeroline\":false,\"gridcolor\":\"#eee\"},\"plot_bgcolor\":\"#fff\",\"paper_bgcolor\":\"#fff\",\"hovermode\":\"closest\",\"font\":{\"family\":\"Arial, sans-serif\",\"size\":12},\"showlegend\":false},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false,\"displayModeBar\":true,\"modeBarButtonsToRemove\":[\"pan2d\",\"select2d\",\"lasso2d\",\"autoScale2d\",\"hoverClosestCartesian\",\"hoverCompareCartesian\"],\"displaylogo\":false},\"data\":[{\"fillcolor\":\"#B25D91FF\",\"x\":[-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,5,5,4,3,2,1,0,-1,-2,-3,-4,-5,-6,-7,-8,-9],\"type\":\"scatter\",\"mode\":\"lines\",\"hoveron\":\"points\",\"fill\":\"toself\",\"opacity\":0.20000000000000001,\"line\":{\"color\":\"rgba(31,119,180,1)\",\"width\":0},\"name\":\"95% CI\",\"hoverinfo\":[\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\",\"skip\"],\"showlegend\":false,\"y\":[-0.34889119862968465,-0.4635448333884391,-0.30635153005793792,-0.1075653381547883,-0.087207508348462942,-0.095293663933610079,-0.056318095764794573,-0.041900590706245439,-0.090185715407510539,0,0.022492298071371736,-0.006383439959123216,0.0012144854730531673,-0.036785863838321206,0.062650551310018412,0.062650551310018412,0.28217885235820195,0.19410074693115553,0.20882889735161098,0.17120528888061248,0.13293074761703191,0,0.039145684663557154,0.080065717028417402,0.080672620425189773,0.087182537629335144,0.097121962832330211,0.12614116209770954,0.031961736744468727,-0.14358021949674507,-0.17247983014924606],\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(31,119,180,1)\"}},\"error_y\":{\"color\":\"rgba(31,119,180,1)\"},\"error_x\":{\"color\":\"rgba(31,119,180,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5],\"y\":[-0.26068551438946536,-0.30356252644259207,-0.13719489665673459,0.0092879119714606162,0.0049572272419336292,-0.0040555631521374674,0.012177262330197598,0.019082563161085982,-0.025520015371976689,0,0.077711522844201825,0.082410924460744633,0.10502169141233207,0.07865744154641717,0.17241470183411017],\"type\":\"scatter\",\"mode\":\"lines+markers\",\"line\":{\"color\":\"#B25D91FF\",\"width\":2},\"marker\":{\"color\":\"#B25D91FF\",\"size\":8,\"line\":{\"color\":\"#fff\",\"width\":1}},\"text\":[\"<b>Relative Time:<\\/b> -9<br><b>Estimate:<\\/b> -0.2607<br><b>Std. Error:<\\/b> 0.0450<br><b>95% CI:<\\/b> [-0.3489, -0.1725]<br><b>P-value:<\\/b> 0.0000\",\"<b>Relative Time:<\\/b> -8<br><b>Estimate:<\\/b> -0.3036<br><b>Std. Error:<\\/b> 0.0816<br><b>95% CI:<\\/b> [-0.4635, -0.1436]<br><b>P-value:<\\/b> 0.0002\",\"<b>Relative Time:<\\/b> -7<br><b>Estimate:<\\/b> -0.1372<br><b>Std. Error:<\\/b> 0.0863<br><b>95% CI:<\\/b> [-0.3064, 0.0320]<br><b>P-value:<\\/b> 0.1126\",\"<b>Relative Time:<\\/b> -6<br><b>Estimate:<\\/b> 0.0093<br><b>Std. Error:<\\/b> 0.0596<br><b>95% CI:<\\/b> [-0.1076, 0.1261]<br><b>P-value:<\\/b> 0.8763\",\"<b>Relative Time:<\\/b> -5<br><b>Estimate:<\\/b> 0.0050<br><b>Std. Error:<\\/b> 0.0470<br><b>95% CI:<\\/b> [-0.0872, 0.0971]<br><b>P-value:<\\/b> 0.9161\",\"<b>Relative Time:<\\/b> -4<br><b>Estimate:<\\/b> -0.0041<br><b>Std. Error:<\\/b> 0.0466<br><b>95% CI:<\\/b> [-0.0953, 0.0872]<br><b>P-value:<\\/b> 0.9306\",\"<b>Relative Time:<\\/b> -3<br><b>Estimate:<\\/b> 0.0122<br><b>Std. Error:<\\/b> 0.0349<br><b>95% CI:<\\/b> [-0.0563, 0.0807]<br><b>P-value:<\\/b> 0.7277\",\"<b>Relative Time:<\\/b> -2<br><b>Estimate:<\\/b> 0.0191<br><b>Std. Error:<\\/b> 0.0311<br><b>95% CI:<\\/b> [-0.0419, 0.0801]<br><b>P-value:<\\/b> 0.5400\",\"<b>Relative Time:<\\/b> -1<br><b>Estimate:<\\/b> -0.0255<br><b>Std. Error:<\\/b> 0.0330<br><b>95% CI:<\\/b> [-0.0902, 0.0391]<br><b>P-value:<\\/b> 0.4396\",\"<b>Relative Time:<\\/b> 0<br><b>Estimate:<\\/b> 0.0000<br><b>Std. Error:<\\/b> 0.0000<br><b>95% CI:<\\/b> [0.0000, 0.0000]<br><b>P-value:<\\/b> NA\",\"<b>Relative Time:<\\/b> 1<br><b>Estimate:<\\/b> 0.0777<br><b>Std. Error:<\\/b> 0.0282<br><b>95% CI:<\\/b> [0.0225, 0.1329]<br><b>P-value:<\\/b> 0.0060\",\"<b>Relative Time:<\\/b> 2<br><b>Estimate:<\\/b> 0.0824<br><b>Std. Error:<\\/b> 0.0453<br><b>95% CI:<\\/b> [-0.0064, 0.1712]<br><b>P-value:<\\/b> 0.0696\",\"<b>Relative Time:<\\/b> 3<br><b>Estimate:<\\/b> 0.1050<br><b>Std. Error:<\\/b> 0.0530<br><b>95% CI:<\\/b> [0.0012, 0.2088]<br><b>P-value:<\\/b> 0.0480\",\"<b>Relative Time:<\\/b> 4<br><b>Estimate:<\\/b> 0.0787<br><b>Std. Error:<\\/b> 0.0589<br><b>95% CI:<\\/b> [-0.0368, 0.1941]<br><b>P-value:<\\/b> 0.1824\",\"<b>Relative Time:<\\/b> 5<br><b>Estimate:<\\/b> 0.1724<br><b>Std. Error:<\\/b> 0.0560<br><b>95% CI:<\\/b> [0.0627, 0.2822]<br><b>P-value:<\\/b> 0.0022\"],\"hoverinfo\":[\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\",\"text\"],\"name\":\"Estimate\",\"showlegend\":false,\"error_y\":{\"color\":\"rgba(255,127,14,1)\"},\"error_x\":{\"color\":\"rgba(255,127,14,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[0,0],\"y\":[-0.50989931672728306,0.31039673759402214],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#000\",\"dash\":\"dash\",\"width\":1},\"hoverinfo\":[\"skip\",\"skip\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(44,160,44,1)\",\"line\":{\"color\":\"rgba(44,160,44,1)\"}},\"error_y\":{\"color\":\"rgba(44,160,44,1)\"},\"error_x\":{\"color\":\"rgba(44,160,44,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[-9.5,5.5],\"y\":[0,0],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#000\",\"dash\":\"dash\",\"width\":1},\"hoverinfo\":[\"skip\",\"skip\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(214,39,40,1)\",\"line\":{\"color\":\"rgba(214,39,40,1)\"}},\"error_y\":{\"color\":\"rgba(214,39,40,1)\"},\"error_x\":{\"color\":\"rgba(214,39,40,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\nマウスオーバーすると値が表示されます。\n\nこちらも`plot_es()`と同様に、引数で色や線の太さなどを指定できますので、いろいろ試してみてください。\n\n## おわりに\n\nまだまだ開発途上ですが、staggeredまで対応できたので、これからしばらくはブラッシュアップを念頭にアップデートしていこうと思います。\n\n冒頭にも書きましたが、もし使っていただいて「使いにくい」や「こんな機能が欲しい」等ありましたら、以下のコメントやGitHubの[Issues](https://github.com/yo5uke/fixes/issues)までお願いします。\n\n## 🔗 データ出典\n\nデータ出典：[Causal Inference: The Mixtape](https://mixtape.scunning.com/)（Scott Cunnningham, 2021）  \nデータはGitHub上で公開されており、以下のリポジトリから入手可能です：\n\n<https://github.com/scunning1975/mixtape>\n\nまた、データはMITライセンスのもとで提供されています。\n\n\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../../site_libs/plotly-binding-4.11.0/plotly.js\"></script>\n<script src=\"../../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../../site_libs/crosstalk-1.2.2/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../../site_libs/crosstalk-1.2.2/js/crosstalk.min.js\"></script>\n<link href=\"../../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}