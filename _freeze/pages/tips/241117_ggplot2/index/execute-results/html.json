{
  "hash": "42818b3f41d82742d38d86607ada47c5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"ã€4.0.0å¯¾å¿œï¼ã€‘[ggplot2]{.fira-code}ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰\"\ndescription: |\n  ggplotã‚’ä½¿ã†ã®ã«å½¹ç«‹ã¤ã‚³ãƒãƒ³ãƒ‰ã‚’ç´¹ä»‹ã—ã¾ã™ï¼\ndate: 2024-11-17\ndate-modified: last-modified\ncategories:\n  - R\nimage: figure/fig-ggrepel.png\nformat: \n  html: \n    fig-format: png\neditor: visual\n---\n\n## ã¯ã˜ã‚ã«\n\nçš†ã•ã‚“ã€ggplotã€ä½¿ã£ã¦ã¾ã™ã‹ï¼Ÿå¤šåˆ†ãŠä½¿ã„ã§ã™ã‚ˆã­ã€‚\n\nåƒ•ã¯æ•°ã‹æœˆå‰ggplotã®ã‚¬ã‚¤ãƒ‰ãƒ–ãƒƒã‚¯ã‚’è²·ã„ã¾ã—ã¦ã€ã„ã‚ã„ã‚ã¨å‹‰å¼·ã—ã¦ã„ã‚‹ã¨ã“ã‚ã§ã”ã–ã„ã¾ã™ã€‚\n\nã“ã‚“ãªã“ã¨ã‚‚ã§ãã‚‹ã®ã‹ï¼ã¨ã„ã†ç™ºè¦‹ãŒå¤šã€…ã‚ã‚Šã€Rãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çš†æ§˜ã«ã¯ãœã²è²·ã£ã¦ã„ãŸã ããŸã„ä»£ç‰©ãªã®ã§ã™ãŒã€ã„ã‹ã‚“ã›ã‚“ãŠå€¤æ®µãŒå¼µã‚Šã¾ã™ã®ã§ã€ã„ãã¤ã‹ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ã”ç´¹ä»‹ã—ã¾ã™ã€‚\n\næ›¸ç±ã®ãƒªãƒ³ã‚¯ã¯ä»¥ä¸‹ã§ã™ã€‚\n\n::: {.callout-tip appearance=\"minimal\" icon=\"false\"}\n[Rã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚¯ãƒƒã‚¯ãƒ–ãƒƒã‚¯ ç¬¬2ç‰ˆ â€•ggplot2ã«ã‚ˆã‚‹ã‚°ãƒ©ãƒ•ä½œæˆã®ãƒ¬ã‚·ãƒ”é›†](https://www.amazon.co.jp/R%E3%82%B0%E3%83%A9%E3%83%95%E3%82%A3%E3%83%83%E3%82%AF%E3%82%B9%E3%82%AF%E3%83%83%E3%82%AF%E3%83%96%E3%83%83%E3%82%AF-%E7%AC%AC2%E7%89%88-%E2%80%95ggplot2%E3%81%AB%E3%82%88%E3%82%8B%E3%82%B0%E3%83%A9%E3%83%95%E4%BD%9C%E6%88%90%E3%81%AE%E3%83%AC%E3%82%B7%E3%83%94%E9%9B%86-Winston-Chang/dp/4873118921)\n:::\n\nã•ã‚‰ã«ã€2025å¹´9æœˆã€ggplot2ãŒãƒãƒ¼ã‚¸ãƒ§ãƒ³4.0.0ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸï¼ãã‚Œã‚’è¨˜å¿µã—ã€4.0.0ã®è¦ç´ ã‚‚å–ã‚Šå…¥ã‚ŒãŸãƒšãƒ¼ã‚¸ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¾ã—ãŸï¼ğŸ‰\n\nãœã²ã”å‚è€ƒã«ãªã•ã£ã¦ãã ã•ã„ï¼\n\n## `ggplot2`ã®åŸºæœ¬\n\n::: callout-note\nä½¿ã£ãŸã“ã¨ãŒã‚ã‚‹æ–¹ã¯ã“ã®è¾ºã¯ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚\n\nä»Šå›ä½¿ã†ãƒ‡ãƒ¼ã‚¿ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹`iris`ã¨`Orange`ã§ã™ã€‚\n:::\n\nã²ã¨ã¾ãšä¸»è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚‹`ggplot2`ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"ggplot2\")\nlibrary(ggplot2)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(family = \"Times New Roman\")\n```\n:::\n\n\n\nåŸºæœ¬çš„ãªä½¿ã„æ–¹ã¨ã—ã¦ã¯ã€`ggplot()`ã¨`aes()`ã€ãã—ã¦å›³ã«å¿œã˜ã¦`geom_line()`ï¼ˆæŠ˜ã‚Œç·šï¼‰ã‚„`geom_point()`ï¼ˆæ•£å¸ƒå›³ï¼‰ãªã©ã‚’ä½¿ã£ã¦ã„ãã¾ã™ã€‚\n\nä»Šå›ã¯ä¾‹ã¨ã—ã¦ã€ã‚¢ã‚¤ãƒªã‚¹ã®ãŒãç‰‡ã®é•·ã•ã€å¹…ã‚’ãã‚Œãã‚Œè»¸ã¨ã—ã¦ãƒ—ãƒ­ãƒƒãƒˆã—ã¾ã™ã€‚\n\n### æ•£å¸ƒå›³\n\nã¾ãšã¯åŸºæœ¬çš„ãªæ•£å¸ƒå›³ã‚’æã„ã¦ã¿ã¾ã™ã€‚æ•£å¸ƒå›³ã¯`geom_point()`ã‚’ä½¿ã†ã“ã¨ã§æç”»ã§ãã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![irisãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä½¿ã£ãŸæ•£å¸ƒå›³](index_files/figure-html/fig-iris-1.png){#fig-iris}\n:::\n:::\n\n\n1.  `ggplot(data, aes())`ã¨ã„ã†å½¢ã§ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æŒ‡å®š\n2.  `aes()`å†…ã§ã¯Xè»¸ã¨Yè»¸ã‚’ãã‚Œãã‚ŒæŒ‡å®šã™ã‚‹ã€‚\n    -   ä¾‹ï¼š`aes(x = Sepal.Length, y = Sepal.Width)`\n    -   ç¬¬1å¼•æ•°ãŒXã€ç¬¬2å¼•æ•°ãŒYã¨æ±ºã¾ã£ã¦ã„ã‚‹ã®ã§ã€`x =`ã‚„`y =`ã¯æ›¸ã‹ãªãã¦ã‚‚ã‚ˆã„ã§ã™ã€‚\n3.  ggplotã®ã‚³ãƒãƒ³ãƒ‰ã¯`+`ã§ç¹‹ã\n4.  æ•£å¸ƒå›³ã‚’ä½œã‚‹ãŸã‚ã«`geom_point()`ã‚’ç¹‹ã’ã‚‹\n\nã“ã‚ŒãŒåœŸå°ã§ã™ã€‚`ggplot()`ã ã‘ã§ã¯ãƒ—ãƒ­ãƒƒãƒˆã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã®ã§ã€`geom_point()`ãªã©ä½•ã‹ã—ã‚‰ç¹‹ãå½¢ã«ã—ã¦ãã ã•ã„ã€‚\n\n**å›å¸°ç·šã‚’å¼•ããŸã„å ´åˆï¼š**\n\næ—©é€Ÿå¿œç”¨ã§ã¯ã‚ã‚Šã¾ã™ãŒã€æ•£å¸ƒå›³ã‚’æã„ãŸã‚‰å›å¸°ç·šã‚’å¼•ããŸã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã‚ˆã­ã€‚ãã®ãŸã‚ã«ã¯ã€`geom_smooth()`ã‚’ä½¿ã„ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  geom_smooth(method = lm)\n```\n\n::: {.cell-output-display}\n![å›å¸°ç›´ç·šã‚’å¼•ã„ãŸæ•£å¸ƒå›³](index_files/figure-html/fig-iris-lm-1.png){#fig-iris-lm}\n:::\n:::\n\n\n`method = lm`ã§å›å¸°ç›´ç·šã‚’å¼•ãã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯Yã‚’Xã«å›å¸°ã™ã‚‹ç›´ç·šãŒå¼•ã‹ã‚Œã¾ã™ã€‚å¼ã‚’å¤‰ãˆãŸã„å ´åˆã¯`formula = y ~ log(x)`ãªã©ã¨å¼ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚\n\nã¾ãŸã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ä¿¡é ¼åŒºé–“ãŒãƒ—ãƒ­ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚è¦ã‚‰ãªã„å ´åˆã¯ã€`se = FALSE`ã‚’è¿½åŠ ã—ã¾ã™ã€‚\n\nã¾ãŸã€lmä»¥å¤–ã«ã‚‚ã€`method = \"loess\"`ãªã©ã‚‚ã‚ã‚Šã¾ã™ã€‚`?geom_smooth`ã§ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  geom_smooth(method = \"loess\", se = FALSE)\n```\n\n::: {.cell-output-display}\n![loessã‚’ä½¿ã£ãŸæ•£å¸ƒå›³](index_files/figure-html/fig-iris-loess-1.png){#fig-iris-loess}\n:::\n:::\n\n\n### æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•\n\næŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã¯`geom_line()`ã‚’ä½¿ã„ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd <- tibble::tibble(\n  a = 1:4, \n  b = c(5, 3, 4, 2)\n)\n\nggplot(d, aes(x = a, y = b)) + \n  geom_line()\n```\n\n::: {.cell-output-display}\n![æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•](index_files/figure-html/fig-iris-line-1.png){#fig-iris-line}\n:::\n:::\n\n\nä»Šå›ã¯`d`ã¨ã„ã†ä½•ã®ã²ã­ã‚Šã‚‚ãªã„ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä½œæˆã—ã¦ã€ãã‚Œã‚’ç”¨ã„ã¦æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚\n\nãªãœã‚ã–ã‚ã–ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’è‡ªåˆ†ã§ä½œã£ãŸã‹ã¨ã„ã†ã¨ã€1å€‹ä½“ã«ã¤ã„ã¦ã®ã¿æ™‚ç³»åˆ—ã‚’ã¨ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ¢ã—ã¦ãã‚‹ã‚ˆã‚Šã€ä½œã£ãŸæ–¹ãŒæ—©ã‹ã£ãŸã‹ã‚‰ã§ã™ğŸ˜…\n\nã¨ã„ã†ã®ã‚‚ã€æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã‚’ä½œã‚‹ã¨ãã¯ã€å¤šãã®å ´åˆå„å€‹ä½“ã”ã¨ã«ä½•æœ¬ã‹ã®æŠ˜ã‚Œç·šã‚’æãã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™[^1]ã€‚å„å€‹ä½“ã”ã¨ã«æŠ˜ã‚Œç·šã‚’ä½œã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€[å¾Œã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³](#sec-multi-cat-plot)ã§ã”ç¢ºèªãã ã•ã„ã€‚\n\n[^1]: ä¾‹ãˆã°ç”·æ€§ã¨å¥³æ€§ã¨ã„ã†2ç¨®é¡ã«ã¤ã„ã¦ã€ãã‚Œãã‚Œå¹³å‡å¯¿å‘½ã®æ™‚ç³»åˆ—ã‚°ãƒ©ãƒ•ã‚’ä½œã‚‹å ´åˆãªã©ã€‚\n\nã“ã“ã§è¦šãˆã¦ã„ãŸã ããŸã„ã®ã¯`geom_line()`ã§æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã‚’ä½œã‚Œã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚\n\n### æ£’ã‚°ãƒ©ãƒ•\n\næ£’ã‚°ãƒ©ãƒ•ã‚‚æ±ç”¨æ€§ãŒé«˜ã„ã‚°ãƒ©ãƒ•ã§ã™ã€‚æ£’ã‚°ãƒ©ãƒ•ã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å†…ã®é›†è¨ˆã‚’ã™ã‚‹ã¨ãã«å½¹ã«ç«‹ã¡ã¾ã™ã€‚\n\nã¾ãšã¯ã€`iris`ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®`Species`ï¼ˆç¨®ï¼‰ã”ã¨ã«å€‹ä½“æ•°ã‚’æ•°ãˆãŸæ£’ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Species)) + \n  geom_bar()\n```\n\n::: {.cell-output-display}\n![æ£’ã‚°ãƒ©ãƒ•](index_files/figure-html/fig-iris-bar-1.png){#fig-iris-bar}\n:::\n:::\n\n\nãŠã£ã¨â€¦ã€‚ã¾ã•ã‹ã®ã™ã¹ã¦50å€‹ä½“ãšã¤ã§ã€æ£’ã‚°ãƒ©ãƒ•ãŒå…¨éƒ¨åŒã˜é«˜ã•ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã“ã‚Œã¯ãƒŸã‚¹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼\n\næ£’ã‚°ãƒ©ãƒ•ã‚’æ›¸ãéš›ã«ã¯ã€ç¸¦ã¯è‡ªå‹•ã§å€‹ä½“æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§ã€`aes(x = Species)`ã¨Xã‚’æŒ‡å®šã™ã‚‹ã ã‘ã§æ¨ªã«ç¨®é¡ã€ç¸¦ã«ã‚«ã‚¦ãƒ³ãƒˆã‚’ã¨ã£ãŸæ£’ã‚°ãƒ©ãƒ•ãŒæã‘ã¦ã—ã¾ã„ã¾ã™ã€‚\n\nã‚‚ã—æ¨ªå‘ãã«ã—ãŸã‘ã‚Œã°ã€`aes(y = Species)`ã¨Yã‚’æŒ‡å®šã™ã‚Œã°OKã§ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(y = Species)) + \n  geom_bar()\n```\n\n::: {.cell-output-display}\n![æ¨ªå‘ãã®æ£’ã‚°ãƒ©ãƒ•](index_files/figure-html/fig-iris-bar-horizontal-1.png){#fig-iris-bar-horizontal}\n:::\n:::\n\n\nã‚‚ã†1ç¨®é¡ã„ãã¾ã—ã‚‡ã†ã€‚`iris`ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®`Species`ï¼ˆç¨®ï¼‰ã”ã¨ã«ã€`Sepal.Length`ï¼ˆãŒãç‰‡ã®é•·ã•ï¼‰ã®å¹³å‡ã‚’è¨ˆç®—ã—ã¦ã€ãã®å¹³å‡å€¤ã‚’æ£’ã‚°ãƒ©ãƒ•ã§è¡¨ç¤ºã—ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Species, y = Sepal.Length)) + \n  geom_bar(stat = \"summary\", fun = \"mean\")\n```\n\n::: {.cell-output-display}\n![ç¨®ã”ã¨ã®ãŒãç‰‡ã®é•·ã•ã®å¹³å‡](index_files/figure-html/fig-iris-bar-mean-1.png){#fig-iris-bar-mean}\n:::\n:::\n\n\nä»Šå›ã¯`geom_bar(stat = \"summary\", fun = \"mean\")`ã¨ã™ã‚‹ã“ã¨ã§ã€`Species`ã”ã¨ã«`Sepal.Length`ã®å¹³å‡ã‚’è¨ˆç®—ã—ã¦æ£’ã‚°ãƒ©ãƒ•ã‚’æã„ã¦ã„ã¾ã™ã€‚ç¨®é¡ã”ã¨ã«é›†è¨ˆã‚’ã™ã‚‹ã®ã ã‘ã©ã€ã˜ã‚ƒã‚é›†è¨ˆã™ã‚‹ã¨ãã«ã¯å¹³å‡ã‚’ä½¿ã£ã¦ã­ã€ã¨ã„ã†ã“ã¨ã‚’`geom_bar()`å†…ã§æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚\n\nã“ã®å ´åˆã¯ç¨®é¡ã”ã¨ã«ãŒãç‰‡ã®é•·ã•ã‚’è¨ˆç®—ã™ã‚‹ã€ã¨ã„ã†ã“ã¨ã§Xã‚‚Yã‚‚ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å†…ã®å¤‰æ•°ã‚’ä½¿ã„ã¾ã™ã®ã§`aes(x = Species, y = Sepal.Length)`ã¨X, Yä¸¡æ–¹æ˜ç¤ºã—ã¦ã„ã¾ã™ã€‚\n\n### ç®±ã²ã’å›³\n\nç®±ã²ã’å›³ã¯ã€åˆ†å¸ƒã‚’å¯è¦–åŒ–ã™ã‚‹ã®ã«ä¾¿åˆ©ãªã‚°ãƒ©ãƒ•ã§ã™ã€‚æ•£å¸ƒå›³ã¨ä¼¼ã¦ã„ã¾ã™ãŒã€åˆ†å¸ƒã®è¦ç´„ãŒã‚ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Species, y = Sepal.Length)) + \n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![ç®±ã²ã’å›³](index_files/figure-html/fig-iris-box-1.png){#fig-iris-box}\n:::\n:::\n\n\nå„ç¨®é¡ã«ãŠã„ã¦ã€`Sepal.Length`ï¼ˆãŒãç‰‡ã®é•·ã•ï¼‰ã®åˆ†å¸ƒãŒã‚ã‹ã‚Šã¾ã™ã€‚å››åˆ†ä½æ•°ã‚„å¤–ã‚Œå€¤ãŒã‚ã‹ã‚‹ã®ãŒç‰¹å¾´ã§ã™ã€‚\n\n### ãƒã‚¤ã‚ªãƒªãƒ³ãƒ—ãƒ­ãƒƒãƒˆ\n\nãƒã‚¤ã‚ªãƒªãƒ³ãƒ—ãƒ­ãƒƒãƒˆã¯ã€åˆ†å¸ƒã‚’å¯è¦–åŒ–ã™ã‚‹ã®ã«ä¾¿åˆ©ãªã‚°ãƒ©ãƒ•ã§ã™ã€‚ç®±ã²ã’å›³ã¨ä¼¼ã¦ã„ã¾ã™ãŒã€åˆ†å¸ƒã®å½¢çŠ¶ã‚‚ã‚ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Species, y = Sepal.Length)) + \n  geom_violin()\n```\n\n::: {.cell-output-display}\n![ãƒã‚¤ã‚ªãƒªãƒ³ãƒ—ãƒ­ãƒƒãƒˆ](index_files/figure-html/fig-iris-violin-1.png){#fig-iris-violin}\n:::\n:::\n\n\nå„ç¨®é¡ã«ãŠã„ã¦ã€`Sepal.Length`ï¼ˆãŒãç‰‡ã®é•·ã•ï¼‰ã®åˆ†å¸ƒãŒã‚ã‹ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€`setosa`ã¯ãŒãç‰‡ã®é•·ã•ãŒ5ã‚ãŸã‚Šã«é›†ä¸­ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚`virginica`ã¯å…¨ä½“çš„ã«é•·ã„å‚¾å‘ãŒã‚ã‚‹ã“ã¨ã‚‚ã‚ã‹ã‚Šã¾ã™ã­ã€‚\n\n## è‰²ã‚’ä»˜ã‘ã‚‹ {#sec-color}\n\nã‚°ãƒ©ãƒ•ã«è‰²ã‚’ä»˜ã‘ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚\n\nåŸºæœ¬çš„ã«ã¯`geom_xxx()`å†…ã§`color = \"red\"`ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚Œã°ã€è‰²ã‚’ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point(color = \"red\")\n```\n\n::: {.cell-output-display}\n![æ•£å¸ƒå›³ã®ç‚¹ã‚’èµ¤è‰²ã«](index_files/figure-html/fig-color-1.png){#fig-color}\n:::\n:::\n\n\nã“ã®ã‚ˆã†ã«ã€`geom_point(color = \"red\")`ã§ç‚¹ã‚’èµ¤è‰²ã«ã—ã¦ã„ã¾ã™ã€‚\n\nä»–ã®ã‚±ãƒ¼ã‚¹ã‚‚è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(d, aes(x = a, y = b)) + \n  geom_line(color = \"blue\")\n```\n\n::: {.cell-output-display}\n![æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã®ç·šã‚’é’è‰²ã«](index_files/figure-html/fig-color-line-1.png){#fig-color-line}\n:::\n:::\n\n\nã“ã‚Œã‚‚åŒæ§˜ã«ã€`geom_line(color = \"blue\")`ã§ç·šã‚’é’è‰²ã«ã—ã¦ã„ã¾ã™ã€‚\n\næ£’ã‚°ãƒ©ãƒ•ã®å ´åˆã¯ã€å°‘ã—äº‹æƒ…ãŒç•°ãªã‚Šã¾ã™ã€‚`color`ã¯æ£’ã®æ ç·šã®è‰²ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§ã€æ£’è‡ªä½“ã®è‰²ã‚’å¤‰ãˆãŸã„å ´åˆã¯`fill`ã‚’ä½¿ã„ã¾ã™ã€‚\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Species, y = Sepal.Length)) + \n  geom_bar(stat = \"summary\", fun = \"mean\", color = \"darkgreen\")\n\nggplot(iris, aes(x = Species, y = Sepal.Length)) + \n  geom_bar(stat = \"summary\", fun = \"mean\", fill = \"darkgreen\")\n```\n\n::: {.cell-output-display}\n![æ£’ã‚°ãƒ©ãƒ•ã®æ ç·šãŒç·‘è‰²ã«](index_files/figure-html/fig-color-bar-1.png){#fig-color-bar-1}\n:::\n\n::: {.cell-output-display}\n![æ£’ã®è‰²ãŒç·‘è‰²ã«](index_files/figure-html/fig-color-bar-2.png){#fig-color-bar-2}\n:::\n:::\n\n\n`fill`ã‚’ä½¿ã†ã®ã¯æ£’ã‚°ãƒ©ãƒ•ã‚„ãƒã‚¤ã‚ªãƒªãƒ³ãƒ—ãƒ­ãƒƒãƒˆãªã©ã€å¡—ã‚Šã¤ã¶ã—ãŒã‚ã‚‹å ´åˆã§ã™ã€‚ã‚‚ã—æ ç·šã¨å¡—ã‚Šã¤ã¶ã—ã®ä¸¡æ–¹ã‚’å¤‰ãˆãŸã„å ´åˆã¯ã€`color`ã¨`fill`ã®ä¸¡æ–¹ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Species, y = Sepal.Length)) + \n  geom_violin(color = \"darkgreen\", fill = \"lightgreen\")\n```\n\n::: {.cell-output-display}\n![æ ç·šã¨å¡—ã‚Šã¤ã¶ã—ã®ä¸¡æ–¹ã‚’æŒ‡å®š](index_files/figure-html/fig-color-violin-both-1.png){#fig-color-violin-both}\n:::\n:::\n\n\n## å°‘ã—ã„ã˜ã‚‹\n\nã“ã“ã§ã¯å°‘ã—ã‚°ãƒ©ãƒ•ã‚’ã„ã˜ã£ã¦ã€ç‚¹ã®å½¢ã‚’å¤‰ãˆãŸã‚Šã€ç·šã®ç¨®é¡ã‚„å¤ªã•ã‚’å¤‰ãˆãŸã‚Šã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚\n\n### ç‚¹ã®å½¢\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point(shape = 17, color = \"blue\", size = 3)\n```\n\n::: {.cell-output-display}\n![ç‚¹ã®å½¢ã¨å¤§ãã•ãŒå¤‰ã‚ã£ã¦ã„ã¾ã™](index_files/figure-html/fig-point-shape-1.png){#fig-point-shape}\n:::\n:::\n\n\n1.  `shape`ã§ç‚¹ã®å½¢ã‚’æŒ‡å®š\n    -   å½¢ã¯0ã‹ã‚‰25ã¾ã§ã‚ã‚Šã¾ã™ã€‚`?points`ã§ç¢ºèªã§ãã¾ã™ã€‚\n2.  `size`ã§ç‚¹ã®å¤§ãã•ã‚’æŒ‡å®š\n    -   æ•°å€¤ãŒå¤§ãã„ã»ã©å¤§ãããªã‚Šã¾ã™ã€‚\n\n### ç·šã®ç¨®é¡ã¨å¤ªã•\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(d, aes(x = a, y = b)) + \n  geom_line(color = \"blue\", linetype = 2, linewidth = 1.5)\n```\n\n::: {.cell-output-display}\n![ç·šã®ç¨®é¡ã¨å¤ªã•ãŒå¤‰ã‚ã£ã¦ã„ã¾ã™](index_files/figure-html/fig-line-type-1.png){#fig-line-type}\n:::\n:::\n\n\n1.  `linetype`ã§ç·šã®ç¨®é¡ã‚’æŒ‡å®š\n    -   0ã‹ã‚‰6ã¾ã§ã‚ã‚Šã¾ã™ã€‚`?linetype`ã§ç¢ºèªã§ãã¾ã™ã€‚\n2.  `linewidth`ã§ç·šã®å¤ªã•ã‚’æŒ‡å®š\n    -   æ•°å€¤ãŒå¤§ãã„ã»ã©å¤ªããªã‚Šã¾ã™ã€‚\n\n## è»¸\n\nåŸºæœ¬çš„ãªã‚°ãƒ©ãƒ•ã‚’ç´¹ä»‹ã§ããŸã¨ã“ã‚ã§ã€æ¬¡ã«ã“ã‚Œã‚‰ã®ã‚°ãƒ©ãƒ•ã‚’ä½¿ã„ãªãŒã‚‰ã€è»¸ã®æ‰±ã„ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚\n\n### è»¸ãƒ©ãƒ™ãƒ«\n\nã¾ãšã¯Xè»¸ã€Yè»¸ã®ãƒ©ãƒ™ãƒ«ã‚’å¤‰æ›´ã—ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  labs(x = \"Length of Sepal\", y = \"Width of Sepal\")\n```\n\n::: {.cell-output-display}\n![è»¸ãƒ©ãƒ™ãƒ«ã‚’å¤‰æ›´](index_files/figure-html/fig-axis-label-1.png){#fig-axis-label}\n:::\n:::\n\n\n`labs(x = \"Length of Sepal\", y = \"Width of Sepal\")`ã§Xè»¸ã¨Yè»¸ã®ãƒ©ãƒ™ãƒ«ã‚’å¤‰æ›´ã—ã¦ã„ã¾ã™ã€‚\n\nã¾ãŸã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯åŒã˜çµæœã‚’ç¤ºã—ã¾ã™ã€‚\n\n``` r\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  xlab(\"Length of Sepal\") + \n  ylab(\"Width of Sepal\")\n```\n\nã™ãªã‚ã¡ã€`labs()`ã¯ãã‚Œä¸€ã¤ã§Xè»¸ã‚‚Yè»¸ã‚‚ãƒ©ãƒ™ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€`xlab()`ã€`ylab()`ã‚’ä½¿ãˆã°ç‰‡æ–¹ãšã¤ã§ã‚‚å¤‰æ›´ã§ãã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚\n\næ¬¡ã«ã€è»¸ãƒ©ãƒ™ãƒ«ã®ä½“è£ã‚’å¤‰æ›´ã—ãŸã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  labs(x = \"Length of Sepal\", y = \"Width of Sepal\") + \n  theme(axis.title = element_text(\n    family = \"Times New Roman\", face = \"italic\", \n    color = \"red\", size = 20\n  ))\n```\n\n::: {.cell-output-display}\n![æ–‡å­—ã®ä½“è£ãŒå¤‰ã‚ã£ã¦ã„ã¾ã™](index_files/figure-html/fig-axis-font-1.png){#fig-axis-font}\n:::\n:::\n\n\n1.  `theme()`å†…ã®`axis.title`ã§å¤‰æ›´ã™ã‚‹\n    -   Xè»¸Yè»¸ã®ã©ã¡ã‚‰ã‹ã ã‘å¤‰æ›´ã—ãŸã‘ã‚Œã°ã€`axis.title.x`ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚\n2.  `element_text()`å†…ã§å…·ä½“çš„ã«ãƒ•ã‚©ãƒ³ãƒˆã®ä½“è£ã‚’æŒ‡å®š\n    -   ãƒ•ã‚©ãƒ³ãƒˆã¯Times New Romanã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯Windowsã®è¨­å®šã§ã‚ã‚Šã€Macã‚„Linuxã§ã¯Timesã§è¡¨ç¤ºã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚\n\n    -   ä»Šå›ã¯ã‚ã‹ã‚Šã‚„ã™ãæ´¾æ‰‹ã«ã—ã¾ã—ãŸãŒã€ã“ã‚Œã‚‰ã®è¦ç´ ã‚’å¤‰æ›´ã™ã‚Œã°èª¿æ•´ã§ãã¾ã™ã€‚\n\n    -   ä¾‹ãˆã°ã€`face = \"bold\"`ã«ã™ã‚Œã°å¤ªå­—ã«ã§ãã¾ã™ã€‚\n\n    -   ä»–ã«ã‚‚ã‚ã‚Šã¾ã™ãŒã€ãŠãŠã‚€ã­ä½¿ã†ã®ã¯ã“ã®ã‚ãŸã‚Šã§ã—ã‚‡ã†ã€‚\n\n### è»¸ã®ç›®ç››ã‚Š\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  scale_x_continuous(breaks = seq(4.5, 8, .5)) + \n  scale_y_continuous(breaks = seq(2, 4, 1))\n```\n\n::: {.cell-output-display}\n![ç›®ç››ã‚Šã®é–“éš”ãŒå¤‰ã‚ã£ã¦ã„ã¾ã™](index_files/figure-html/fig-axis-scale-1.png){#fig-axis-scale}\n:::\n:::\n\n\n@fig-axis-font ã¨æ¯”è¼ƒã—ã¦ã‚‚ã‚‰ãˆã‚Œã°ã‚ã‹ã‚Šã¾ã™ãŒã€ç›®ç››ã‚ŠãŒXè»¸ã¯0.5åˆ»ã¿ã€Yè»¸ã¯1åˆ»ã¿ã«ãªã‚‹ã‚ˆã†å¤‰æ›´ã—ã¾ã—ãŸã€‚ã“ã®ã‚ˆã†ã«ã€Xï¼ˆYï¼‰ãŒé€£ç¶šå€¤ã§ã‚ã‚‹å ´åˆã€`scale_x_continuous()`ï¼ˆ`scale_y_continuous()`ï¼‰ã§å¤‰æ›´ã§ãã¾ã™ã€‚`seq()`ã¯æ•°åˆ—ã‚’ä½œã‚‹é–¢æ•°ã§ã€`seq(from, to, by)`ã®é †ã«æŒ‡å®šã—ã¾ã™ã€‚\n\nã¾ãŸã€é€£ç¶šå¤‰æ•°ã§ã¯ãªãã‚«ãƒ†ã‚´ãƒªå¤‰æ•°ã®å ´åˆã¯ã€`scale_x_discrete()`ï¼ˆ`scale_y_discrete()`ï¼‰ã‚’ä½¿ã„ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Species, y = Sepal.Length)) + \n  geom_bar(stat = \"summary\", fun = \"mean\") + \n  scale_x_discrete(breaks = c(\"setosa\", \"versicolor\", \"virginica\"), \n                   labels = c(\"A\", \"B\", \"C\"))\n```\n\n::: {.cell-output-display}\n![ã‚«ãƒ†ã‚´ãƒªã®ãƒ©ãƒ™ãƒ«ãŒå¤‰ã‚ã£ã¦ã„ã¾ã™](index_files/figure-html/fig-axis-scale-cat-1.png){#fig-axis-scale-cat}\n:::\n:::\n\n\n`breaks`ã§å…ƒã®ãƒ©ãƒ™ãƒ«ã€`labels`ã§æ–°ã—ã„ãƒ©ãƒ™ãƒ«ã‚’æŒ‡å®šã—ã¾ã™ã€‚ãã‚Œãã‚Œ`A`, `B`, `C`ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚\n\nç›®ç››ã‚Šã‚‚åŒæ§˜ã«ãƒ•ã‚©ãƒ³ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme(axis.text = element_text(\n    family = \"Times New Roman\", face = \"bold\", \n    color = \"red\", size = 20\n  ))\n```\n\n::: {.cell-output-display}\n![æ•°å­—ã®ãƒ•ã‚©ãƒ³ãƒˆãŒå¤‰ã‚ã£ã¦ã„ã¾ã™](index_files/figure-html/fig-scale-font-1.png){#fig-scale-font}\n:::\n:::\n\n\nã‚‚ã¯ã‚„è¨³ãŒåˆ†ã‹ã‚‰ãªã„å›³ã§ã™ãŒã€ã“ã®ã‚ˆã†ã«ä½“è£ã¯å¤‰æ›´å¯èƒ½ã§ã™ã€‚è¦ç´ ã¯å¤§ä½“ä¸Šã¨åŒã˜ã§ã€`axis.text.x`ã®ã‚ˆã†ã«ã©ã¡ã‚‰ã‹ã ã‘å¤‰æ›´ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚\n\nã¾ãŸã€`axis.ticks`ã§ç›®ç››ã‚Šã‚’æ¶ˆå»ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme(\n    axis.text = element_text(family = \"Times New Roman\", face = \"bold\", \n                             color = \"red\", size = 20), \n    axis.ticks = element_blank()\n  )\n```\n\n::: {.cell-output-display}\n![ç›®ç››ã‚ŠãŒæ¶ˆãˆã¦ã„ã¾ã™](index_files/figure-html/fig-delete-memori-1.png){#fig-delete-memori}\n:::\n:::\n\n\nãŠåˆ¤ã‚Šã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿè»¸ã®æ•°å­—ã¯æ®‹ã£ã¦ã„ã¾ã™ãŒã€ç›®ç››ã‚Šç·šã¯æ¶ˆãˆã¦ã„ã¾ã™ã€‚@fig-scale-font ã¨è¦‹æ¯”ã¹ã¦ã¿ã¦ãã ã•ã„ã€‚\n\n### è»¸ã®ç¯„å›²\n\nXè»¸ã¨Yè»¸ã®ç¯„å›²ã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã§ã™ã€‚ã“ã‚Œã¾ã§ã®å›³ã§ã¯ã ã„ãŸã„4ã‹ã‚‰8ã‚ãŸã‚ŠãŒXã®ç¯„å›²ã€2.0ã‹ã‚‰4.5ãŒYã®ç¯„å›²ã§ã—ãŸã€‚`xlim(a, b)`ã¨`ylim(a, b)`ã§è¨­å®šã§ãã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  xlim(5, 7) + \n  ylim(3, 4) + \n  theme(\n    axis.text = element_text(family = \"Times New Roman\", face = \"bold\", \n                             color = \"red\", size = 20), \n    axis.ticks = element_blank()\n  )\n```\n\n::: {.cell-output-display}\n![ç¯„å›²ã‚’å¤‰ãˆã¾ã—ãŸ](index_files/figure-html/fig-change-range-1.png){#fig-change-range}\n:::\n:::\n\n\n## æ³¨é‡ˆ\n\nã‚°ãƒ©ãƒ•ã®ä¸­ã«æ–‡å­—ã‚„ç·šã‚’å…¥ã‚Œã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚æ–‡å­—ã‚„ç·šã‚’å…¥ã‚Œã‚‹ã«ã¯`annotate()`é–¢æ•°ã‚’ä½¿ã„ã¾ã™ã€‚\n\n### æ–‡å­—\n\nã¾ãšã¯æ–‡å­—ã‚’å…¥ã‚Œã‚‹æ–¹æ³•ã§ã™ã€‚æ–‡å­—ã¯`annotate()`å†…ã§`\"text\"`ã‹`\"segment\"`ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§æŒ¿å…¥å¯èƒ½ã§ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  annotate(\"text\", label = \"ggplot is\\nwonderful!\", x = 6.5, y = 4, \n           family = \"Times New Roman\", color = \"#CC6666\", size = 10)\n```\n\n::: {.cell-output-display}\n![è¡¨å†…ã«æ–‡å­—ã‚’å…¥ã‚Œã‚‰ã‚Œã¾ã—ãŸ](index_files/figure-html/fig-annotate-1.png){#fig-annotate}\n:::\n:::\n\n\n1.  `annotate(\"text\", label = \"hogehoge\")`ã§`hogehoge`ã¨æ–‡å­—ã‚’å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã‚‹\n\n2.  `x`ã¨`y`ã®ä½ç½®ã‚’æŒ‡å®šã—ãªã„ã¨åæ˜ ã•ã‚Œãªã„\n\n3.  æ”¹è¡Œã—ãŸã„å ´åˆã€`\\n`ã‚’å…¥ã‚Œã‚‹\n\n4.  ãƒ•ã‚©ãƒ³ãƒˆã€è‰²ã€ã‚µã‚¤ã‚ºã‚‚æŒ‡å®šã§ãã‚‹\n\né–¢æ•°ä¸€ã¤ã§æ„å¤–ã¨ç°¡å˜ã«ã§ãã¾ã™ã€‚\n\n### ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ\n\næ£’ç·šã‚„çŸ¢å°ã‚’ä»˜ã‘ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  annotate(\"segment\", x = 5, xend = 7, y = 4, yend = 2.5, \n           linewidth = 2, color = \"#CC6666\")\n```\n\n::: {.cell-output-display}\n![æ–œã‚ã«æ£’ç·šãŒå…¥ã‚Šã¾ã—ãŸã€‚](index_files/figure-html/fig-segment-1-1.png){#fig-segment-1}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  annotate(\"segment\", x = 5, xend = 7, y = 4, yend = 2.5, \n           linewidth = 2, color = \"#CC6666\", \n           arrow = arrow(length = unit(2, units = \"cm\")))\n```\n\n::: {.cell-output-display}\n![çŸ¢å°ã«ãªã‚Šã¾ã—ãŸã€‚](index_files/figure-html/fig-segment-2-1.png){#fig-segment-2}\n:::\n:::\n\n\n1.  `\"segment\"`ã§æ£’ç·šãŒã§ãã‚‹\n2.  `x`ã¨`xend`ã€`y`ã¨`yend`ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹\n    -   $(x, y)$ã‹ã‚‰$(xend, yend)$ã¾ã§ã®2ç‚¹ã‚’çµã¶ã‚ˆã†ã«ã§ãã¾ã™ã€‚\n3.  `linewidth`ã§ç·šã®å¤ªã•ã‚’æŒ‡å®šå¯\n    -   ä»–ã®è¦ç´ ã‚‚æ–‡å­—ã®å ´åˆã¨åŒæ§˜ã«æŒ‡å®šã§ãã¾ã™ãŒã€`size`ãŒ`linewidth`ã«ç½®ãæ›ã‚ã£ã¦ã„ã¾ã™ã€‚\n4.  `arrow = arrow(length = unit(x, units = \"cm\"))`ã§çŸ¢ã˜ã‚ŠãŒä»˜ã\n    -   `x`ã§çŸ¢ã˜ã‚Šã®ã‚µã‚¤ã‚ºã€`units`ã¯å˜ä½ã§ã€ä»–ã«mmã‚„inchesãªã©ãŒã‚ã‚Šã¾ã™ã€‚\n    -   ã‚„ã‚„ã“ã—ã„ã§ã™ãŒã€`xend`ã¨`yend`ã®æ–¹ã«å‘ã‹ã£ã¦çŸ¢å°ãŒä»˜ãã¾ã™ã€‚\n\nä»¥ä¸Šã®ã‚ˆã†ã«ã€æ–‡å­—ã ã‘ã§ãªãç·šã‚„çŸ¢å°ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nä»Šå›ã¯ã‚ã‹ã‚Šã‚„ã™ãã§ã‹ã§ã‹ã¨æãã¾ã—ãŸãŒã€ä¾‹ãˆã°ã‚°ãƒ©ãƒ•å†…ã®ç‰¹å¾´çš„ãªéƒ¨åˆ†ã«æ³¨é‡ˆã‚’ã¤ã‘ãŸã„å ´åˆãªã©ã«å½¹ç«‹ã¡ã¾ã™ã€‚\n\n## è¤‡æ•°ã®ãƒ—ãƒ­ãƒƒãƒˆã¨å‡¡ä¾‹\n\n### è¤‡æ•°ã®ã‚«ãƒ†ã‚´ãƒªã®ãƒ—ãƒ­ãƒƒãƒˆ {#sec-multi-cat-plot}\n\nã“ã“ã§ã¯`Orange`ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ã£ã¦è¤‡æ•°ã®ã‚«ãƒ†ã‚´ãƒªã®ãƒ—ãƒ­ãƒƒãƒˆã¨ã€å‡¡ä¾‹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚\n\nè¤‡æ•°ã®ã‚«ãƒ†ã‚´ãƒªã®ãƒ—ãƒ­ãƒƒãƒˆã¨ã¯ã€ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã„ãŸã ã‘ã‚‹ã¨æ—©ã„ã¨æ€ã„ã¾ã™ã€‚\n\n\n::: {#tbl-orange .cell tbl-cap='`Orangeãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ä¸€éƒ¨'}\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script>\n\n      function styleCell_m2hq5vion0lt55lr00kt(i, j, css_id) {\n          var table = document.getElementById(\"tinytable_m2hq5vion0lt55lr00kt\");\n          var cell = table.querySelector(`[data-row=\"${i}\"][data-col=\"${j}\"]`);\n          if (cell) {\n              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);\n              cell.classList.add(css_id);\n          } else {\n              console.warn(`Cell at (${i}, ${j}) not found.`);\n          }\n      }\n      function spanCell_m2hq5vion0lt55lr00kt(i, j, rowspan, colspan) {\n        var table = document.getElementById(\"tinytable_m2hq5vion0lt55lr00kt\");\n        const targetCell = table.querySelector(`[data-row=\"${i}\"][data-col=\"${j}\"]`);\n        if (!targetCell) {\n          console.warn(`Cell at (${i}, ${j}) not found.`);\n        }\n\n        // Get all cells that need to be removed\n        const cellsToRemove = [];\n        for (let r = 0; r < rowspan; r++) {\n          for (let c = 0; c < colspan; c++) {\n            if (r === 0 && c === 0) continue; // Skip the target cell\n            const cell = table.querySelector(`[data-row=\"${i + r}\"][data-col=\"${j + c}\"]`);\n            if (cell) {\n              cellsToRemove.push(cell);\n            }\n          }\n        }\n\n        // Remove all cells\n        cellsToRemove.forEach(cell => cell.remove());\n\n        // Set rowspan and colspan of the target cell if it exists\n        if (targetCell) {\n          targetCell.rowSpan = rowspan;\n          targetCell.colSpan = colspan;\n        }\n      }\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '10', j: 0 }, { i: '10', j: 1 }, { i: '10', j: 2 },  ], css_id: 'tinytable_css_6312evu1kto0fsytdkts',}, \n          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 },  ], css_id: 'tinytable_css_214xjpzle13h77ty3h7s',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  styleCell_m2hq5vion0lt55lr00kt(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <style>\n      /* tinytable css entries after */\n      .table td.tinytable_css_6312evu1kto0fsytdkts, .table th.tinytable_css_6312evu1kto0fsytdkts { border-bottom: solid #d3d8dc 0.1em; }\n      .table td.tinytable_css_214xjpzle13h77ty3h7s, .table th.tinytable_css_214xjpzle13h77ty3h7s { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }\n    </style>\n    <div class=\"container\">\n      <table class=\"table table-borderless\" id=\"tinytable_m2hq5vion0lt55lr00kt\" style=\"table-layout: fixed; width: 100% !important; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        <thead>\n        \n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"0\">Tree</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">age</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">circumference</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"0\">1</td>\n                  <td data-row=\"1\" data-col=\"1\">118</td>\n                  <td data-row=\"1\" data-col=\"2\">30</td>\n                </tr>\n                <tr>\n                  <td data-row=\"2\" data-col=\"0\">1</td>\n                  <td data-row=\"2\" data-col=\"1\">484</td>\n                  <td data-row=\"2\" data-col=\"2\">58</td>\n                </tr>\n                <tr>\n                  <td data-row=\"3\" data-col=\"0\">1</td>\n                  <td data-row=\"3\" data-col=\"1\">664</td>\n                  <td data-row=\"3\" data-col=\"2\">87</td>\n                </tr>\n                <tr>\n                  <td data-row=\"4\" data-col=\"0\">1</td>\n                  <td data-row=\"4\" data-col=\"1\">1004</td>\n                  <td data-row=\"4\" data-col=\"2\">115</td>\n                </tr>\n                <tr>\n                  <td data-row=\"5\" data-col=\"0\">1</td>\n                  <td data-row=\"5\" data-col=\"1\">1231</td>\n                  <td data-row=\"5\" data-col=\"2\">120</td>\n                </tr>\n                <tr>\n                  <td data-row=\"6\" data-col=\"0\">1</td>\n                  <td data-row=\"6\" data-col=\"1\">1372</td>\n                  <td data-row=\"6\" data-col=\"2\">142</td>\n                </tr>\n                <tr>\n                  <td data-row=\"7\" data-col=\"0\">1</td>\n                  <td data-row=\"7\" data-col=\"1\">1582</td>\n                  <td data-row=\"7\" data-col=\"2\">145</td>\n                </tr>\n                <tr>\n                  <td data-row=\"8\" data-col=\"0\">2</td>\n                  <td data-row=\"8\" data-col=\"1\">118</td>\n                  <td data-row=\"8\" data-col=\"2\">33</td>\n                </tr>\n                <tr>\n                  <td data-row=\"9\" data-col=\"0\">2</td>\n                  <td data-row=\"9\" data-col=\"1\">484</td>\n                  <td data-row=\"9\" data-col=\"2\">69</td>\n                </tr>\n                <tr>\n                  <td data-row=\"10\" data-col=\"0\">2</td>\n                  <td data-row=\"10\" data-col=\"1\">664</td>\n                  <td data-row=\"10\" data-col=\"2\">111</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\n`Tree`ã¯æœ¨ã®è­˜åˆ¥å­ã§ã€1ï½5ã¾ã§ã‚ã‚Šã¾ã™ã€‚`age`ã¯æ—¥é½¢ã€`circumference`ã¯å¹¹ã®å‘¨å›²ã§ã™ã€‚\n\nã“ã“ã§ã‚„ã‚ŠãŸã„ã“ã¨ã¯ã€æœ¨ã®ç¨®é¡ã”ã¨ã«ã€æ—¥é½¢ã¨å¹¹ã®å‘¨å›²ã‚’è»¸ã«ã¨ã£ã¦ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã“ã¨ã§ã™ã€‚ã“ã‚Œã‚’ãŸã ãƒ—ãƒ­ãƒƒãƒˆã—ã¦ã—ã¾ã†ã¨ã€\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Orange, aes(x = age, y = circumference)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ”¾ã‚Šè¾¼ã¿ã¾ã—ãŸ](index_files/figure-html/fig-orange-pool-1.png){#fig-orange-pool}\n:::\n:::\n\n\nã“ã‚Œã§ã¯å„ç‚¹ãŒã©ã®æœ¨ã®ã‚‚ã®ãªã®ã‹åˆ¤åˆ¥ã§ããªã„çŠ¶æ…‹ã§ã™ã€‚\n\nã“ã‚Œã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã«ã€è‰²ã‚’ä»˜ã‘ãŸã„ã¨ã—ã¾ã—ã‚‡ã†ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Orange, aes(x = age, y = circumference, color = Tree)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![è‰²ãŒåˆ†ã‹ã‚Œã¾ã—ãŸ](index_files/figure-html/fig-orange-color-1.png){#fig-orange-color}\n:::\n:::\n\n\n[å‰ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³](#sec-color)ã§ã¯`geom_point(color = \"red\")`ã®ã‚ˆã†ã«ç·šå…¨ä½“ã«å¯¾ã—ã¦åŒã˜è‰²ã‚’ä»˜ã‘ã¾ã—ãŸãŒã€ä»Šå›ã®æ–¹æ³•ã§ã¯ã€è‰²ã‚’ä»˜ã‘ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦ã€`aes()`å†…ã®`color =`ã§æŒ‡å®šã—ãŸç¨®é¡ã”ã¨ã«è‰²ãŒä»˜ãã¨ã„ã†è¨­å®šã§ã™ã€‚\n\nã“ã‚Œã§ã¨ã‚Šã‚ãˆãšã¯ã©ã®ç‚¹ãŒã©ã®æœ¨ã®ã‚‚ã®ã‹ã‚ã‹ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\nä»Šã¯æ•£å¸ƒå›³ãªã®ã§è‰²ã‚’åˆ†ã‘ã‚‹ã ã‘ã§æ¸ˆã¿ã¾ã™ãŒã€æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã®ã‚ˆã†ãªå ´åˆã¯ã€è‰²ã ã‘ã§ãªãç·šã®ç¨®é¡ã‚’å¤‰ãˆãŸã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãã‚“ãªæ™‚ã¯æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Orange, aes(x = age, y = circumference, color = Tree, linetype = Tree)) + \n  geom_point() + \n  geom_line()\n```\n\n::: {.cell-output-display}\n![æŠ˜ã‚Œç·šã®ç¨®é¡ã‚‚åˆ†ã‹ã‚Œã¾ã—ãŸ](index_files/figure-html/fig-orange-linetype-1.png){#fig-orange-linetype}\n:::\n:::\n\n\n`linetype = Tree`ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ç·šã®ç¨®é¡ã‚‚æœ¨ã®ç¨®é¡ã”ã¨ã«å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚\n\nã“ã®ã‚ˆã†ã«`aes()`å†…ã§è¦ç´ ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ç¨®é¡ã”ã¨ã«åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nã¾ã è‰²é£ã„ãªã©ã¯ä¸æ ¼å¥½ã§ã™ãŒã€ã„ã£ãŸã‚“ã“ã®ã¾ã¾é€²ã‚ã¾ã™ã€‚\n\n### å‡¡ä¾‹ã®ä½ç½®\n\næ¬¡ã«ã—ãŸã„ã®ã¯ã€å‡¡ä¾‹ã®è¨­å®šã§ã™ã€‚å‡¡ä¾‹ã¯ç¾åœ¨å³å´ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ãŒã€ã¾ãšã¯ã“ã‚Œã‚’ä¸‹ã«è¡¨ç¤ºã—ãŸã„ã¨ã—ã¾ã™ã€‚\n\nã“ã‚Œã¯ã€`theme()`å†…ã®`legend.position`ã§è¨­å®šã§ãã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Orange, aes(x = age, y = circumference, color = Tree)) + \n  geom_point() + \n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![å‡¡ä¾‹ãŒä¸‹ã«æ¥ã¾ã—ãŸ](index_files/figure-html/fig-orange-legend-position-1.png){#fig-orange-legend-position}\n:::\n:::\n\n\n`theme(legend.position = \"bottom\")`ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€å‡¡ä¾‹ã®ä½ç½®ãŒä¸‹ã«ãªã‚Šã¾ã—ãŸã€‚ã‚‚ã¡ã‚ã‚“bottomä»¥å¤–ã«ã‚‚top, left, rightï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ãªã©ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nã•ã‚‰ã«å‡¡ä¾‹ã‚’æ¶ˆã—ãŸã„å ´åˆã¯æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Orange, aes(x = age, y = circumference, color = Tree)) + \n  geom_point() + \n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![å‡¡ä¾‹ã‚’æ¶ˆã—ã¾ã—ãŸ](index_files/figure-html/fig-orange-legend-delete-1.png){#fig-orange-legend-delete}\n:::\n:::\n\n\n`theme(legend.position = \"none\")`ã§å‡¡ä¾‹ã‚’æ¶ˆã™ã“ã¨ãŒã§ãã¾ã—ãŸã€‚\n\n### å‡¡ä¾‹ã®èª¿æ•´\n\nä¾‹ãˆã°ã€å‡¡ä¾‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã ã‘æ¶ˆã—ãŸã„å ´åˆãŒçµæ§‹ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚@fig-orange-color ã®ä¾‹ã§ã„ãˆã°ã€Treeã¨ã„ã†æ–‡å­—ã¯æ¶ˆã—ãŸã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚\n\nãã‚“ãªå ´åˆã¯ã€`guides()`ã‚’ä½¿ã„ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Orange, aes(x = age, y = circumference, color = Tree)) + \n  geom_point() + \n  guides(color = guide_legend(title = NULL))\n```\n\n::: {.cell-output-display}\n![å‡¡ä¾‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å‰Šé™¤](index_files/figure-html/fig-orange-legend-delte-title-1.png){#fig-orange-legend-delte-title}\n:::\n:::\n\n\nTreeã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ãŒæ¶ˆãˆã¾ã—ãŸã€‚\n\nã“ã“ã§ã¯`guides(color = guide_legend(title = NULL))`ã¨ã—ã¦ã„ã¾ã™ãŒã€`aes()`å†…ã§ä¾‹ãˆã°`linetype`ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ã€`guides()`å†…ã‚‚`linetype =`ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\n\n## ãƒ†ãƒ¼ãƒ\n\nggplotã§ã¯ãƒ†ãƒ¼ãƒã‚’é¸ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã“ã‚Œã¾ã§ã®å›³ã®ã‚ˆã†ã«èƒŒæ™¯ãŒã‚°ãƒ¬ãƒ¼ã«ãªã£ã¦ã„ã¾ã™ãŒã€ã»ã¨ã‚“ã©ã®å ´åˆã§èƒŒæ™¯ã¯ç™½ã«ã—ãŸã„ã§ã™ã‚ˆã­ã€‚\n\nèƒŒæ™¯ã ã‘ã§ãªãã€ç½«ç·šç­‰ã‚‚ãƒ†ãƒ¼ãƒã§å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\n### ãƒ—ãƒªã‚»ãƒƒãƒˆã®ãƒ†ãƒ¼ãƒ\n\nã„ãã¤ã‹ã®ãƒ†ãƒ¼ãƒãŒæº–å‚™ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»£è¡¨çš„ãªã‚‚ã®ã‚’ã„ãã¤ã‹ã”ç´¹ä»‹ã—ã¾ã™ã€‚\n\n::: panel-tabset\n## minimal\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![`theme_minimal()`](index_files/figure-html/fig-theme-minimal-1.png){#fig-theme-minimal}\n:::\n:::\n\n\n## bw\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme_bw()\n```\n\n::: {.cell-output-display}\n![`theme_bw()`](index_files/figure-html/fig-theme-bw-1.png){#fig-theme-bw}\n:::\n:::\n\n\n`theme_minimal()`ã¨æ¯”ã¹ã¦å¤–æ ãŒä»˜ã„ã¦ã„ã¾ã™ã€‚\n\n## classic\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme_classic()\n```\n\n::: {.cell-output-display}\n![`theme_classic()`](index_files/figure-html/fig-theme-classic-1.png){#fig-theme-classic}\n:::\n:::\n\n\n## linedraw\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme_linedraw()\n```\n\n::: {.cell-output-display}\n![`theme_linedraw()`](index_files/figure-html/fig-theme-linedraw-1.png){#fig-theme-linedraw}\n:::\n:::\n\n\n## light\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme_light()\n```\n\n::: {.cell-output-display}\n![`theme_light()`](index_files/figure-html/fig-theme-light-1.png){#fig-theme-light}\n:::\n:::\n\n\n## void\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme_void()\n```\n\n::: {.cell-output-display}\n![`theme_void()`](index_files/figure-html/fig-theme-void-1.png){#fig-theme-void}\n:::\n:::\n\n\nã•ã™ãŒã«ã‚„ã‚Šã™ãã§ã¯â€¦ã¨æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€GISã§åœ°å›³ã‚’å¯è¦–åŒ–ã™ã‚‹ã‚ˆã†ãªã¨ãã«é‡å®ã—ã¾ã™ã€‚\n:::\n\n### `theme()`é–¢æ•°\n\nã“ã“ã¾ã§ã”ç´¹ä»‹ã—ãŸã‚‚ã®ã®ä¸­ã§`theme()`ã‚’ä½¿ã£ãŸã‚‚ã®ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã—ãŸã€‚\n\nã“ã“ã§`theme()`**ã¯**`theme_xxx()`**ã®å¾Œã«ä½¿ã†**ã¨ã„ã†ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚\n\nã“ã‚Œã¯ã€`theme_xxx()`ãŒ`theme()`ã®è¨­å®šã‚’ä¸Šæ›¸ãã—ã¦ã—ã¾ã†ãŸã‚ã§ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme(axis.title = element_text(color = \"red\")) + \n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![å¤±æ•—ä¾‹](index_files/figure-html/fig-theme-miss-1.png){#fig-theme-miss}\n:::\n:::\n\n\n`theme(axis.title = element_text(color = \"red\"))`ã§è»¸ãƒ©ãƒ™ãƒ«ã‚’èµ¤è‰²ã«è¨­å®šã—ã¦ã„ã¾ã™ãŒã€å‡ºåŠ›ã•ã‚ŒãŸã‚‚ã®ã¯é»’ã„ãƒ©ãƒ™ãƒ«ã«ãªã£ã¦ã„ã¾ã™ã€‚\n\né †ç•ªã‚’é€†ã«ã™ã‚Œã°ã€\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme_minimal() + \n  theme(axis.title = element_text(color = \"red\"))\n```\n\n::: {.cell-output-display}\n![æ­£ã—ã„ä¾‹](index_files/figure-html/fig-theme-success-1.png){#fig-theme-success}\n:::\n:::\n\n\nã“ã®ã‚ˆã†ã«ã—ã£ã‹ã‚Šåæ˜ ã•ã‚Œã¾ã™ã€‚\n\n`theme()`ã¯`theme_xxx()`ã§è¨­å®šã§ããªã„éƒ¨åˆ†ã‚’ç´°ã‹ãèª¿æ•´ã—ãŸã„å ´åˆã«ä½¿ã„ã¾ã™ã€‚ã§ãã‚‹ã“ã¨ã¯ãŸãã•ã‚“ã‚ã‚‹ã®ã§å…¨ã¦ã‚’èª¬æ˜ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ãŒã€ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ãŒã§ãã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme_minimal() + \n  theme(\n    panel.grid = element_blank(), \n    legend.position = \"none\", \n    axis.title = element_text(family = \"Times New Roman\", size = 18), \n    axis.text = element_text(family = \"Times New Roman\", size = 14)\n  )\n```\n\n::: {.cell-output-display}\n![ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ¼ãƒ](index_files/figure-html/fig-theme-custom-1.png){#fig-theme-custom}\n:::\n:::\n\n\n1.  `panel.grid = element_blank()`ã§ç½«ç·šã‚’æ¶ˆã™\n2.  `legend.position = \"none\"`ã§å‡¡ä¾‹ã‚’æ¶ˆã™\n3.  `axis.title`ã¨`axis.text`ã§è»¸ãƒ©ãƒ™ãƒ«ã¨ç›®ç››ã‚Šã®ãƒ•ã‚©ãƒ³ãƒˆã¨ã‚µã‚¤ã‚ºã‚’å¤‰æ›´\n\nã“ã®ã‚ˆã†ã«ã€ã€Œã‚°ãƒ©ãƒ•ã®ã“ã“ã‚’å¤‰ãˆãŸã„ã‚“ã ã‘ã©ãªãâ€¦ã€ã¿ãŸã„ãªã“ã¨ã¯`theme()`ã§è§£æ±ºã§ãã‚‹ã“ã¨ãŒå¤šã‹ã£ãŸã‚Šã—ã¾ã™ã€‚\n\nè©³ã—ãã¯`?theme`ã§ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚å¼•æ•°åã¯ã‚ã‹ã‚Šã‚„ã™ã„ã®ã§ã€æ¯”è¼ƒçš„ç›®çš„ã‚’è¦‹ã¤ã‘ã‚„ã™ã„ã¨æ€ã„ã¾ã™ã€‚\n\n## æ–°ã—ããªã£ãŸ`theme()`ã®è¨­å®š\n\n### `paper`ã¨`ink`\n\nggplot2ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³4.0.0ã‹ã‚‰ã¯ã€`theme_xxx()`å†…ã§è‰²ã«é–¢ã™ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãŒè¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\nç™¾èã¯ä¸€è¦‹ã«å¦‚ã‹ãšã¨ã„ã†ã“ã¨ã§ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ã”è¦§ãã ã•ã„ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme_minimal(paper = \"papayawhip\", ink = \"darkgreen\")\n```\n\n::: {.cell-output-display}\n![theme()å†…ã§ã®è‰²ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š](index_files/figure-html/fig-theme-v4-1.png){#fig-theme-v4}\n:::\n:::\n\n\n`paper`ã§èƒŒæ™¯è‰²ã€`ink`ã§å‰æ™¯è‰²ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å‰æ™¯è‰²ã¯ã€è»¸ãƒ©ãƒ™ãƒ«ã€ç›®ç››ã‚Šã€ç‚¹ãªã©ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚\n\nã“ã“ã®ãƒã‚¤ãƒ³ãƒˆã¯ã€ä½¿ç”¨ã™ã‚‹è‰²ã‚’çµ±ä¸€çš„ã«æŒ‡å®šã§ãã‚‹ã¨ã„ã†ã“ã¨ã§ã€ä¾‹ãˆã°`theme()`å†…ã§`axis.title`ã‚„`axis.text`ã®è‰²ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚\n\n### `geom`\n\nã¾ãŸã€`theme()`å†…ã§`geom`ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€è‰²ã«é–¢ã™ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’è¨­å®šã—ã¤ã¤`geom_xxx()`å†…ã§ãã®è¨­å®šã‚’å‚ç…§ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + \n  geom_point() + \n  theme_minimal(paper = \"papayawhip\", ink = \"darkgreen\") + \n  theme(\n    geom = element_geom(color = \"coral\", pointsize = 3)\n  )\n```\n\n::: {.cell-output-display}\n![geomå†…ã§ã®è‰²ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š](index_files/figure-html/fig-theme-v4-geom-1.png){#fig-theme-v4-geom}\n:::\n:::\n\n\nã“ã“ã§ã¯ã€`theme(geom = element_geom(color = \"coral\", pointsize = 3))`ã§ç‚¹ã®è‰²ã¨å¤§ãã•ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚`element_geom()`ã¯`geom_point()`ã€`geom_line()`ã€`geom_bar()`ãªã©ã§å…±é€šã—ã¦ä½¿ã‚ã‚Œã‚‹è¨­å®šã‚’æŒ‡å®šã§ãã¾ã™ã€‚ä¸€å…ƒç®¡ç†ã§ãã‚‹ç‚¹ãŒä¾¿åˆ©ã§ã™ã­ã€‚\n\nã¡ãªã¿ã«`geom`ã‚’è¨­å®šã—ãªã„ã¨ã€ç‚¹ã®è‰²ã¯`ink`ã®è‰²ã€ã™ãªã‚ã¡darkgreenã«ãªã‚Šã¾ã™ã€‚\n\n### `from_theme()`\n\nã•ã‚‰ã«ã€`geom_xxx()`å†…ã§`from_theme()`ã‚’ä½¿ã†ã“ã¨ã«ã‚ˆã‚Šã€`theme()`å†…ã§è¨­å®šã—ãŸè‰²ã‚’`geom_xxx()`å†…ã§å‚ç…§ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\np <- ggplot(iris, aes(Sepal.Length, Sepal.Width)) +\n  geom_point(aes(color = from_theme(accent))) +\n  theme_minimal()\n\np + theme(geom = element_geom(accent = \"blue\"))\np + theme(geom = element_geom(accent = \"orange\"))\n```\n\n::: {.cell-output-display}\n![ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã‚’é’ã«](index_files/figure-html/fig-theme-v4-from_theme-1.png){#fig-theme-v4-from_theme-1}\n:::\n\n::: {.cell-output-display}\n![ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã‚’ã‚ªãƒ¬ãƒ³ã‚¸ã«](index_files/figure-html/fig-theme-v4-from_theme-2.png){#fig-theme-v4-from_theme-2}\n:::\n:::\n\n\nã“ã“ã§ã¯ã€`from_theme(accent)`ã§`theme()`å†…ã§è¨­å®šã—ãŸ`accent`ã‚’å‚ç…§ã—ã¦ã„ã¾ã™ã€‚`theme(geom = element_geom(accent = \"blue\"))`ã®ã‚ˆã†ã«è¨­å®šã™ã‚‹ã“ã¨ã§ã€ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã‚’é’ã«å¤‰æ›´ã§ãã¾ã™ã€‚\n\nã“ã‚Œã¯`element_geom(color = \"blue\")`ã¨ä¸€è¦‹åŒã˜ã“ã¨ã‚’ã—ã¦ã„ã‚‹ã‚ˆã†ã«æ€ãˆã¾ã™ãŒã€ãŸãã•ã‚“ã®ãƒ—ãƒ­ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹å ´åˆã€`accent`ã‚’ä¸€æ‹¬ã§å¤‰æ›´ã§ãã‚‹ç‚¹ã§ä¾¿åˆ©ã§ã™ã€‚\n\n#### ä½¿ç”¨ä¾‹\n\n-   ã‚±ãƒ¼ã‚¹ï¼š\n    -   è«–æ–‡åŸ·ç­†ã‚’ã—ã¦ãŠã‚Šã€è«–æ–‡ç”¨ã¨ã‚¹ãƒ©ã‚¤ãƒ‰ç”¨ã§è‰²ã‚’å¤‰ãˆãŸã„\n    -   `geom_point()`ã¨`geom_smooth()`ã‚’ä½¿ã£ã¦ãŠã‚Šã€`geom_smooth()`ã®è‰²ã¯è«–æ–‡ç”¨ã¨ã‚¹ãƒ©ã‚¤ãƒ‰ç”¨ã§å¤‰ãˆãŸã„\n-   è§£æ±ºç­–ï¼š\n-   ãƒ†ãƒ¼ãƒå´ã§ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã‚’å®šç¾©\n-   `geom_line()`ã®ã¿`from_theme(accent)`ã‚’å‚ç…§ã•ã›ã‚‹\n-   ã“ã†ã™ã‚‹ã¨ãƒ—ãƒ­ãƒƒãƒˆã®æœ¬ä½“ã‚³ãƒ¼ãƒ‰ã¯å…±é€šã®ã¾ã¾ã€ãƒ†ãƒ¼ãƒã‚’å·®ã—æ›¿ãˆã‚‹ã ã‘ã§ç·šã®è‰²ã ã‘åˆ‡ã‚Šæ›¿ã‚ã‚‹\n\nã¾ãšã€ã‚ã‚‰ã‹ã˜ã‚ãƒ†ãƒ¼ãƒã‚’2ã¤ç”¨æ„ã—ã¦ãŠãã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# è«–æ–‡ç”¨ã®ãƒ†ãƒ¼ãƒ\ntheme_paper <- theme_minimal(paper = \"white\",  ink = \"black\") + \n  theme(geom = element_geom(accent = \"navy\"))\n\n# ã‚¹ãƒ©ã‚¤ãƒ‰ç”¨ã®ãƒ†ãƒ¼ãƒ\ntheme_slide <- theme_minimal(paper = \"black\",  ink = \"white\") + \n  theme(geom = element_geom(accent = \"orange\"))\n```\n:::\n\n\næ¬¡ã«ã€ãƒ†ãƒ¼ãƒã‚’é™¤ããƒ—ãƒ­ãƒƒãƒˆæœ¬ä½“ã‚’ä½œæˆã—ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\np <- ggplot(Orange, aes(age, circumference)) + \n  # æ•£å¸ƒå›³ã¯ç°è‰²ã§å›ºå®š\n  geom_point(color = \"gray60\", size = 2) + \n  geom_smooth(aes(color = from_theme(accent)), \n              method = lm, se = FALSE, size = 1) + \n  labs(x = \"Age (days)\", y = \"Circumference (mm)\")\n```\n:::\n\n\nã“ã®æ™‚ç‚¹ã§`p`ã‚’ãƒ—ãƒ­ãƒƒãƒˆã—ã¦ã‚‚ã€æŠ˜ã‚Œç·šã®è‰²ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ã `theme()`ã‚’ä»˜ã‘ã¦ãŠã‚‰ãšã€ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„ãŸã‚ã§ã™ã€‚\n\nãã‚Œã§ã¯å…ˆã«è¨­å®šã—ãŸãƒ†ãƒ¼ãƒã‚’`p`ã«é©ç”¨ã—ã¾ã™ã€‚\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\np_paper  <- p + theme_paper\np_slide  <- p + theme_slide\n\np_paper\np_slide\n```\n\n::: {.cell-output-display}\n![è«–æ–‡ç”¨ã®ãƒ†ãƒ¼ãƒ](index_files/figure-html/fig-theme-final-1.png){#fig-theme-final-1}\n:::\n\n::: {.cell-output-display}\n![ã‚¹ãƒ©ã‚¤ãƒ‰ç”¨ã®ãƒ†ãƒ¼ãƒ](index_files/figure-html/fig-theme-final-2.png){#fig-theme-final-2}\n:::\n:::\n\n\nä»Šå›ã¯1ç¨®é¡ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’è«–æ–‡ç”¨ã¨ã‚¹ãƒ©ã‚¤ãƒ‰ç”¨ã«åˆ†ã‘ã‚‹æƒ³å®šã—ã‹ã—ã¦ã„ã¾ã›ã‚“ãŒã€ãŸãã•ã‚“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ä½œã‚‹å ´åˆã€ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã‚’ä¸€æ‹¬ã§å¤‰ãˆã‚‰ã‚Œã‚‹ç‚¹ã§ä¾¿åˆ©ã§ã™ã€‚ã‚³ãƒ¼ãƒ‰ã¯ãã®ã¾ã¾ã«ã€`tmeme_paper`ã¨`theme_slide`ã®`accent`ã ã‘å¤‰ãˆã‚Œã°ã‚ˆã„ã‹ã‚‰ã§ã™ã€‚\n\n## æ–°ã—ããªã£ãŸãƒ©ãƒ™ãƒ«è¨­å®š\n\nã“ã“ã¾ã§ã¯`labs()`ã‚„`xlab()`ã€`ylab()`ã§è»¸ãƒ©ãƒ™ãƒ«ã‚’è¨­å®šã—ã¦ãã¾ã—ãŸãŒã€ã‚ã‚‰ã‹ã˜ã‚ãƒ©ãƒ™ãƒ«ã‚’è¨­å®šã—ã¦ãŠãã€è‡ªå‹•ã§è¡¨ç¤ºã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚\n\n`Orange`ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ã£ã¦èª¬æ˜ã—ã¾ã™ã€‚\n\nã¾ãšã€ä½•ã‚‚ã—ãªã„å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Orange, aes(x = age, y = circumference)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ©ãƒ™ãƒ«](index_files/figure-html/fig-label-default-1.png){#fig-label-default}\n:::\n:::\n\n\nXè»¸ã¯`age`ã€Yè»¸ã¯`circumference`ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚\n\nã“ã‚Œã‚’ã€ã‚ã‚‰ã‹ã˜ã‚ãƒ©ãƒ™ãƒ«ã‚’è¨­å®šã—ã¦ãŠãã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tibble)\n\n# tibbleã¯å±æ€§ã‚’ä¿æŒã—ã‚„ã™ã„\ndf <- as_tibble(Orange)\n\n# å˜ä½: age=days, circumference=mm\nattr(df$age, \"label\") <- \"Age (days)\"\nattr(df$circumference, \"label\") <- \"Trunk circumference (mm)\"\n```\n:::\n\n\n-   `attr()`ã§å¤‰æ•°ã«å±æ€§ã‚’è¿½åŠ \n    -   `df`ã®`age`ã®`label`å±æ€§ã«`Age (days)`ã‚’è¿½åŠ ã—ã¦ã„ã‚‹ã€ã¨ã„ã†è§£é‡ˆã§ã™ã€‚\n    -   `Age (days)`ã‚„`Trunk circumference (mm)`ã®éƒ¨åˆ†ãŒãƒ©ãƒ™ãƒ«ãªã®ã§ã“ã“ã‚’è‡ªç”±ã«å¤‰æ›´ã§ãã¾ã™ã€‚\n\nã“ã‚Œã§`df`ã‚’ä½¿ã£ã¦ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã¨ã€\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df, aes(x = age, y = circumference)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![ã‚«ã‚¹ã‚¿ãƒ ãƒ©ãƒ™ãƒ«](index_files/figure-html/fig-label-custom-1.png){#fig-label-custom}\n:::\n:::\n\n\n`labs()`ã‚’ä½¿ã‚ãªãã¦ã‚‚ã€Xè»¸ã¨Yè»¸ã®ãƒ©ãƒ™ãƒ«ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚\n\n1ã¤ã®ã‚°ãƒ©ãƒ•ã§ã‚ã‚Œã°`labs()`ã§è¨­å®šã—ãŸæ–¹ãŒåŠ´åŠ›ãŒå°‘ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å¤§é‡ã®ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã™ã‚‹å ´åˆã€ã‚ã‚‰ã‹ã˜ã‚ãƒ©ãƒ™ãƒ«ã‚’è¨­å®šã—ã¦ãŠã‘ã°ã€`labs()`ã‚’ã„ã¡ã„ã¡æ›¸ãå¿…è¦ãŒãªããªã‚‹ã®ã§ä¾¿åˆ©ã§ã™ã€‚\n\n::: callout-note\n## tibbleå½¢å¼ã«ã¤ã„ã¦\n\nçš†ã•ã‚“ã¯CSVãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ã¨ãã€ä½•ã®é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ\n\nå¤šã„ã®ã¯base Rã®`read.csv()`ã‚„ã€tidyverseã«å«ã¾ã‚Œã‚‹readrãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®`read_csv()`ã ã¨æ€ã„ã¾ã™ã€‚\n\n`read.csv()`ã¯data.frameå½¢å¼ã€`read_csv()`ã¯tibbleå½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚**tibbleã¯data.frameã‚’æ”¹è‰¯ã—ãŸãƒ‡ãƒ¼ã‚¿æ§‹é€ **ã§ã€tidyverseã®å¤šãã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§æ¨™æº–çš„ã«ä½¿ã‚ã‚Œã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚\n\n-   è¦‹ã‚„ã™ã„è¡¨ç¤º ã™ã¹ã¦ã®è¡Œã‚’å‡ºã•ãšã€å¿…è¦ã«å¿œã˜ã¦ç«¯ã ã‘ã‚’è¡¨ç¤ºã™ã‚‹ã®ã§ã€ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ã‚’æŠŠæ¡ã—ã‚„ã™ã„ã§ã™ã€‚\n-   å‹æƒ…å ±ã‚’ä¿æŒ å„åˆ—ã®ãƒ‡ãƒ¼ã‚¿å‹ï¼ˆæ•°å€¤ãƒ»æ–‡å­—åˆ—ãªã©ï¼‰ãŒä¸€ç·’ã«è¡¨ç¤ºã•ã‚Œã€è§£ææ™‚ã«ä¾¿åˆ©ã§ã™ã€‚\n-   å±æ€§ã‚’ä¿æŒ labelã®ã‚ˆã†ãªå±æ€§ãŒå‡¦ç†ä¸­ã«æ¶ˆãˆã«ããã€ãƒ©ãƒ™ãƒ«ç®¡ç†ã‚„å¯è¦–åŒ–ã¨ã®ç›¸æ€§ãŒè‰¯ã„ã§ã™ã€‚\n\ntibbleã¯data.frameã¨ã»ã¼åŒã˜ã‚ˆã†ã«ä½¿ãˆã‚‹ã®ã§ã€tidyverseã‚’ä½¿ã†å ´åˆã¯tibbleå½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚å›°ã£ãŸã‚‰`tibble::as_tibble()`ã§å¤‰æ›ã§ãã¾ã™ã€‚\n:::\n\n## ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ\n\nggplot2ã§ã¯ã€é€£ç¶šå€¤ã‚„ã‚«ãƒ†ã‚´ãƒªå€¤ã‚’è‰²ã§è¡¨ç¾ã™ã‚‹éš›ã«ã€Œã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆã€ã‚’ä½¿ã„ã¾ã™ã€‚\n\nä¾‹ãˆã°`scale_colour_brewer()`ã‚„`scale_fill_viridis_c()`ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãƒ‡ãƒ¼ã‚¿ã®å€¤ã«å¿œã˜ã¦è‡ªå‹•çš„ã«ä¸€è²«ã—ãŸé…è‰²ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™ã€‚\n\nãƒ‘ãƒ¬ãƒƒãƒˆã‚’é¸ã¶ã“ã¨ã§ã€è¦‹ã‚„ã™ã•ã‚„é…è‰²ã®æ„å‘³ï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œã‚„è«–æ–‡ç”¨ã®ç™½é»’å°åˆ·ãªã©ï¼‰ã‚’èª¿æ•´ã§ãã€ã‚°ãƒ©ãƒ•ã®ç†è§£åº¦ã‚„å°è±¡ã«å¤§ããå½±éŸ¿ã—ã¾ã™ã€‚\n\n### é€£ç¶šå€¤ã®ã‚«ãƒ©ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«\n\nã¾ãšã¯ä¾‹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width,\n                 colour = Petal.Length)) + \n  geom_point(size = 2) + \n  scale_colour_continuous() + \n  labs(colour = \"Petal length\")\n```\n\n::: {.cell-output-display}\n![scale_colour_continuous()ã‚’ä½¿ã£ãŸä¾‹](index_files/figure-html/fig-color-default-1.png){#fig-color-default}\n:::\n:::\n\n\n`scale_colour_continuous()`ã¯é€£ç¶šå¤‰æ•°ã‚’è‰²ã§è¡¨ã™ãŸã‚ã®ã‚«ãƒ©ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®é…è‰²ãŒä½¿ã‚ã‚Œã€æ•°å€¤ã®å¤§å°ã‚’ãªã‚ã‚‰ã‹ãªã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§ç¤ºã—ã¦ã„ã¾ã™ã€‚\n\nè‡ªåˆ†ã§è‰²ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(Sepal.Length, Sepal.Width, colour = Petal.Length)) + \n  geom_point(size = 2) + \n  scale_colour_continuous(low = \"blue\", high = \"red\") + \n  labs(colour = \"Petal length\")\n\nggplot(iris, aes(Sepal.Length, Sepal.Width, colour = Petal.Length)) + \n  geom_point(size = 2) + \n  scale_colour_continuous(palette = c(\"#FEE0D2\", \"#FC9272\", \"#DE2D26\")) + \n  labs(colour = \"Petal length\")\n```\n\n::: {.cell-output-display}\n![å·¦: é’ã‹ã‚‰èµ¤ã¸ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³](index_files/figure-html/fig-color-continuous-custom-1.png){#fig-color-continuous-custom-1}\n:::\n\n::: {.cell-output-display}\n![å³: æŒ‡å®šã—ãŸ3è‰²ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³](index_files/figure-html/fig-color-continuous-custom-2.png){#fig-color-continuous-custom-2}\n:::\n:::\n\n\nlowã‹ã‚‰highã¾ã§ã®2è‰²ã‚’æŒ‡å®šã™ã‚‹æ–¹æ³•ã‚„ã€è‡ªåˆ†ã§3è‰²ä»¥ä¸Šã‚’æŒ‡å®šã™ã‚‹æ–¹æ³•ãªã©ãŒã‚ã‚Šã¾ã™ã€‚\n\nã¾ãŸã€ä»–ã®ä¾‹ã¨ã—ã¦`scale_colour_viridis_c()`ã‚’ä½¿ã†æ–¹æ³•ã‚‚ã‚ã£ãŸã‚Šã—ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(Sepal.Length, Sepal.Width, colour = Petal.Length)) + \n  geom_point(size = 2) + \n  scale_colour_viridis_c(option = \"plasma\") + \n  labs(colour = \"Petal length\")\n```\n\n::: {.cell-output-display}\n![scale_colour_viridis_c()ã‚’ä½¿ã£ãŸä¾‹](index_files/figure-html/fig-color-viridis-1.png){#fig-color-viridis}\n:::\n:::\n\n\n`scale_colour_viridis_c()`ã¯é€£ç¶šå¤‰æ•°ã‚’è‰²ã§è¡¨ã™ãŸã‚ã®ã‚«ãƒ©ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«ã§ã€è¦–èªæ€§ãƒ»è‰²è¦šãƒãƒªã‚¢ãƒ•ãƒªãƒ¼ãƒ»ç™½é»’å°åˆ·å¯¾å¿œã«å„ªã‚ŒãŸviridisãƒ‘ãƒ¬ãƒƒãƒˆã‚’ä½¿ã„ã¾ã™ã€‚`plasma`ä»¥å¤–ã«ã‚‚`magma`ã‚„`inferno`ã€`cividis`ãªã©ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚\n\n### ã‚«ãƒ†ã‚´ãƒªå€¤ã®ã‚«ãƒ©ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«\n\nã‚«ãƒ†ã‚´ãƒªå¤‰æ•°ã‚’è‰²ã§è¡¨ã™å ´åˆã¯ã€`scale_colour_brewer()`ã‚„`scale_colour_viridis_d()`ãªã©ã‚’ä½¿ã„ã¾ã™[^2]ã€‚\n\n[^2]: ã¡ãªã¿ã«`scale_colour_viridis`ã®`c`ã®æ–¹ã¯continuousã§ã€`d`ã®æ–¹ã¯discreteã§ã™ã­ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(Sepal.Length, Sepal.Width, colour = Species)) + \n  geom_point(size = 2) + \n  scale_colour_brewer(palette = \"Set1\") + \n  labs(colour = \"Species\")\n```\n\n::: {.cell-output-display}\n![scale_colour_brewer()ã‚’ä½¿ã£ãŸä¾‹](index_files/figure-html/fig-color-brewer-1.png){#fig-color-brewer}\n:::\n:::\n\n\n`scale_colour_brewer()`ã®`palette`ã«ã¯`Set1`ã€`Set2`ã€`Dark2`ã€`Paired`ãªã©ã®ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆãŒã‚ã‚Šã€ç”¨é€”ã«å¿œã˜ã¦é¸æŠã§ãã¾ã™ã€‚\n\nã¾ãŸã€`scale_colour_discrete()`ã‚’ä½¿ã†æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(Sepal.Length, Sepal.Width, colour = Species)) + \n  geom_point(size = 2) + \n  scale_colour_discrete() + \n  labs(colour = \"Species\")\n```\n\n::: {.cell-output-display}\n![scale_colour_discrete()ã‚’ä½¿ã£ãŸä¾‹](index_files/figure-html/fig-color-discrete-1.png){#fig-color-discrete}\n:::\n:::\n\n\nãªã‚“ã¨ã„ã†ã‹ã€ã“ã‚Œãggplot2ï¼ã¨ã„ã†æ„Ÿã˜ã®é…è‰²ã§ã™ã­ã€‚ã‚‚ã¡ã‚ã‚“è‰²ã‚’è‡ªåˆ†ã§æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(Sepal.Length, Sepal.Width, colour = Species)) + \n  geom_point(size = 2) + \n  scale_colour_manual(values = c(\"darkred\", \"darkblue\", \"darkgreen\")) + \n  labs(colour = \"Species\")\n```\n\n::: {.cell-output-display}\n![æŒ‡å®šã—ãŸ3è‰²](index_files/figure-html/fig-color-discrete-custom-1.png){#fig-color-discrete-custom}\n:::\n:::\n\n\nã•ã‚‰ã«ã€`scale_colour_viridis_d()`ã ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(Sepal.Length, Sepal.Width, colour = Species)) + \n  geom_point(size = 2) + \n  scale_colour_viridis_d(option = \"plasma\") + \n  labs(colour = \"Species\")\n```\n\n::: {.cell-output-display}\n![scale_colour_viridis_d()ã‚’ä½¿ã£ãŸä¾‹](index_files/figure-html/fig-color-viridis-d-1.png){#fig-color-viridis-d}\n:::\n:::\n\n\nä»Šå›ã¯SpeciesãŒã‚«ãƒ†ã‚´ãƒªå¤‰æ•°ãªã®ã§ã€å…ˆã»ã©ã®`scale_colour_viridis_c()`ã‚ˆã‚Šã‚‚`scale_colour_viridis_d()`ã®æ–¹ãŒé©ã—ã¦ã„ã‚‹ã¨è¨€ãˆã¾ã™ã­ã€‚\n\nä»Šå›ã¯ä»£è¡¨çš„ãªã‚«ãƒ©ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«ã‚’ã”ç´¹ä»‹ã—ã¾ã—ãŸãŒã€ä»–ã«ã‚‚ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆã¯ãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚ä»Šå›ã¯å…¥é–€ç·¨ã¨ã„ã†ã“ã¨ã§ã“ã®ã‚ãŸã‚Šã«ã—ã¦ãŠãã¾ã™ãŒã€ã„ã‚ã„ã‚ç´¹ä»‹ã—ã¦ãã‚Œã¦ã„ã‚‹ãƒšãƒ¼ã‚¸ã¯ã‚ã‚‹ã®ã§ã€ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ã—ã¦ã¿ã¦ãã ã•ã„ã€‚\n\n::: {.callout-tip appearance=\"minimal\"}\n[The R Graph Gallery](https://r-graph-gallery.com/)\n:::\n\n## ã„ã‚ã„ã‚å«ã‚ãŸã‚°ãƒ©ãƒ•ã‚’ä½œã£ã¦ã¿ã‚‹\n\nã§ã¯ã“ã“ã§ã€ã“ã‚Œã¾ã§ã®å†…å®¹ã‚’è¸ã¾ãˆã¦ã€æ–°ã—ã„ãƒ—ãƒ­ãƒƒãƒˆã‚’ä½œã£ã¦ã¿ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã¯ã“ã‚Œã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹`mpg`ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ã„ã¾ã™ã€‚\n\n\n::: {#fig-complex-plot .cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\ndf <- as_tibble(diamonds)\n\nattr(df$cut, \"label\") <- \"Cut\"\nattr(df$price, \"label\") <- \"Price (USD)\"\nattr(df$carat, \"label\") <- \"Carat\"\n\ntheme_use <- theme_minimal(paper = \"gray98\", ink = \"navy\") + \n  theme(\n    geom = element_geom(accent = \"purple\", paper = \"pink\", \n                        pointsize = 2, borderwidth = 1), \n    axis.title = element_text(family = \"Times New Roman\", size = 16), \n    axis.text = element_text(family = \"Times New Roman\", size = 12), \n    legend.title = element_text(family = \"Times New Roman\"), \n    legend.text = element_text(family = \"Times New Roman\")\n  )\n\nggplot(df, aes(cut, price)) +\n  geom_violin(aes(color = from_theme(accent))) + \n  theme_minimal(paper = \"gray98\", ink = \"navy\") + \n  theme_use\n\nggplot(df, aes(carat, price, color = cut)) + \n  geom_point() + \n  annotate(\"text\", label = \"Fair < Good < Very Good < Premium < Ideal\", \n           x = 3.4, y = 2500, family = \"Times New Roman\") + \n  scale_color_viridis_d(option = \"plasma\") + \n  guides(color = guide_legend(reverse = TRUE)) + \n  theme_use\n```\n\n::: {.cell-output-display}\n![ã‚«ãƒƒãƒˆã¨ä¾¡æ ¼ã®é–¢ä¿‚](index_files/figure-html/fig-complex-plot-1.png){#fig-complex-plot-1}\n:::\n\n::: {.cell-output-display}\n![ã‚«ãƒ©ãƒƒãƒˆã¨ä¾¡æ ¼ã®é–¢ä¿‚](index_files/figure-html/fig-complex-plot-2.png){#fig-complex-plot-2}\n:::\n\nä½œã£ã¦ã¿ã¾ã—ãŸ\n:::\n\n\n\n## ç™ºå±•ï¼š`ggrepel`\n\nã“ã“ã‹ã‚‰ã¯ã€`ggrepel`ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç”¨ã„ã¦æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã‚’ç™ºå±•ã•ã›ãŸä¾‹ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚ã“ã“ã‹ã‚‰ã¯ã ã„ã¶ã‚„ã‚„ã“ã—ã„ã®ã§ã€å‡ºæ¥ä¸ŠãŒã£ãŸã‚°ãƒ©ãƒ•ã‚’è¦‹ã¦ã€å¿…è¦æ€§ã‚’æ„Ÿã˜ã¦ã„ãŸã ã‘ãŸã‚‰ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è§£ã„ã¦ã‚‚ã‚‰ãˆã‚Œã°ã¨æ€ã„ã¾ã™ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n# pak::pak(\"ggrepel\")\nlibrary(ggrepel)\n```\n:::\n\n\nã¾ãšã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚`firm_id`ã¯30ã¾ã§ã‚ã‚Šã¾ã™ã€‚\n\n\n::: {#tbl-data-prep .cell tbl-cap='ãƒ‡ãƒ¼ã‚¿ã®ä¸€éƒ¨'}\n::: {.cell-output-display}\n\n```{=html}\n<!-- preamble start -->\n\n    <script>\n\n      function styleCell_er2p54f3anlfh2ugjmt1(i, j, css_id) {\n          var table = document.getElementById(\"tinytable_er2p54f3anlfh2ugjmt1\");\n          var cell = table.querySelector(`[data-row=\"${i}\"][data-col=\"${j}\"]`);\n          if (cell) {\n              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);\n              cell.classList.add(css_id);\n          } else {\n              console.warn(`Cell at (${i}, ${j}) not found.`);\n          }\n      }\n      function spanCell_er2p54f3anlfh2ugjmt1(i, j, rowspan, colspan) {\n        var table = document.getElementById(\"tinytable_er2p54f3anlfh2ugjmt1\");\n        const targetCell = table.querySelector(`[data-row=\"${i}\"][data-col=\"${j}\"]`);\n        if (!targetCell) {\n          console.warn(`Cell at (${i}, ${j}) not found.`);\n        }\n\n        // Get all cells that need to be removed\n        const cellsToRemove = [];\n        for (let r = 0; r < rowspan; r++) {\n          for (let c = 0; c < colspan; c++) {\n            if (r === 0 && c === 0) continue; // Skip the target cell\n            const cell = table.querySelector(`[data-row=\"${i + r}\"][data-col=\"${j + c}\"]`);\n            if (cell) {\n              cellsToRemove.push(cell);\n            }\n          }\n        }\n\n        // Remove all cells\n        cellsToRemove.forEach(cell => cell.remove());\n\n        // Set rowspan and colspan of the target cell if it exists\n        if (targetCell) {\n          targetCell.rowSpan = rowspan;\n          targetCell.colSpan = colspan;\n        }\n      }\n      // tinytable span after\n      window.addEventListener('load', function () {\n          var cellsToStyle = [\n            // tinytable style arrays after\n          { positions: [ { i: '6', j: 0 }, { i: '6', j: 1 }, { i: '6', j: 2 }, { i: '6', j: 3 }, { i: '6', j: 4 }, { i: '6', j: 5 },  ], css_id: 'tinytable_css_m80ohasp5y8faa7rn91t',}, \n          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 }, { i: '0', j: 5 },  ], css_id: 'tinytable_css_lh87ju35914i9kw42kj6',}, \n          ];\n\n          // Loop over the arrays to style the cells\n          cellsToStyle.forEach(function (group) {\n              group.positions.forEach(function (cell) {\n                  styleCell_er2p54f3anlfh2ugjmt1(cell.i, cell.j, group.css_id);\n              });\n          });\n      });\n    </script>\n\n    <style>\n      /* tinytable css entries after */\n      .table td.tinytable_css_m80ohasp5y8faa7rn91t, .table th.tinytable_css_m80ohasp5y8faa7rn91t { border-bottom: solid #d3d8dc 0.1em; }\n      .table td.tinytable_css_lh87ju35914i9kw42kj6, .table th.tinytable_css_lh87ju35914i9kw42kj6 { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }\n    </style>\n    <div class=\"container\">\n      <table class=\"table table-borderless\" id=\"tinytable_er2p54f3anlfh2ugjmt1\" style=\"width: auto; margin-left: auto; margin-right: auto;\" data-quarto-disable-processing='true'>\n        <thead>\n        \n              <tr>\n                <th scope=\"col\" data-row=\"0\" data-col=\"0\">firm_id</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"1\">state_id</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"2\">year</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"3\">treated_1998</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"4\">is_treated</th>\n                <th scope=\"col\" data-row=\"0\" data-col=\"5\">y</th>\n              </tr>\n        </thead>\n        \n        <tbody>\n                <tr>\n                  <td data-row=\"1\" data-col=\"0\">1</td>\n                  <td data-row=\"1\" data-col=\"1\">50</td>\n                  <td data-row=\"1\" data-col=\"2\">1980</td>\n                  <td data-row=\"1\" data-col=\"3\">0</td>\n                  <td data-row=\"1\" data-col=\"4\">0</td>\n                  <td data-row=\"1\" data-col=\"5\">0.6546029</td>\n                </tr>\n                <tr>\n                  <td data-row=\"2\" data-col=\"0\">1</td>\n                  <td data-row=\"2\" data-col=\"1\">50</td>\n                  <td data-row=\"2\" data-col=\"2\">1981</td>\n                  <td data-row=\"2\" data-col=\"3\">0</td>\n                  <td data-row=\"2\" data-col=\"4\">0</td>\n                  <td data-row=\"2\" data-col=\"5\">1.9160271</td>\n                </tr>\n                <tr>\n                  <td data-row=\"3\" data-col=\"0\">1</td>\n                  <td data-row=\"3\" data-col=\"1\">50</td>\n                  <td data-row=\"3\" data-col=\"2\">1982</td>\n                  <td data-row=\"3\" data-col=\"3\">0</td>\n                  <td data-row=\"3\" data-col=\"4\">0</td>\n                  <td data-row=\"3\" data-col=\"5\">2.1400894</td>\n                </tr>\n                <tr>\n                  <td data-row=\"4\" data-col=\"0\">1</td>\n                  <td data-row=\"4\" data-col=\"1\">50</td>\n                  <td data-row=\"4\" data-col=\"2\">1983</td>\n                  <td data-row=\"4\" data-col=\"3\">0</td>\n                  <td data-row=\"4\" data-col=\"4\">0</td>\n                  <td data-row=\"4\" data-col=\"5\">1.8364579</td>\n                </tr>\n                <tr>\n                  <td data-row=\"5\" data-col=\"0\">1</td>\n                  <td data-row=\"5\" data-col=\"1\">50</td>\n                  <td data-row=\"5\" data-col=\"2\">1984</td>\n                  <td data-row=\"5\" data-col=\"3\">0</td>\n                  <td data-row=\"5\" data-col=\"4\">0</td>\n                  <td data-row=\"5\" data-col=\"5\">1.7661105</td>\n                </tr>\n                <tr>\n                  <td data-row=\"6\" data-col=\"0\">1</td>\n                  <td data-row=\"6\" data-col=\"1\">50</td>\n                  <td data-row=\"6\" data-col=\"2\">1985</td>\n                  <td data-row=\"6\" data-col=\"3\">0</td>\n                  <td data-row=\"6\" data-col=\"4\">0</td>\n                  <td data-row=\"6\" data-col=\"5\">1.2856041</td>\n                </tr>\n        </tbody>\n      </table>\n    </div>\n<!-- hack to avoid NA insertion in last line -->\n```\n\n:::\n:::\n\n\nã“ã‚Œã‚’ä½¿ã£ã¦æ¨ªè»¸ã«`Year`ã€ç¸¦è»¸ã«`y`ã‚’ã¨ã£ã¦ã‚°ãƒ©ãƒ•ã«ã—ã¾ã™ã€‚\n\nè©³ç´°ã‚’æ›¸ãã¨é•·ããªã‚‹ã®ã§ã€é©å®œãƒ¡ãƒ¢ã‚’å…¥ã‚Œã¾ã—ãŸã€‚ã”å‚è€ƒã¾ã§ã€‚\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf <- df |> \n  mutate(\n    # ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹ç¾¤ã¨ãã‚Œä»¥å¤–ã«åˆ†ã‘ã‚‹\n    group = if_else(treated_1998 == 1, as.factor(firm_id), \"other\"), \n    # æœ€å¾Œã®å¹´ã«ã ã‘ãƒ©ãƒ™ãƒ«ã‚’ä»˜ã‘ã‚‹\n    group_lab = if_else(treated_1998 == 1 & year == 2015, \n                        paste0(\"Firm \", firm_id), NA_character_)\n  )\n\nggplot(\n  # ã¾ãšãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹ç¾¤ã ã‘ãƒ—ãƒ­ãƒƒãƒˆ\n  df |> filter(treated_1998 == 1), \n  aes(x = year, y = y, group = firm_id)\n) + \n  theme_minimal() + \n  theme(\n    # ç½«ç·šã‚’å‰Šé™¤\n    panel.grid = element_blank(), \n    # å‡¡ä¾‹ã‚’å‰Šé™¤\n    legend.position = \"none\", \n    # è»¸ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨æ–‡å­—ã®ãƒ•ã‚©ãƒ³ãƒˆã¨ã‚µã‚¤ã‚ºã‚’èª¿æ•´\n    axis.title = element_text(family = \"Times\", size = 18), \n    axis.text = element_text(family = \"Times\", size = 14)\n  ) + \n  geom_vline(\n    # å‚ç›´ç·šã‚’æå†™\n    xintercept = seq(1980, 2015, by = 5), \n    color = \"gray91\", \n    linewidth = .6\n  ) + \n  geom_segment(\n    # æ°´å¹³ç·šã‚’æå†™\n    # æå†™ã®ãŸã‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™\n    data = tibble(y = seq(-2.5, 5.0, by = 2.5), x1 = 1980, x2 = 2015), \n    aes(x = x1, xend = x2, y = y, yend = y), \n    inherit.aes = FALSE, \n    color = \"gray91\", \n    linewidth = .6\n  ) + \n  geom_segment(\n    # è–„ã„æ°´å¹³ç·šã‚’æå†™\n    data = tibble(y = seq(-2.0, 4.5, by = .5), x1 = 1980, x2 = 2015), \n    aes(x = x1, xend = x2, y = y, yend = y), \n    inherit.aes = FALSE, \n    color = \"gray97\", \n    linewidth = .3\n  ) + \n  geom_segment(\n    # ç¸¦è»¸ãŒ0ã®ã¨ã“ã‚ã«æ°´å¹³ç·šã‚’æå†™\n    data = tibble(y = 0, x1 = 1980, x2 = 2015), \n    aes(x = x1, xend = x2, y = y), \n    inherit.aes = FALSE, \n    linetype = \"dashed\", \n    color = \"gray40\"\n  ) + \n  geom_vline(\n    # å‡¦ç½®å¹´ã«å‚ç›´ç·šã‚’æå†™\n    xintercept = 1998, \n    linetype = \"dashed\", \n    color = \"gray40\"\n  ) + \n  geom_line(\n    # ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ãªã„ç¾¤ã‚’ãƒ—ãƒ­ãƒƒãƒˆ\n    data = df |> filter(group == \"other\"), \n    color = \"gray75\", \n    alpha = .5\n  ) + \n  geom_line(\n    # ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹ç¾¤ã‚’ãƒ—ãƒ­ãƒƒãƒˆ\n    aes(color = group)\n  ) + \n  geom_text_repel(\n    # ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ãŸç·šã«ãƒ©ãƒ™ãƒ«ã‚’è¿½åŠ \n    aes(color = group, label = group_lab), \n    family = \"Times\", \n    hjust = 0, \n    # 2017å¹´ã®ä½ç½®ã«ãƒ©ãƒ™ãƒ«ã‚’æ›¸ã\n    xlim = c(2017, NA), \n    size = 4, \n    segment.linetype = \"dotted\"\n  ) + \n  xlab(\"Year\") + \n  ylab(\"Value\") + \n  scale_x_continuous(\n    expand = c(0, 0), \n    # ãƒ©ãƒ™ãƒ«ãŒè¦‹ãˆã‚‹ã‚ˆã†ã«å›³ã®ç«¯ã®2015å¹´ã‚ˆã‚Šåºƒãã¨ã‚‹\n    limits = c(1980, 2021), \n    breaks = seq(1980, 2015, by = 5)\n  ) + \n  scale_y_continuous(\n    expand = c(0, 0), \n    limits = c(-2.5, 5.0), \n    breaks = c(-2.5, 0, 2.5, 5.0)\n  )\n```\n\n::: {.cell-output-display}\n![ggrepelã‚’ä½¿ã£ãŸãƒ—ãƒ­ãƒƒãƒˆ](index_files/figure-html/fig-ggrepel-1.png){#fig-ggrepel fig-align='center'}\n:::\n:::\n\n\n## ãŠã‚ã‚Šã«\n\nã²ã¨ã¾ãšåƒ•ãŒã‚ˆãä½¿ã†ggplotã®è¨­å®šã‚’ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚ggplotã‚’é§†ä½¿ã—ã¦ã€ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥ãªãƒ—ãƒ­ãƒƒãƒˆã‚’ä½œæˆã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼\n\né©å®œè¿½è¨˜ã™ã‚‹äºˆå®šã§ã™ã®ã§ã€ã”å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}